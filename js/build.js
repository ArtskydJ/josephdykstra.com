(function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u=typeof require=="function"&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,n){var r=e("levelup");var i=e("localstorage-down");var o=function a(e){return new i(e)};t.exports={clearCache:function s(){var e=r("noddity-content",{db:o});e.createKeyStream().on("data",function(t){e.del(t)})}}},{levelup:20,"localstorage-down":44}],2:[function(e,t,n){var r=e("noddity-butler");var i=e("levelup");var o=e("noddity-linkifier");var a=e("localstorage-down");var s=e("./routing");var u=e("./mainViewModel");var f=e("level-sublevel");var l=noddityConfig;var c=function b(e){return new a(e)};var h=f(i("noddity-content",{db:c}));var d=l.title.replace(/[^\w]+/g,"");var p=l.debug?{refreshEvery:30*1e3}:undefined;var v=new r(l.noddityRoot,h.sublevel(d),p);var g=new o(l.pathPrefix+l.pagePathPrefix);var m=new u(v,g);var y=s();y.on("current",m.setCurrent);if(l.debug){window.debug=e("./debug")}},{"./debug":1,"./mainViewModel":3,"./routing":4,"level-sublevel":6,levelup:20,"localstorage-down":44,"noddity-butler":55,"noddity-linkifier":67}],3:[function(e,t,n){var r=e("ractive");var i=noddityConfig;var o=e("noddity-renderer");function a(){}t.exports=function s(e,t){var n=new o(e,t.linkify);var s=null;var u=new r({el:"title",template:"{{title}}{{#page}} | {{page}}{{/page}}",data:{title:i.title}});var f=new r({el:"main",template:"#template-main",data:Object.create(i)});var l=i.sidebar?"{{{html}}}":"#template-menu";var c=new r({el:"sidebar",template:l,data:Object.create(i)});if(i.sidebar){e.getPost(i.sidebar,function(e,t){if(e){c.set("html",e.message)}else{n.populateRootRactive(t,c)}})}function h(e){console.log(e)}function d(){e.getPosts(function(e,t){if(!e){c.set("postList",t.reverse().filter(function(e){return typeof e.metadata.title==="string"}).map(function(e){return{title:e.metadata.title,filename:e.filename}}))}else{h(e)}})}function p(t){e.getPost(t,function(e,r){if(e){f.set("html",e.message);u.set("page",null);if(t!==i.errorPage){window.location=window.location.origin+window.location.pathname+i.pathPrefix+i.pagePathPrefix+i.errorPage}}else{u.set("page",r.metadata.title);if(s){s(r)}else{s=n.populateRootRactive(r,f)}if(!c.get("postList")){d()}}})}t.on("link",function(t){e.getPost(t,a)});function v(e,t,n){function r(n){return n.filename===e&&n.title!==t.metadata.title}var i=c.get("postList");if(i&&i.some(r)){d()}}e.on("post changed",v);e.on("index changed",d);return{setCurrent:p}}},{"noddity-renderer":68,ractive:78}],4:[function(e,t,n){var r=noddityConfig;var i=e("events").EventEmitter;t.exports=function(){var e=new i;var t=Satnav({}).navigate({path:"!/",directions:function(t){e.emit("current","index.md")}}).navigate({path:"!/"+r.pagePathPrefix+"{name}",directions:function(t){e.emit("current",t.name)}}).navigate({path:"",directions:function(e){document.location=document.location+"#!/"}}).change(function(e,t){window.scrollTo(0,0)}).otherwise("!/"+r.pagePathPrefix+"404.md");setTimeout(t.go.bind(t),0);return e}},{events:83}],5:[function(e,t,n){function r(e,t,n,r){var i={type:e,key:t,value:n,options:r};if(r&&r.prefix){i.prefix=r.prefix;delete r.prefix}this._operations.push(i);return this}function i(e){this._operations=[];this._sdb=e;this.put=r.bind(this,"put");this.del=r.bind(this,"del")}var o=i.prototype;o.clear=function(){this._operations=[]};o.write=function(e){this._sdb.batch(this._operations,e)};t.exports=i},{}],6:[function(e,t,n){(function(n){var r=e("events").EventEmitter;var i=n.nextTick;var o=e("./sub");var a=e("./batch");var s=e("level-fix-range");var u=e("level-hooks");t.exports=function(e,t){function n(){}n.prototype=e;var r=new n;if(r.sublevel)return r;t=t||{};var i=t.sep=t.sep||"ÿ";r._options=t;u(r);r.sublevels={};r.sublevel=function(e,t){if(r.sublevels[e])return r.sublevels[e];return new o(r,e,t||this._options)};r.methods={};r.prefix=function(e){return""+(e||"")};r.pre=function(e,t){if(!t)t=e,e={max:i};return r.hooks.pre(e,t)};r.post=function(e,t){if(!t)t=e,e={max:i};return r.hooks.post(e,t)};function f(e){return function(t){t=t||{};t=s(t);if(t.reverse)t.start=t.start||i;else t.end=t.end||i;return e.call(r,t)}}r.readStream=r.createReadStream=f(r.createReadStream);r.keyStream=r.createKeyStream=f(r.createKeyStream);r.valuesStream=r.createValueStream=f(r.createValueStream);var l=r.batch;r.batch=function(e,t,n){if(!Array.isArray(e))return new a(r);e.forEach(function(e){if(e.prefix){if("function"===typeof e.prefix.prefix)e.key=e.prefix.prefix(e.key);else if("string"===typeof e.prefix)e.key=e.prefix+e.key}});l.call(r,e,t,n)};return r}}).call(this,e("GS1EMO"))},{"./batch":5,"./sub":17,GS1EMO:89,events:83,"level-fix-range":7,"level-hooks":9}],7:[function(e,t,n){var r=e("clone");t.exports=function i(e){e=r(e);var t=e.reverse;var n=e.max||e.end;var i=e.min||e.start;var o=[i,n];if(i!=null&&n!=null)o.sort();if(t)o=o.reverse();e.start=o[0];e.end=o[1];delete e.min;delete e.max;return e}},{clone:8}],8:[function(e,t,n){(function(e){"use strict";function n(e){return Object.prototype.toString.call(e)}var r={isArray:function(e){return Array.isArray(e)||typeof e==="object"&&n(e)==="[object Array]"},isDate:function(e){return typeof e==="object"&&n(e)==="[object Date]"},isRegExp:function(e){return typeof e==="object"&&n(e)==="[object RegExp]"},getRegExpFlags:function(e){var t="";e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");return t}};if(typeof t==="object")t.exports=i;function i(t,n,i,o){var a=[];var s=[];var u=typeof e!="undefined";if(typeof n=="undefined")n=true;if(typeof i=="undefined")i=Infinity;function f(t,i){if(t===null)return null;if(i==0)return t;var l;if(typeof t!="object"){return t}if(r.isArray(t)){l=[]}else if(r.isRegExp(t)){l=new RegExp(t.source,r.getRegExpFlags(t));if(t.lastIndex)l.lastIndex=t.lastIndex}else if(r.isDate(t)){l=new Date(t.getTime())}else if(u&&e.isBuffer(t)){l=new e(t.length);t.copy(l);return l}else{if(typeof o=="undefined")l=Object.create(Object.getPrototypeOf(t));else l=Object.create(o)}if(n){var c=a.indexOf(t);if(c!=-1){return s[c]}a.push(t);s.push(l)}for(var h in t){l[h]=f(t[h],i-1)}return l}return f(t,i)}i.clonePrototype=function(e){if(e===null)return null;var t=function(){};t.prototype=e;return new t}}).call(this,e("buffer").Buffer)},{buffer:80}],9:[function(e,t,n){var r=e("string-range");t.exports=function(e){if(e.hooks){return}var t=[];var n=[];function i(e){return e&&("string"===typeof e?e:"string"===typeof e.prefix?e.prefix:"function"===typeof e.prefix?e.prefix():"")}function o(e){if(e&&e._getKeyEncoding)return e._getKeyEncoding(e)}function a(e){if(e&&e._getValueEncoding)return e._getValueEncoding(e)}function s(e,t){return function(){var n=e.indexOf(t);if(!~n)return false;e.splice(n,1);return true}}e.hooks={post:function(e,n){if(!n)n=e,e="";var i={test:r.checker(e),hook:n};t.push(i);return s(t,i)},pre:function(e,t){if(!t)t=e,e="";var i={test:r.checker(e),hook:t,safe:false!==e.safe};n.push(i);return s(n,i)},posthooks:t,prehooks:n};function u(e){if(e&&e.type){t.forEach(function(t){if(t.test(e.key))t.hook(e)})}}e.on("put",function(e,t){u({type:"put",key:e,value:t})});e.on("del",function(e,t){u({type:"del",key:e,value:t})});e.on("batch",function d(e){e.forEach(u)});var f=e.put;var l=e.del;var c=e.batch;function h(t,r,s,u){try{r.forEach(function p(e,t){n.forEach(function(n){if(n.test(String(e.key))){var s={add:function(e,s){if(typeof e==="undefined"){return this}if(e===false)return delete r[t];var u=i(e.prefix)||i(s)||n.prefix||"";if(u)e.prefix=u;e.key=u+e.key;if(n.safe&&n.test(String(e.key))){throw new Error("prehook cannot insert into own range")}var f=e.keyEncoding||o(e.prefix);var l=e.valueEncoding||a(e.prefix);if(f)e.keyEncoding=f;if(l)e.valueEncoding=l;r.push(e);p(e,r.length-1);return this},put:function(e,t){if("object"===typeof e)e.type="put";return this.add(e,t)},del:function(e,t){if("object"===typeof e)e.type="del";return this.add(e,t)},veto:function(){return this.add(false)}};n.hook.call(s,e,s.add,r)}})})}catch(h){return(u||s)(h)}r=r.filter(function(e){return e&&e.type});if(r.length==1&&!t){var d=r[0];return d.type=="put"?f.call(e,d.key,d.value,s,u):l.call(e,d.key,s,u)}return c.call(e,r,s,u)}e.put=function(e,t,n,r){var i=[{key:e,value:t,type:"put"}];return h(false,i,n,r)};e.del=function(e,t,n){var r=[{key:e,type:"del"}];return h(false,r,t,n)};e.batch=function(e,t,n){return h(true,e,t,n)}}},{"string-range":10}],10:[function(e,t,n){var r=n.range=function(e){return null==e?{}:"string"===typeof r?{min:r,max:r+"ÿ"}:e};var i=n.prefix=function(e,t,r){e=n.range(e);var i={};r=r||"ÿ";if(e instanceof RegExp||"function"==typeof e){i.min=t;i.max=t+r,i.inner=function(n){var r=n.substring(t.length);if(e.test)return e.test(r);return e(r)}}else if("object"===typeof e){i.min=t+(e.min||e.start||"");i.max=t+(e.max||e.end||(r||"~"));i.reverse=!!e.reverse}return i};var o=n.checker=function(e){if(!e)e={};if("string"===typeof e)return function(t){return t.indexOf(e)==0};else if(e instanceof RegExp)return function(t){return e.test(t)};else if("object"===typeof e)return function(t){var n=e.min||e.start;var r=e.max||e.end;t=String(t);return(!n||t>=n)&&(!r||t<=r)&&(!e.inner||(e.inner.test?e.inner.test(t):e.inner(t)))};else if("function"===typeof e)return e};var a=n.satisfies=function(e,t){return o(t)(e)}},{}],11:[function(e,t,n){t.exports=r;function r(e){return e!==null&&(typeof e==="object"||typeof e==="function")}},{}],12:[function(e,t,n){var r=e("object-keys");var i=e("./has-keys");t.exports=o;function o(){var e={};for(var t=0;t<arguments.length;t++){var n=arguments[t];if(!i(n)){continue}var o=r(n);for(var a=0;a<o.length;a++){var s=o[a];e[s]=n[s]}}return e}},{"./has-keys":11,"object-keys":13}],13:[function(e,t,n){t.exports=Object.keys||e("./shim")},{"./shim":16}],14:[function(e,t,n){var r=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;t.exports=function o(e,t,n){if(i.call(t)!=="[object Function]"){throw new TypeError("iterator must be a function")}var o=e.length;if(o===+o){for(var a=0;a<o;a++){t.call(n,e[a],a,e)}}else{for(var s in e){if(r.call(e,s)){t.call(n,e[s],s,e)}}}}},{}],15:[function(e,t,n){var r=Object.prototype;var i=r.hasOwnProperty;var o=r.toString;var a=function(e){return e!==e};var s={"boolean":1,number:1,string:1,undefined:1};var u=t.exports={};u.a=u.type=function(e,t){return typeof e===t};u.defined=function(e){return e!==undefined};u.empty=function(e){var t=o.call(e);var n;if("[object Array]"===t||"[object Arguments]"===t){return e.length===0}if("[object Object]"===t){for(n in e)if(i.call(e,n))return false;return true}if("[object String]"===t){return""===e}return false};u.equal=function(e,t){var n=o.call(e);var r;if(n!==o.call(t)){return false}if("[object Object]"===n){for(r in e){if(!u.equal(e[r],t[r])){return false}}return true}if("[object Array]"===n){r=e.length;if(r!==t.length){return false}while(--r){if(!u.equal(e[r],t[r])){return false}}return true}if("[object Function]"===n){return e.prototype===t.prototype}if("[object Date]"===n){return e.getTime()===t.getTime()}return e===t};u.hosted=function(e,t){var n=typeof t[e];return n==="object"?!!t[e]:!s[n]};u.instance=u["instanceof"]=function(e,t){return e instanceof t};u["null"]=function(e){return e===null};u.undefined=function(e){return e===undefined};u.arguments=function(e){var t="[object Arguments]"===o.call(e);var n=!u.array(e)&&u.arraylike(e)&&u.object(e)&&u.fn(e.callee);return t||n};u.array=function(e){return"[object Array]"===o.call(e)};u.arguments.empty=function(e){return u.arguments(e)&&e.length===0};u.array.empty=function(e){return u.array(e)&&e.length===0};u.arraylike=function(e){return!!e&&!u.boolean(e)&&i.call(e,"length")&&isFinite(e.length)&&u.number(e.length)&&e.length>=0};u.boolean=function(e){return"[object Boolean]"===o.call(e)};u["false"]=function(e){return u.boolean(e)&&(e===false||e.valueOf()===false)};u["true"]=function(e){return u.boolean(e)&&(e===true||e.valueOf()===true)};u.date=function(e){return"[object Date]"===o.call(e)};u.element=function(e){return e!==undefined&&typeof HTMLElement!=="undefined"&&e instanceof HTMLElement&&e.nodeType===1};u.error=function(e){return"[object Error]"===o.call(e)};u.fn=u["function"]=function(e){var t=typeof window!=="undefined"&&e===window.alert;return t||"[object Function]"===o.call(e)};u.number=function(e){return"[object Number]"===o.call(e)};u.infinite=function(e){return e===Infinity||e===-Infinity};u.decimal=function(e){return u.number(e)&&!a(e)&&!u.infinite(e)&&e%1!==0};u.divisibleBy=function(e,t){var n=u.infinite(e);var r=u.infinite(t);var i=u.number(e)&&!a(e)&&u.number(t)&&!a(t)&&t!==0;return n||r||i&&e%t===0};u.int=function(e){return u.number(e)&&!a(e)&&e%1===0};u.maximum=function(e,t){if(a(e)){throw new TypeError("NaN is not a valid value")}else if(!u.arraylike(t)){throw new TypeError("second argument must be array-like")}var n=t.length;while(--n>=0){if(e<t[n]){return false}}return true};u.minimum=function(e,t){if(a(e)){throw new TypeError("NaN is not a valid value")}else if(!u.arraylike(t)){throw new TypeError("second argument must be array-like")}var n=t.length;while(--n>=0){if(e>t[n]){return false}}return true};u.nan=function(e){return!u.number(e)||e!==e};u.even=function(e){return u.infinite(e)||u.number(e)&&e===e&&e%2===0};u.odd=function(e){return u.infinite(e)||u.number(e)&&e===e&&e%2!==0};u.ge=function(e,t){if(a(e)||a(t)){throw new TypeError("NaN is not a valid value")}return!u.infinite(e)&&!u.infinite(t)&&e>=t};u.gt=function(e,t){if(a(e)||a(t)){throw new TypeError("NaN is not a valid value")}return!u.infinite(e)&&!u.infinite(t)&&e>t};u.le=function(e,t){if(a(e)||a(t)){throw new TypeError("NaN is not a valid value")}return!u.infinite(e)&&!u.infinite(t)&&e<=t};u.lt=function(e,t){if(a(e)||a(t)){throw new TypeError("NaN is not a valid value")}return!u.infinite(e)&&!u.infinite(t)&&e<t};u.within=function(e,t,n){if(a(e)||a(t)||a(n)){throw new TypeError("NaN is not a valid value")}else if(!u.number(e)||!u.number(t)||!u.number(n)){throw new TypeError("all arguments must be numbers")}var r=u.infinite(e)||u.infinite(t)||u.infinite(n);return r||e>=t&&e<=n};u.object=function(e){return e&&"[object Object]"===o.call(e)};u.hash=function(e){return u.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval};u.regexp=function(e){return"[object RegExp]"===o.call(e)};u.string=function(e){return"[object String]"===o.call(e)}},{}],16:[function(e,t,n){(function(){"use strict";var n=Object.prototype.hasOwnProperty,r=e("is"),i=e("foreach"),o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s;s=function u(e){if(!r.object(e)&&!r.array(e)){throw new TypeError("Object.keys called on a non-object")}var t,s=[];for(t in e){if(n.call(e,t)){s.push(t)}}if(o){i(a,function(t){if(n.call(e,t)){s.push(t)}})}return s};t.exports=s})()},{foreach:14,is:15}],17:[function(e,t,n){var r=e("events").EventEmitter;var i=e("util").inherits;var o=e("string-range");var a=e("level-fix-range");var s=e("xtend");var u=e("./batch");i(f,r);function f(e,t,n){if("string"===typeof n){console.error("db.sublevel(name, seperator<string>) is depreciated");console.error("use db.sublevel(name, {sep: separator})) if you must");n={sep:n}}if(!(this instanceof f))return new f(e,t,n);if(!e)throw new Error("must provide db");if(!t)throw new Error("must provide prefix");n=n||{};n.sep=n.sep||"ÿ";this._parent=e;this._options=n;this.options=n;this._prefix=t;this._root=h(this);e.sublevels[t]=this;this.sublevels={};this.methods={};var r=this;this.hooks={pre:function(){return r.pre.apply(r,arguments)},post:function(){return r.post.apply(r,arguments)}}}var l=f.prototype;l._key=function(e){var t=this._options.sep;return t+this._prefix+t+e};l._getOptsAndCb=function(e,t){if(typeof e=="function"){t=e;e={}}return{opts:s(e,this._options),cb:t}};l.sublevel=function(e,t){if(this.sublevels[e])return this.sublevels[e];return new f(this,e,t||this._options)};l.put=function(e,t,n,r){var i=this._getOptsAndCb(n,r);this._root.put(this.prefix(e),t,i.opts,i.cb)};l.get=function(e,t,n){var r=this._getOptsAndCb(t,n);this._root.get(this.prefix(e),r.opts,r.cb)};l.del=function(e,t,n){var r=this._getOptsAndCb(t,n);this._root.del(this.prefix(e),r.opts,r.cb)};l.batch=function(e,t,n){if(!Array.isArray(e))return new u(this);var r=this,i=this._getOptsAndCb(t,n);e.forEach(function(e){if("string"===typeof e.prefix)e.key=e.prefix+e.key;else e.key=(e.prefix||r).prefix(e.key);if(e.prefix)e.prefix=null});this._root.batch(e,i.opts,i.cb)};l._getKeyEncoding=function(){if(this.options.keyEncoding)return this.options.keyEncoding;if(this._parent&&this._parent._getKeyEncoding)return this._parent._getKeyEncoding()};l._getValueEncoding=function(){if(this.options.valueEncoding)return this.options.valueEncoding;if(this._parent&&this._parent._getValueEncoding)return this._parent._getValueEncoding()};l.prefix=function(e){var t=this._options.sep;return this._parent.prefix()+t+this._prefix+t+(e||"")};l.keyStream=l.createKeyStream=function(e){e=e||{};e.keys=true;e.values=false;return this.createReadStream(e)};l.valueStream=l.createValueStream=function(e){e=e||{};e.keys=false;e.values=true;e.keys=false;return this.createReadStream(e)};function c(e,t){["valueEncoding","encoding","keyEncoding","reverse","values","keys","limit","fillCache"].forEach(function(n){if(t.hasOwnProperty(n))e[n]=t[n]})}l.readStream=l.createReadStream=function(e){e=e||{};var t=h(this);var n=this.prefix();var r=o.prefix(e,n);c(r,s(e,this._options));var i=t.createReadStream(r);if(r.values===false){var a=i.read;if(a){i.read=function(e){var t=a.call(this,e);if(t)t=t.substring(n.length);return t}}else{var u=i.emit;i.emit=function(e,t){if(e==="data"){u.call(this,"data",t.substring(n.length))}else u.call(this,e,t)}}return i}else if(r.keys===false)return i;else{var a=i.read;if(a){i.read=function(e){var t=a.call(this,e);if(t)t.key=t.key.substring(n.length);return t}}else{i.on("data",function(e){e.key=e.key.substring(n.length)})}return i}};l.writeStream=l.createWriteStream=function(){var e=h(this);var t=this.prefix();var n=e.createWriteStream.apply(e,arguments);var r=n.write;var i=this._options.encoding;var o=this._options.valueEncoding;var a=this._options.keyEncoding;var s=!i&&!o&&!a;n.write=s?function(e){e.key=t+e.key;return r.call(n,e)}:function(e){e.key=t+e.key;if(i&&typeof e.encoding==="undefined")e.encoding=i;if(o&&typeof e.valueEncoding==="undefined")e.valueEncoding=o;if(a&&typeof e.keyEncoding==="undefined")e.keyEncoding=a;return r.call(n,e)};return n};l.approximateSize=function(){var e=h(db);return e.approximateSize.apply(e,arguments)};function h(e){if(!e._parent)return e;return h(e._parent)}l.pre=function(e,t){if(!t)t=e,e=null;e=o.prefix(e,this.prefix(),this._options.sep);var n=h(this._parent);var r=this.prefix();return n.hooks.pre(a(e),function(e,n,i){t({key:e.key.substring(r.length),value:e.value,type:e.type},function(e,t){n(e,e.prefix?t:t||r)},i)})};l.post=function(e,t){if(!t)t=e,e=null;var n=h(this._parent);var r=this.prefix();e=o.prefix(e,r,this._options.sep);return n.hooks.post(a(e),function(e){t({key:e.key.substring(r.length),value:e.value,type:e.type})})};var n=t.exports=f},{"./batch":5,events:83,"level-fix-range":7,"string-range":10,util:110,xtend:12}],18:[function(e,t,n){var r=e("./util"),i=e("./errors").WriteError,o=r.getOptions,a=r.dispatchError;function s(e){this._levelup=e;this.batch=e.db.batch();this.ops=[]}s.prototype.put=function(e,t,n){n=o(this._levelup,n);var a=r.encodeKey(e,n),s=r.encodeValue(t,n);try{this.batch.put(a,s)}catch(u){throw new i(u)}this.ops.push({type:"put",key:a,value:s});return this};s.prototype.del=function(e,t){t=o(this._levelup,t);var n=r.encodeKey(e,t);try{this.batch.del(n)}catch(a){throw new i(a)}this.ops.push({type:"del",key:n});return this};s.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new i(e)}this.ops=[];return this};s.prototype.write=function(e){var t=this._levelup,n=this.ops;try{this.batch.write(function(r){if(r)return a(t,new i(r),e);t.emit("batch",n);if(e)e()})}catch(r){throw new i(r)}};t.exports=s},{"./errors":19,"./util":22}],19:[function(e,t,n){var r=e("errno").create,i=r("LevelUPError"),o=r("NotFoundError",i);o.prototype.notFound=true;o.prototype.status=404;t.exports={LevelUPError:i,InitializationError:r("InitializationError",i),OpenError:r("OpenError",i),ReadError:r("ReadError",i),WriteError:r("WriteError",i),NotFoundError:o,EncodingError:r("EncodingError",i)}},{errno:30}],20:[function(e,t,n){(function(n){var r=e("events").EventEmitter,i=e("util").inherits,o=e("xtend"),a=e("prr"),s=e("deferred-leveldown"),u=e("./errors").WriteError,f=e("./errors").ReadError,l=e("./errors").NotFoundError,c=e("./errors").OpenError,h=e("./errors").EncodingError,d=e("./errors").InitializationError,p=e("./read-stream"),v=e("./write-stream"),g=e("./util"),m=e("./batch"),y=g.getOptions,b=g.defaultOptions,w=g.getLevelDOWN,E=g.dispatchError;function _(e,t){return typeof e=="function"?e:t}function x(e,t,i){if(!(this instanceof x))return new x(e,t,i);var s;r.call(this);this.setMaxListeners(Infinity);if(typeof e=="function"){t=typeof t=="object"?t:{};t.db=e;e=null}else if(typeof e=="object"&&typeof e.db=="function"){t=e;e=null}if(typeof t=="function"){i=t;t={}}if((!t||typeof t.db!="function")&&typeof e!="string"){s=new d("Must provide a location for the database");if(i){return n.nextTick(function(){i(s)})}throw s}t=y(this,t);this.options=o(b,t);this._status="new";a(this,"location",e,"e");this.open(i)}i(x,r);x.prototype.open=function(e){var t=this,r,i;if(this.isOpen()){if(e)n.nextTick(function(){e(null,t)});return this}if(this._isOpening()){return e&&this.once("open",function(){e(null,t)})}this.emit("opening");this._status="opening";this.db=new s(this.location);r=this.options.db||w();i=r(this.location);i.open(this.options,function(n){if(n){return E(t,new c(n),e)}else{t.db.setDb(i);t.db=i;t._status="open";if(e)e(null,t);t.emit("open");t.emit("ready")}})};x.prototype.close=function(e){var t=this;if(this.isOpen()){this._status="closing";this.db.close(function(){t._status="closed";t.emit("closed");if(e)e.apply(null,arguments)});this.emit("closing");this.db=null}else if(this._status=="closed"&&e){return n.nextTick(e)}else if(this._status=="closing"&&e){this.once("closed",e)}else if(this._isOpening()){this.once("open",function(){t.close(e)})}};x.prototype.isOpen=function(){return this._status=="open"};x.prototype._isOpening=function(){return this._status=="opening"};x.prototype.isClosed=function(){return/^clos/.test(this._status)};x.prototype.get=function(e,t,n){var r=this,i;n=_(t,n);if(typeof n!="function"){return E(this,new f("get() requires key and callback arguments"))}if(!this._isOpening()&&!this.isOpen()){return E(this,new f("Database is not open"),n)}t=g.getOptions(this,t);i=g.encodeKey(e,t);t.asBuffer=g.isValueAsBuffer(t);this.db.get(i,t,function(i,o){if(i){if(/notfound/i.test(i)){i=new l("Key not found in database ["+e+"]",i)}else{i=new f(i)}return E(r,i,n)}if(n){try{o=g.decodeValue(o,t)}catch(a){return n(new h(a))}n(null,o)}})};x.prototype.put=function(e,t,n,r){var i=this,o,a;r=_(n,r);if(e===null||e===undefined||t===null||t===undefined){return E(this,new u("put() requires key and value arguments"),r)}if(!this._isOpening()&&!this.isOpen()){return E(this,new u("Database is not open"),r)}n=y(this,n);o=g.encodeKey(e,n);a=g.encodeValue(t,n);this.db.put(o,a,n,function(n){if(n){return E(i,new u(n),r)}else{i.emit("put",e,t);if(r)r()}})};x.prototype.del=function(e,t,n){var r=this,i;n=_(t,n);if(e===null||e===undefined){return E(this,new u("del() requires a key argument"),n)}if(!this._isOpening()&&!this.isOpen()){return E(this,new u("Database is not open"),n)}t=y(this,t);i=g.encodeKey(e,t);this.db.del(i,t,function(t){if(t){return E(r,new u(t),n)}else{r.emit("del",e);if(n)n()}})};x.prototype.batch=function(e,t,n){var r=this,i,o,a;if(!arguments.length)return new m(this);n=_(t,n);if(!Array.isArray(e)){return E(this,new u("batch() requires an array argument"),n)}if(!this._isOpening()&&!this.isOpen()){return E(this,new u("Database is not open"),n)}t=y(this,t);i=t.keyEncoding;o=t.valueEncoding;a=e.map(function(e){if(e.type===undefined||e.key===undefined)return{};var n=e.keyEncoding||i,r=e.valueEncoding||e.encoding||o,a;if(n!="utf8"&&n!="binary"||r!="utf8"&&r!="binary"){a={type:e.type,key:g.encodeKey(e.key,t,e)};if(e.value!==undefined)a.value=g.encodeValue(e.value,t,e);return a}else{return e}});this.db.batch(a,t,function(t){if(t){return E(r,new u(t),n)}else{r.emit("batch",e);if(n)n()}})};x.prototype.approximateSize=function(e,t,n){var r=this,i,o;if(e===null||e===undefined||t===null||t===undefined||typeof n!="function"){return E(this,new f("approximateSize() requires start, end and callback arguments"),n)}i=g.encodeKey(e,this.options);o=g.encodeKey(t,this.options);if(!this._isOpening()&&!this.isOpen()){return E(this,new u("Database is not open"),n)}this.db.approximateSize(i,o,function(e,t){if(e){return E(r,new c(e),n)}else if(n){n(null,t)}})};x.prototype.readStream=x.prototype.createReadStream=function(e){var t=this;e=o(this.options,e);return new p(e,this,function(e){return t.db.iterator(e)})};x.prototype.keyStream=x.prototype.createKeyStream=function(e){return this.createReadStream(o(e,{keys:true,values:false}))};x.prototype.valueStream=x.prototype.createValueStream=function(e){return this.createReadStream(o(e,{keys:false,values:true}))};x.prototype.writeStream=x.prototype.createWriteStream=function(e){return new v(o(e),this)};x.prototype.toString=function(){return"LevelUP"};function k(e){return function(t,n){w()[e](t,n||function(){})}}t.exports=x;t.exports.copy=g.copy;t.exports.destroy=k("destroy");t.exports.repair=k("repair")}).call(this,e("GS1EMO"))},{"./batch":18,"./errors":19,"./read-stream":21,"./util":22,"./write-stream":23,GS1EMO:89,"deferred-leveldown":25,events:83,prr:31,util:110,xtend:42}],21:[function(e,t,n){var r=e("readable-stream").Readable,i=e("util").inherits,o=e("xtend"),a=e("./errors").EncodingError,s=e("./util"),u={keys:true,values:true},f=function(e,t){return{key:s.decodeKey(e,this._options),value:s.decodeValue(t,this._options)}},l=function(e){return s.decodeKey(e,this._options)},c=function(e,t){return s.decodeValue(t,this._options)},h=function(){return null};function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);r.call(this,{objectMode:true,highWaterMark:e.highWaterMark});this._db=t;e=this._options=o(u,e);this._keyEncoding=e.keyEncoding||e.encoding;this._valueEncoding=e.valueEncoding||e.encoding;if(typeof this._options.start!="undefined")this._options.start=s.encodeKey(this._options.start,this._options);if(typeof this._options.end!="undefined")this._options.end=s.encodeKey(this._options.end,this._options);if(typeof this._options.limit!="number")this._options.limit=-1;this._options.keyAsBuffer=s.isKeyAsBuffer(this._options);this._options.valueAsBuffer=s.isValueAsBuffer(this._options);this._makeData=this._options.keys&&this._options.values?f:this._options.keys?l:this._options.values?c:h;var i=this;if(!this._db.isOpen()){this._db.once("ready",function(){if(!i._destroyed){i._iterator=n(i._options)}})}else this._iterator=n(this._options)}i(d,r);d.prototype._read=function p(){var e=this;if(!e._db.isOpen()){return e._db.once("ready",function(){p.call(e)})}if(e._destroyed)return;e._iterator.next(function(t,n,r){if(t||n===undefined&&r===undefined){if(!t&&!e._destroyed)e.push(null);return e._cleanup(t)}try{r=e._makeData(n,r)}catch(i){return e._cleanup(new a(i))}if(!e._destroyed)e.push(r)})};d.prototype._cleanup=function(e){if(this._destroyed)return;this._destroyed=true;var t=this;if(e)t.emit("error",e);if(t._iterator){t._iterator.end(function(){t._iterator=null;t.emit("close")})}else{t.emit("close")}};d.prototype.destroy=function(){this._cleanup()};d.prototype.toString=function(){return"LevelUP.ReadStream"};t.exports=d},{"./errors":19,"./util":22,"readable-stream":41,util:110,xtend:42}],22:[function(e,t,n){(function(n,r){var i=e("xtend"),o=e("./errors").LevelUPError,a=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le"],s={createIfMissing:true,errorIfExists:false,keyEncoding:"utf8",valueEncoding:"utf8",compression:true},u,f=function(){function e(e){return e===undefined||e===null||r.isBuffer(e)}var t={};t.utf8=t["utf-8"]={encode:function(t){return e(t)?t:String(t)},decode:function(e){return e},buffer:false,type:"utf8"};t.json={encode:JSON.stringify,decode:JSON.parse,buffer:false,type:"json"};a.forEach(function(i){if(t[i])return;t[i]={encode:function(t){return e(t)?t:new r(t,i)},decode:function(e){return n.browser?e.toString(i):e},buffer:true,type:i}});return t}(),l=function(){var e={};a.forEach(function(t){e[t]={valueEncoding:t}});return e}();function c(e,t,n){e.readStream().pipe(t.writeStream()).on("close",n?n:function(){}).on("error",n?n:function(e){throw e})}function h(e,t){var n=typeof t=="string";if(!n&&t&&t.encoding&&!t.valueEncoding)t.valueEncoding=t.encoding;return i(e&&e.options||{},n?l[t]||l[s.valueEncoding]:t)}function d(){if(u)return u;var t=e("../package.json").devDependencies.leveldown,n="Could not locate LevelDOWN, try `npm install leveldown`",r;try{r=e("leveldown/package").version}catch(i){throw new o(n)}if(!e("semver").satisfies(r,t)){throw new o("Installed version of LevelDOWN ("+r+") does not match required version ("+t+")")}try{return u=e("leveldown")}catch(i){throw new o(n)}}function p(e,t,n){return typeof n=="function"?n(t):e.emit("error",t)}function v(e,t){var n=t&&t.keyEncoding||e.keyEncoding||"utf8";return f[n]||n}function g(e,t){var n=t&&(t.valueEncoding||t.encoding)||e.valueEncoding||e.encoding||"utf8";return f[n]||n}function m(e,t,n){return v(t,n).encode(e)}function y(e,t,n){return g(t,n).encode(e)}function b(e,t){return v(t).decode(e)}function w(e,t){return g(t).decode(e)}function E(e,t){return g(e,t).buffer}function _(e,t){return v(e,t).buffer}t.exports={defaultOptions:s,copy:c,getOptions:h,getLevelDOWN:d,dispatchError:p,encodeKey:m,encodeValue:y,isValueAsBuffer:E,isKeyAsBuffer:_,decodeValue:w,decodeKey:b}}).call(this,e("GS1EMO"),e("buffer").Buffer)},{"../package.json":43,"./errors":19,GS1EMO:89,buffer:80,leveldown:79,"leveldown/package":79,semver:79,xtend:42}],23:[function(e,t,n){(function(n,r){var i=e("stream").Stream,o=e("util").inherits,a=e("xtend"),s=e("bl"),u=r.setImmediate||n.nextTick,f=e("./util").getOptions,l={type:"put"};function c(e,t){if(!(this instanceof c))return new c(e,t);i.call(this);this._options=a(l,f(t,e));this._db=t;this._buffer=[];this._status="init";this._end=false;this.writable=true;this.readable=false;var n=this,r=function(){if(!n.writable)return;n._status="ready";n.emit("ready");n._process()};if(t.isOpen())u(r);else t.once("ready",r)}o(c,i);c.prototype.write=function(e){if(!this.writable)return false;this._buffer.push(e);if(this._status!="init")this._processDelayed();if(this._options.maxBufferLength&&this._buffer.length>this._options.maxBufferLength){this._writeBlock=true;return false}return true};c.prototype.end=function(e){var t=this;if(e)this.write(e);u(function(){t._end=true;t._process()})};c.prototype.destroy=function(){this.writable=false;this.end()};c.prototype.destroySoon=function(){this.end()};c.prototype.add=function(e){if(!e.props)return;if(e.props.Directory)e.pipe(this._db.writeStream(this._options));else if(e.props.File||e.File||e.type=="File")this._write(e);return true};c.prototype._processDelayed=function(){var e=this;u(function(){e._process()})};c.prototype._process=function(){var e,t=this,n=function(e){if(!t.writable)return;if(t._status!="closed")t._status="ready";if(e){t.writable=false;return t.emit("error",e)}t._process()};if(t._status!="ready"&&t.writable){if(t._buffer.length&&t._status!="closed")t._processDelayed();return}if(t._buffer.length&&t.writable){t._status="writing";e=t._buffer;
t._buffer=[];t._db.batch(e.map(function(e){return{type:e.type||t._options.type,key:e.key,value:e.value,keyEncoding:e.keyEncoding||t._options.keyEncoding,valueEncoding:e.valueEncoding||e.encoding||t._options.valueEncoding}}),n);if(t._writeBlock){t._writeBlock=false;t.emit("drain")}return}if(t._end&&t._status!="closed"){t._status="closed";t.writable=false;t.emit("close")}};c.prototype._write=function(e){var t=e.path||e.props.path,n=this;if(!t)return;e.pipe(s(function(e,r){if(e){n.writable=false;return n.emit("error",e)}if(n._options.fstreamRoot&&t.indexOf(n._options.fstreamRoot)>-1)t=t.substr(n._options.fstreamRoot.length+1);n.write({key:t,value:r.slice(0)})}))};c.prototype.toString=function(){return"LevelUP.WriteStream"};t.exports=c}).call(this,e("GS1EMO"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./util":22,GS1EMO:89,bl:24,stream:107,util:110,xtend:42}],24:[function(e,t,n){(function(n){var r=e("readable-stream").Duplex,i=e("util");function o(e){if(!(this instanceof o))return new o(e);this._bufs=[];this.length=0;if(typeof e=="function"){this._callback=e;var t=function(e){if(this._callback){this._callback(e);this._callback=null}}.bind(this);this.on("pipe",function(e){e.on("error",t)});this.on("unpipe",function(e){e.removeListener("error",t)})}else if(n.isBuffer(e))this.append(e);else if(Array.isArray(e)){e.forEach(function(e){n.isBuffer(e)&&this.append(e)}.bind(this))}r.call(this)}i.inherits(o,r);o.prototype._offset=function(e){var t=0,n=0,r;for(;n<this._bufs.length;n++){r=t+this._bufs[n].length;if(e<r)return[n,e-t];t=r}};o.prototype.append=function(e){this._bufs.push(n.isBuffer(e)?e:new n(e));this.length+=e.length;return this};o.prototype._write=function(e,t,n){this.append(e);if(n)n()};o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length);this.push(this.slice(0,e));this.consume(e)};o.prototype.end=function(e){r.prototype.end.call(this,e);if(this._callback){this._callback(null,this.slice());this._callback=null}};o.prototype.get=function(e){return this.slice(e,e+1)[0]};o.prototype.slice=function(e,t){return this.copy(null,0,e,t)};o.prototype.copy=function(e,t,r,i){if(typeof r!="number"||r<0)r=0;if(typeof i!="number"||i>this.length)i=this.length;if(r>=this.length)return e||new n(0);if(i<=0)return e||new n(0);var o=!!e,a=this._offset(r),s=i-r,u=s,f=o&&t||0,l=a[1],c,h;if(r===0&&i==this.length){if(!o)return n.concat(this._bufs);for(h=0;h<this._bufs.length;h++){this._bufs[h].copy(e,f);f+=this._bufs[h].length}return e}if(u<=this._bufs[a[0]].length-l){return o?this._bufs[a[0]].copy(e,t,l,l+u):this._bufs[a[0]].slice(l,l+u)}if(!o)e=new n(s);for(h=a[0];h<this._bufs.length;h++){c=this._bufs[h].length-l;if(u>c){this._bufs[h].copy(e,f,l)}else{this._bufs[h].copy(e,f,l,l+u);break}f+=c;u-=c;if(l)l=0}return e};o.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)};o.prototype.consume=function(e){while(this._bufs.length){if(e>this._bufs[0].length){e-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(e);this.length-=e;break}}return this};o.prototype.duplicate=function(){var e=0,t=new o;for(;e<this._bufs.length;e++)t.append(this._bufs[e]);return t};o.prototype.destroy=function(){this._bufs.length=0;this.length=0;this.push(null)};(function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e){(function(t){o.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}})(t)}})();t.exports=o}).call(this,e("buffer").Buffer)},{buffer:80,"readable-stream":41,util:110}],25:[function(e,t,n){(function(n,r){var i=e("util"),o=e("abstract-leveldown").AbstractLevelDOWN;function a(e){o.call(this,typeof e=="string"?e:"");this._db=undefined;this._operations=[]}i.inherits(a,o);a.prototype.setDb=function(e){this._db=e;this._operations.forEach(function(t){e[t.method].apply(e,t.args)})};a.prototype._open=function(e,t){return n.nextTick(t)};a.prototype._operation=function(e,t){if(this._db)return this._db[e].apply(this._db,t);this._operations.push({method:e,args:t})};"put get del batch approximateSize".split(" ").forEach(function(e){a.prototype["_"+e]=function(){this._operation(e,arguments)}});a.prototype._isBuffer=function(e){return r.isBuffer(e)};a.prototype._iterator=function(){throw new TypeError("not implemented")};t.exports=a}).call(this,e("GS1EMO"),e("buffer").Buffer)},{GS1EMO:89,"abstract-leveldown":28,buffer:80,util:110}],26:[function(e,t,n){(function(e){function n(e){this._db=e;this._operations=[];this._written=false}n.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};n.prototype.put=function(e,t){this._checkWritten();var n=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(n)throw n;n=this._db._checkKeyValue(t,"value",this._db._isBuffer);if(n)throw n;if(!this._db._isBuffer(e))e=String(e);if(!this._db._isBuffer(t))t=String(t);if(typeof this._put=="function")this._put(e,t);else this._operations.push({type:"put",key:e,value:t});return this};n.prototype.del=function(e){this._checkWritten();var t=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(t)throw t;if(!this._db._isBuffer(e))e=String(e);if(typeof this._del=="function")this._del(e);else this._operations.push({type:"del",key:e});return this};n.prototype.clear=function(){this._checkWritten();this._operations=[];if(typeof this._clear=="function")this._clear();return this};n.prototype.write=function(t,n){this._checkWritten();if(typeof t=="function")n=t;if(typeof n!="function")throw new Error("write() requires a callback argument");if(typeof t!="object")t={};this._written=true;if(typeof this._write=="function")return this._write(n);if(typeof this._db._batch=="function")return this._db._batch(this._operations,t,n);e.nextTick(n)};t.exports=n}).call(this,e("GS1EMO"))},{GS1EMO:89}],27:[function(e,t,n){(function(e){function n(e){this.db=e;this._ended=false;this._nexting=false}n.prototype.next=function(t){var n=this;if(typeof t!="function")throw new Error("next() requires a callback argument");if(n._ended)return t(new Error("cannot call next() after end()"));if(n._nexting)return t(new Error("cannot call next() before previous next() has completed"));n._nexting=true;if(typeof n._next=="function"){return n._next(function(){n._nexting=false;t.apply(null,arguments)})}e.nextTick(function(){n._nexting=false;t()})};n.prototype.end=function(t){if(typeof t!="function")throw new Error("end() requires a callback argument");if(this._ended)return t(new Error("end() already called on iterator"));this._ended=true;if(typeof this._end=="function")return this._end(t);e.nextTick(t)};t.exports=n}).call(this,e("GS1EMO"))},{GS1EMO:89}],28:[function(e,t,n){(function(n,r){var i=e("xtend"),o=e("./abstract-iterator"),a=e("./abstract-chained-batch");function s(e){if(!arguments.length||e===undefined)throw new Error("constructor requires at least a location argument");if(typeof e!="string")throw new Error("constructor requires a location string argument");this.location=e}s.prototype.open=function(e,t){if(typeof e=="function")t=e;if(typeof t!="function")throw new Error("open() requires a callback argument");if(typeof e!="object")e={};if(typeof this._open=="function")return this._open(e,t);n.nextTick(t)};s.prototype.close=function(e){if(typeof e!="function")throw new Error("close() requires a callback argument");if(typeof this._close=="function")return this._close(e);n.nextTick(e)};s.prototype.get=function(e,t,r){var i;if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("get() requires a callback argument");if(i=this._checkKeyValue(e,"key",this._isBuffer))return r(i);if(!this._isBuffer(e))e=String(e);if(typeof t!="object")t={};if(typeof this._get=="function")return this._get(e,t,r);n.nextTick(function(){r(new Error("NotFound"))})};s.prototype.put=function(e,t,r,i){var o;if(typeof r=="function")i=r;if(typeof i!="function")throw new Error("put() requires a callback argument");if(o=this._checkKeyValue(e,"key",this._isBuffer))return i(o);if(o=this._checkKeyValue(t,"value",this._isBuffer))return i(o);if(!this._isBuffer(e))e=String(e);if(!this._isBuffer(t)&&!n.browser)t=String(t);if(typeof r!="object")r={};if(typeof this._put=="function")return this._put(e,t,r,i);n.nextTick(i)};s.prototype.del=function(e,t,r){var i;if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("del() requires a callback argument");if(i=this._checkKeyValue(e,"key",this._isBuffer))return r(i);if(!this._isBuffer(e))e=String(e);if(typeof t!="object")t={};if(typeof this._del=="function")return this._del(e,t,r);n.nextTick(r)};s.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));if(typeof t!="object")t={};var i=0,o=e.length,a,s;for(;i<o;i++){a=e[i];if(typeof a!="object")continue;if(s=this._checkKeyValue(a.type,"type",this._isBuffer))return r(s);if(s=this._checkKeyValue(a.key,"key",this._isBuffer))return r(s);if(a.type=="put"){if(s=this._checkKeyValue(a.value,"value",this._isBuffer))return r(s)}}if(typeof this._batch=="function")return this._batch(e,t,r);n.nextTick(r)};s.prototype.approximateSize=function(e,t,r){if(e==null||t==null||typeof e=="function"||typeof t=="function"){throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments")}if(typeof r!="function")throw new Error("approximateSize() requires a callback argument");if(!this._isBuffer(e))e=String(e);if(!this._isBuffer(t))t=String(t);if(typeof this._approximateSize=="function")return this._approximateSize(e,t,r);n.nextTick(function(){r(null,0)})};s.prototype._setupIteratorOptions=function(e){var t=this;e=i(e);["start","end","gt","gte","lt","lte"].forEach(function(n){if(e[n]&&t._isBuffer(e[n])&&e[n].length===0)delete e[n]});e.reverse=!!e.reverse;if(e.reverse&&e.lt)e.start=e.lt;if(e.reverse&&e.lte)e.start=e.lte;if(!e.reverse&&e.gt)e.start=e.gt;if(!e.reverse&&e.gte)e.start=e.gte;if(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)e.exclusiveStart=true;return e};s.prototype.iterator=function(e){if(typeof e!="object")e={};e=this._setupIteratorOptions(e);if(typeof this._iterator=="function")return this._iterator(e);return new o(this)};s.prototype._chainedBatch=function(){return new a(this)};s.prototype._isBuffer=function(e){return r.isBuffer(e)};s.prototype._checkKeyValue=function(e,t){if(e===null||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(e.length===0)return new Error(t+" cannot be an empty Buffer")}else if(String(e)==="")return new Error(t+" cannot be an empty String")};t.exports.AbstractLevelDOWN=s;t.exports.AbstractIterator=o;t.exports.AbstractChainedBatch=a}).call(this,e("GS1EMO"),e("buffer").Buffer)},{"./abstract-chained-batch":26,"./abstract-iterator":27,GS1EMO:89,buffer:80,xtend:42}],29:[function(e,t,n){var r=e("prr");function i(e,t,n){r(this,{type:e,name:e,cause:typeof t!="string"?t:n,message:!!t&&typeof t!="string"?t.message:t},"ewr")}function o(e,t){Error.call(this);if(Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee);i.call(this,"CustomError",e,t)}o.prototype=new Error;function a(e,t,n){var r=function(n,r){i.call(this,t,n,r);if(t=="FilesystemError"){this.code=this.cause.code;this.path=this.cause.path;this.errno=this.cause.errno;this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")}Error.call(this);if(Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee)};r.prototype=!!n?new n:new o;return r}t.exports=function(e){var t=function(t,n){return a(e,t,n)};return{CustomError:o,FilesystemError:t("FilesystemError"),createError:t}}},{prr:31}],30:[function(e,t,n){var r=t.exports.all=[{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={"-1":r[0],0:r[1],1:r[2],2:r[3],3:r[4],4:r[5],5:r[6],6:r[7],7:r[8],8:r[9],9:r[10],10:r[11],11:r[12],12:r[13],13:r[14],14:r[15],15:r[16],16:r[17],17:r[18],18:r[19],19:r[20],20:r[21],21:r[22],22:r[23],23:r[24],24:r[25],25:r[26],26:r[27],27:r[28],28:r[29],29:r[30],31:r[31],32:r[32],33:r[33],34:r[34],35:r[35],36:r[36],37:r[37],38:r[38],39:r[39],40:r[40],41:r[41],42:r[42],44:r[43],45:r[44],46:r[45],47:r[46],48:r[47],49:r[48],50:r[49],51:r[50],52:r[51],53:r[52],54:r[53],55:r[54],56:r[55],57:r[56],58:r[57],59:r[58]};t.exports.code={UNKNOWN:r[0],OK:r[1],EOF:r[2],EADDRINFO:r[3],EACCES:r[4],EAGAIN:r[5],EADDRINUSE:r[6],EADDRNOTAVAIL:r[7],EAFNOSUPPORT:r[8],EALREADY:r[9],EBADF:r[10],EBUSY:r[11],ECONNABORTED:r[12],ECONNREFUSED:r[13],ECONNRESET:r[14],EDESTADDRREQ:r[15],EFAULT:r[16],EHOSTUNREACH:r[17],EINTR:r[18],EINVAL:r[19],EISCONN:r[20],EMFILE:r[21],EMSGSIZE:r[22],ENETDOWN:r[23],ENETUNREACH:r[24],ENFILE:r[25],ENOBUFS:r[26],ENOMEM:r[27],ENOTDIR:r[28],EISDIR:r[29],ENONET:r[30],ENOTCONN:r[31],ENOTSOCK:r[32],ENOTSUP:r[33],ENOENT:r[34],ENOSYS:r[35],EPIPE:r[36],EPROTO:r[37],EPROTONOSUPPORT:r[38],EPROTOTYPE:r[39],ETIMEDOUT:r[40],ECHARSET:r[41],EAIFAMNOSUPPORT:r[42],EAISERVICE:r[43],EAISOCKTYPE:r[44],ESHUTDOWN:r[45],EEXIST:r[46],ESRCH:r[47],ENAMETOOLONG:r[48],EPERM:r[49],ELOOP:r[50],EXDEV:r[51],ENOTEMPTY:r[52],ENOSPC:r[53],EIO:r[54],EROFS:r[55],ENODEV:r[56],ESPIPE:r[57],ECANCELED:r[58]};t.exports.custom=e("./custom")(t.exports);t.exports.create=t.exports.custom.createError},{"./custom":29}],31:[function(e,t,n){(function(e,n,r){if(typeof t!="undefined"&&t.exports)t.exports=r();else n[e]=r()})("prr",this,function(){var e=typeof Object.defineProperty=="function"?function(e,t,n){Object.defineProperty(e,t,n);return e}:function(e,t,n){e[t]=n.value;return e},t=function(e,t){var n=typeof t=="object",r=!n&&typeof t=="string",i=function(e){return n?!!t[e]:r?t.indexOf(e[0])>-1:false};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}},n=function(n,r,i,o){var a;o=t(i,o);if(typeof r=="object"){for(a in r){if(Object.hasOwnProperty.call(r,a)){o.value=r[a];e(n,a,o)}}return n}return e(n,r,o)};return n})},{}],32:[function(e,t,n){(function(n){t.exports=s;var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};var i=e("core-util-is");i.inherits=e("inherits");var o=e("./_stream_readable");var a=e("./_stream_writable");i.inherits(s,o);f(r(a.prototype),function(e){if(!s.prototype[e])s.prototype[e]=a.prototype[e]});function s(e){if(!(this instanceof s))return new s(e);o.call(this,e);a.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",u)}function u(){if(this.allowHalfOpen||this._writableState.ended)return;n.nextTick(this.end.bind(this))}function f(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}}}).call(this,e("GS1EMO"))},{"./_stream_readable":34,"./_stream_writable":36,GS1EMO:89,"core-util-is":37,inherits:38}],33:[function(e,t,n){t.exports=o;var r=e("./_stream_transform");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(o,r);function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":35,"core-util-is":37,inherits:38}],34:[function(e,t,n){(function(n){t.exports=l;var r=e("isarray");var i=e("buffer").Buffer;l.ReadableState=f;var o=e("events").EventEmitter;if(!o.listenerCount)o.listenerCount=function(e,t){return e.listeners(t).length};var a=e("stream");var s=e("core-util-is");s.inherits=e("inherits");var u;s.inherits(l,a);function f(t,n){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||r===0?r:16*1024;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=false;this.ended=false;this.endEmitted=false;this.reading=false;this.calledRead=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!t.objectMode;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!u)u=e("string_decoder/").StringDecoder;this.decoder=new u(t.encoding);this.encoding=t.encoding}}function l(e){if(!(this instanceof l))return new l(e);this._readableState=new f(e,this);this.readable=true;a.call(this)}l.prototype.push=function(e,t){var n=this._readableState;if(typeof e==="string"&&!n.objectMode){t=t||n.defaultEncoding;if(t!==n.encoding){e=new i(e,t);t=""}}return c(this,n,e,t,false)};l.prototype.unshift=function(e){var t=this._readableState;return c(this,t,e,"",true)};function c(e,t,n,r,i){var o=g(t,n);if(o){e.emit("error",o)}else if(n===null||n===undefined){t.reading=false;if(!t.ended)m(e,t)}else if(t.objectMode||n&&n.length>0){if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{if(t.decoder&&!i&&!r)n=t.decoder.write(n);t.length+=t.objectMode?1:n.length;if(i){t.buffer.unshift(n)}else{t.reading=false;t.buffer.push(n)}if(t.needReadable)y(e);w(e,t)}}else if(!i){t.reading=false}return h(t)}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}l.prototype.setEncoding=function(t){if(!u)u=e("string_decoder/").StringDecoder;this._readableState.decoder=new u(t);this._readableState.encoding=t};var d=8388608;function p(e){if(e>=d){e=d}else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function v(e,t){if(t.length===0&&t.ended)return 0;if(t.objectMode)return e===0?0:1;if(e===null||isNaN(e)){if(t.flowing&&t.buffer.length)return t.buffer[0].length;else return t.length}if(e<=0)return 0;if(e>t.highWaterMark)t.highWaterMark=p(e);if(e>t.length){if(!t.ended){t.needReadable=true;return 0}else return t.length}return e}l.prototype.read=function(e){var t=this._readableState;t.calledRead=true;var n=e;var r;if(typeof e!=="number"||e>0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){y(this);return null}e=v(e,t);if(e===0&&t.ended){r=null;if(t.length>0&&t.decoder){r=O(e,t);t.length-=r.length}if(t.length===0)T(this);return r}var i=t.needReadable;if(t.length-e<=t.highWaterMark)i=true;if(t.ended||t.reading)i=false;if(i){t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false}if(i&&!t.reading)e=v(n,t);if(e>0)r=O(e,t);else r=null;if(r===null){t.needReadable=true;e=0}t.length-=e;if(t.length===0&&!t.ended)t.needReadable=true;if(t.ended&&!t.endEmitted&&t.length===0)T(this);return r};function g(e,t){var n=null;if(!i.isBuffer(t)&&"string"!==typeof t&&t!==null&&t!==undefined&&!e.objectMode){n=new TypeError("Invalid non-string/buffer chunk")}return n}function m(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();if(n&&n.length){t.buffer.push(n);t.length+=t.objectMode?1:n.length}}t.ended=true;if(t.length>0)y(e);else T(e)}function y(e){var t=e._readableState;t.needReadable=false;if(t.emittedReadable)return;t.emittedReadable=true;if(t.sync)n.nextTick(function(){b(e)});else b(e)}function b(e){e.emit("readable")}function w(e,t){if(!t.readingMore){t.readingMore=true;n.nextTick(function(){E(e,t)})}}function E(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){e.read(0);if(n===t.length)break;else n=t.length}t.readingMore=false}l.prototype._read=function(e){this.emit("error",new Error("not implemented"))};l.prototype.pipe=function(e,t){var i=this;var a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);break}a.pipesCount+=1;var s=(!t||t.end!==false)&&e!==n.stdout&&e!==n.stderr;var u=s?l:h;if(a.endEmitted)n.nextTick(u);else i.once("end",u);e.on("unpipe",f);function f(e){if(e!==i)return;h()}function l(){e.end()}var c=_(i);e.on("drain",c);function h(){e.removeListener("close",p);e.removeListener("finish",v);e.removeListener("drain",c);e.removeListener("error",d);e.removeListener("unpipe",f);i.removeListener("end",l);i.removeListener("end",h);if(!e._writableState||e._writableState.needDrain)c()}function d(t){g();e.removeListener("error",d);if(o.listenerCount(e,"error")===0)e.emit("error",t)}if(!e._events||!e._events.error)e.on("error",d);else if(r(e._events.error))e._events.error.unshift(d);else e._events.error=[d,e._events.error];function p(){e.removeListener("finish",v);g()}e.once("close",p);function v(){e.removeListener("close",p);g()}e.once("finish",v);function g(){i.unpipe(e)}e.emit("pipe",i);if(!a.flowing){this.on("readable",k);a.flowing=true;n.nextTick(function(){x(i)})}return e};function _(e){return function(){var t=this;var n=e._readableState;n.awaitDrain--;if(n.awaitDrain===0)x(e)}}function x(e){var t=e._readableState;var n;t.awaitDrain=0;function r(e,r,i){var o=e.write(n);if(false===o){t.awaitDrain++}}while(t.pipesCount&&null!==(n=e.read())){if(t.pipesCount===1)r(t.pipes,0,null);else A(t.pipes,r);e.emit("data",n);if(t.awaitDrain>0)return}if(t.pipesCount===0){t.flowing=false;if(o.listenerCount(e,"data")>0)S(e);return}t.ranOut=true}function k(){if(this._readableState.ranOut){this._readableState.ranOut=false;x(this)}}l.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;this.removeListener("readable",k);t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var n=t.pipes;var r=t.pipesCount;t.pipes=null;t.pipesCount=0;this.removeListener("readable",k);t.flowing=false;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=N(t.pipes,e);if(i===-1)return this;t.pipes.splice(i,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};l.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if(e==="data"&&!this._readableState.flowing)S(this);if(e==="readable"&&this.readable){var r=this._readableState;if(!r.readableListening){r.readableListening=true;r.emittedReadable=false;r.needReadable=true;if(!r.reading){this.read(0)}else if(r.length){y(this,r)}}}return n};l.prototype.addListener=l.prototype.on;l.prototype.resume=function(){S(this);this.read(0);this.emit("resume")};l.prototype.pause=function(){S(this,true);this.emit("pause")};function S(e,t){var r=e._readableState;if(r.flowing){throw new Error("Cannot switch to old mode now.")}var i=t||false;var o=false;e.readable=true;e.pipe=a.prototype.pipe;e.on=e.addListener=a.prototype.on;e.on("readable",function(){o=true;var t;while(!i&&null!==(t=e.read()))e.emit("data",t);if(t===null){o=false;e._readableState.needReadable=true}});e.pause=function(){i=true;this.emit("pause")};e.resume=function(){i=false;if(o)n.nextTick(function(){e.emit("readable")});else this.read(0);this.emit("resume")};e.emit("readable")}l.prototype.wrap=function(e){var t=this._readableState;var n=false;var r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)r.push(e)}r.push(null)});e.on("data",function(i){if(t.decoder)i=t.decoder.write(i);if(t.objectMode&&(i===null||i===undefined))return;else if(!t.objectMode&&(!i||!i.length))return;var o=r.push(i);if(!o){n=true;e.pause()}});for(var i in e){if(typeof e[i]==="function"&&typeof this[i]==="undefined"){this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i)}}var o=["error","close","destroy","pause","resume"];A(o,function(t){e.on(t,r.emit.bind(r,t))});r._read=function(t){if(n){n=false;e.resume()}};return r};l._fromList=O;function O(e,t){var n=t.buffer;var r=t.length;var o=!!t.decoder;var a=!!t.objectMode;var s;if(n.length===0)return null;if(r===0)s=null;else if(a)s=n.shift();else if(!e||e>=r){if(o)s=n.join("");else s=i.concat(n,r);n.length=0}else{if(e<n[0].length){var u=n[0];s=u.slice(0,e);n[0]=u.slice(e)}else if(e===n[0].length){s=n.shift()}else{if(o)s="";else s=new i(e);var f=0;for(var l=0,c=n.length;l<c&&f<e;l++){var u=n[0];var h=Math.min(e-f,u.length);if(o)s+=u.slice(0,h);else u.copy(s,f,0,h);if(h<u.length)n[0]=u.slice(h);else n.shift();f+=h}}}return s}function T(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");if(!t.endEmitted&&t.calledRead){t.ended=true;n.nextTick(function(){if(!t.endEmitted&&t.length===0){t.endEmitted=true;e.readable=false;e.emit("end")}})}}function A(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}}function N(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n}return-1}}).call(this,e("GS1EMO"))},{GS1EMO:89,buffer:80,"core-util-is":37,events:83,inherits:38,isarray:39,stream:107,"string_decoder/":40}],35:[function(e,t,n){t.exports=s;var r=e("./_stream_duplex");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(s,r);function o(e,t){this.afterTransform=function(e,n){return a(t,e,n)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function a(e,t,n){var r=e._transformState;r.transforming=false;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null;r.writecb=null;if(n!==null&&n!==undefined)e.push(n);if(i)i(t);var o=e._readableState;o.reading=false;if(o.needReadable||o.length<o.highWaterMark){e._read(o.highWaterMark)}}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e);var t=this._transformState=new o(e,this);var n=this;this._readableState.needReadable=true;this._readableState.sync=false;this.once("finish",function(){if("function"===typeof this._flush)this._flush(function(e){u(n,e)});else u(n)})}s.prototype.push=function(e,t){this._transformState.needTransform=false;return r.prototype.push.call(this,e,t)};s.prototype._transform=function(e,t,n){throw new Error("not implemented")};s.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n;r.writechunk=e;r.writeencoding=t;if(!r.transforming){var i=this._readableState;if(r.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};s.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function u(e,t){if(t)return e.emit("error",t);var n=e._writableState;var r=e._readableState;var i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}},{"./_stream_duplex":32,"core-util-is":37,inherits:38}],36:[function(e,t,n){(function(n){t.exports=u;var r=e("buffer").Buffer;u.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");i.inherits(u,o);function a(e,t,n){this.chunk=e;this.encoding=t;this.callback=n}function s(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||n===0?n:16*1024;this.objectMode=!!e.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var r=e.decodeStrings===false;this.decodeStrings=!r;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){g(t,e)};this.writecb=null;this.writelen=0;this.buffer=[];this.errorEmitted=false}function u(t){var n=e("./_stream_duplex");if(!(this instanceof u)&&!(this instanceof n))return new u(t);this._writableState=new s(t,this);this.writable=true;o.call(this)}u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(e,t,r){var i=new Error("write after end");e.emit("error",i);n.nextTick(function(){r(i)})}function l(e,t,i,o){var a=true;if(!r.isBuffer(i)&&"string"!==typeof i&&i!==null&&i!==undefined&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s);n.nextTick(function(){o(s)});a=false}return a}u.prototype.write=function(e,t,n){var i=this._writableState;var o=false;if(typeof t==="function"){n=t;t=null}if(r.isBuffer(e))t="buffer";else if(!t)t=i.defaultEncoding;if(typeof n!=="function")n=function(){};if(i.ended)f(this,i,n);else if(l(this,i,e,n))o=h(this,i,e,t,n);
return o};function c(e,t,n){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=new r(t,n)}return t}function h(e,t,n,i,o){n=c(t,n,i);if(r.isBuffer(n))i="buffer";var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(!u)t.needDrain=true;if(t.writing)t.buffer.push(new a(n,i,o));else d(e,t,s,n,i,o);return u}function d(e,t,n,r,i,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;e._write(r,i,t.onwrite);t.sync=false}function p(e,t,r,i,o){if(r)n.nextTick(function(){o(i)});else o(i);e._writableState.errorEmitted=true;e.emit("error",i)}function v(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function g(e,t){var r=e._writableState;var i=r.sync;var o=r.writecb;v(r);if(t)p(e,r,i,t,o);else{var a=w(e,r);if(!a&&!r.bufferProcessing&&r.buffer.length)b(e,r);if(i){n.nextTick(function(){m(e,r,a,o)})}else{m(e,r,a,o)}}}function m(e,t,n,r){if(!n)y(e,t);r();if(n)E(e,t)}function y(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function b(e,t){t.bufferProcessing=true;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n];var i=r.chunk;var o=r.encoding;var a=r.callback;var s=t.objectMode?1:i.length;d(e,t,s,i,o,a);if(t.writing){n++;break}}t.bufferProcessing=false;if(n<t.buffer.length)t.buffer=t.buffer.slice(n);else t.buffer.length=0}u.prototype._write=function(e,t,n){n(new Error("not implemented"))};u.prototype.end=function(e,t,n){var r=this._writableState;if(typeof e==="function"){n=e;e=null;t=null}else if(typeof t==="function"){n=t;t=null}if(typeof e!=="undefined"&&e!==null)this.write(e,t);if(!r.ending&&!r.finished)_(this,r,n)};function w(e,t){return t.ending&&t.length===0&&!t.finished&&!t.writing}function E(e,t){var n=w(e,t);if(n){t.finished=true;e.emit("finish")}return n}function _(e,t,r){t.ending=true;E(e,t);if(r){if(t.finished)n.nextTick(r);else e.once("finish",r)}t.ended=true}}).call(this,e("GS1EMO"))},{"./_stream_duplex":32,GS1EMO:89,buffer:80,"core-util-is":37,inherits:38,stream:107}],37:[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}n.isArray=t;function r(e){return typeof e==="boolean"}n.isBoolean=r;function i(e){return e===null}n.isNull=i;function o(e){return e==null}n.isNullOrUndefined=o;function a(e){return typeof e==="number"}n.isNumber=a;function s(e){return typeof e==="string"}n.isString=s;function u(e){return typeof e==="symbol"}n.isSymbol=u;function f(e){return e===void 0}n.isUndefined=f;function l(e){return c(e)&&m(e)==="[object RegExp]"}n.isRegExp=l;function c(e){return typeof e==="object"&&e!==null}n.isObject=c;function h(e){return c(e)&&m(e)==="[object Date]"}n.isDate=h;function d(e){return c(e)&&(m(e)==="[object Error]"||e instanceof Error)}n.isError=d;function p(e){return typeof e==="function"}n.isFunction=p;function v(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}n.isPrimitive=v;function g(t){return e.isBuffer(t)}n.isBuffer=g;function m(e){return Object.prototype.toString.call(e)}}).call(this,e("buffer").Buffer)},{buffer:80}],38:[function(e,t,n){if(typeof Object.create==="function"){t.exports=function r(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e}}},{}],39:[function(e,t,n){t.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},{}],40:[function(e,t,n){var r=e("buffer").Buffer;var i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function o(e){if(e&&!i(e)){throw new Error("Unknown encoding: "+e)}}var a=n.StringDecoder=function(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");o(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=u;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=f;break;default:this.write=s;return}this.charBuffer=new r(6);this.charReceived=0;this.charLength=0};a.prototype.write=function(e){var t="";while(this.charLength){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,n);this.charReceived+=n;if(this.charReceived<this.charLength){return""}e=e.slice(n,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var i=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,i);i-=this.charReceived}t+=e.toString(this.encoding,0,i);var i=t.length-1;var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;this.charLength+=o;this.charReceived+=o;this.charBuffer.copy(this.charBuffer,o,0,o);e.copy(this.charBuffer,0,0,o);return t.substring(0,i)}return t};a.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t};a.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var n=this.charReceived;var r=this.charBuffer;var i=this.encoding;t+=r.slice(0,n).toString(i)}return t};function s(e){return e.toString(this.encoding)}function u(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function f(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}},{buffer:80}],41:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js");n.Readable=n;n.Writable=e("./lib/_stream_writable.js");n.Duplex=e("./lib/_stream_duplex.js");n.Transform=e("./lib/_stream_transform.js");n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":32,"./lib/_stream_passthrough.js":33,"./lib/_stream_readable.js":34,"./lib/_stream_transform.js":35,"./lib/_stream_writable.js":36}],42:[function(e,t,n){t.exports=r;function r(){var e={};for(var t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(n.hasOwnProperty(r)){e[r]=n[r]}}}return e}},{}],43:[function(e,t,n){t.exports={name:"levelup",description:"Fast & simple storage - a Node.js-style LevelDB wrapper",version:"0.18.6",contributors:[{name:"Rod Vagg",email:"r@va.gg",url:"https://github.com/rvagg"},{name:"John Chesley",email:"john@chesl.es",url:"https://github.com/chesles/"},{name:"Jake Verbaten",email:"raynos2@gmail.com",url:"https://github.com/raynos"},{name:"Dominic Tarr",email:"dominic.tarr@gmail.com",url:"https://github.com/dominictarr"},{name:"Max Ogden",email:"max@maxogden.com",url:"https://github.com/maxogden"},{name:"Lars-Magnus Skog",email:"lars.magnus.skog@gmail.com",url:"https://github.com/ralphtheninja"},{name:"David Björklund",email:"david.bjorklund@gmail.com",url:"https://github.com/kesla"},{name:"Julian Gruber",email:"julian@juliangruber.com",url:"https://github.com/juliangruber"},{name:"Paolo Fragomeni",email:"paolo@async.ly",url:"https://github.com/hij1nx"},{name:"Anton Whalley",email:"anton.whalley@nearform.com",url:"https://github.com/No9"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"},{name:"Pedro Teixeira",email:"pedro.teixeira@gmail.com",url:"https://github.com/pgte"},{name:"James Halliday",email:"mail@substack.net",url:"https://github.com/substack"}],repository:{type:"git",url:"https://github.com/rvagg/node-levelup.git"},homepage:"https://github.com/rvagg/node-levelup",keywords:["leveldb","stream","database","db","store","storage","json"],main:"lib/levelup.js",dependencies:{bl:"~0.8.1","deferred-leveldown":"~0.2.0",errno:"~0.1.1",prr:"~0.0.0","readable-stream":"~1.0.26",semver:"~2.3.1",xtend:"~3.0.0"},devDependencies:{leveldown:"~0.10.0",bustermove:"*",tap:"*",referee:"*",rimraf:"*",async:"*",fstream:"*",tar:"*",mkfiletree:"*",readfiletree:"*","slow-stream":">=0.0.4",delayed:"*",boganipsum:"*",du:"*",memdown:"*","msgpack-js":"*"},browser:{leveldown:false,"leveldown/package":false,semver:false},scripts:{test:"tap test/*-test.js --stderr",functionaltests:"node ./test/functional/fstream-test.js && node ./test/functional/binary-data-test.js && node ./test/functional/compat-test.js",alltests:"npm test && npm run-script functionaltests"},license:"MIT",gitHead:"213e989e2b75273e2b44c23f84f95e35bff7ea11",bugs:{url:"https://github.com/rvagg/node-levelup/issues"},_id:"levelup@0.18.6",_shasum:"e6a01cb089616c8ecc0291c2a9bd3f0c44e3e5eb",_from:"levelup@>=0.18.2 <0.19.0",_npmVersion:"1.4.14",_npmUser:{name:"rvagg",email:"rod@vagg.org"},maintainers:[{name:"rvagg",email:"rod@vagg.org"}],dist:{shasum:"e6a01cb089616c8ecc0291c2a9bd3f0c44e3e5eb",tarball:"http://registry.npmjs.org/levelup/-/levelup-0.18.6.tgz"},directories:{},_resolved:"https://registry.npmjs.org/levelup/-/levelup-0.18.6.tgz",readme:"LevelUP\n=======\n\n![LevelDB Logo](https://0.gravatar.com/avatar/a498b122aecb7678490a38bb593cc12d)\n\n**Fast & simple storage - a Node.js-style LevelDB wrapper**\n\n[![Build Status](https://secure.travis-ci.org/rvagg/node-levelup.png)](http://travis-ci.org/rvagg/node-levelup)\n\n[![NPM](https://nodei.co/npm/levelup.png?stars&downloads)](https://nodei.co/npm/levelup/) [![NPM](https://nodei.co/npm-dl/levelup.png)](https://nodei.co/npm/levelup/)\n\n\n  * <a href=\"#intro\">Introduction</a>\n  * <a href=\"#leveldown\">Relationship to LevelDOWN</a>\n  * <a href=\"#platforms\">Tested &amp; supported platforms</a>\n  * <a href=\"#basic\">Basic usage</a>\n  * <a href=\"#api\">API</a>\n  * <a href=\"#events\">Events</a>\n  * <a href=\"#json\">JSON data</a>\n  * <a href=\"#custom_encodings\">Custom encodings</a>\n  * <a href=\"#extending\">Extending LevelUP</a>\n  * <a href=\"#multiproc\">Multi-process access</a>\n  * <a href=\"#support\">Getting support</a>\n  * <a href=\"#contributing\">Contributing</a>\n  * <a href=\"#licence\">Licence &amp; copyright</a>\n\n<a name=\"intro\"></a>\nIntroduction\n------------\n\n**[LevelDB](http://code.google.com/p/leveldb/)** is a simple key/value data store built by Google, inspired by BigTable. It's used in Google Chrome and many other products. LevelDB supports arbitrary byte arrays as both keys and values, singular *get*, *put* and *delete* operations, *batched put and delete*, bi-directional iterators and simple compression using the very fast [Snappy](http://code.google.com/p/snappy/) algorithm.\n\n**LevelUP** aims to expose the features of LevelDB in a **Node.js-friendly way**. All standard `Buffer` encoding types are supported, as is a special JSON encoding. LevelDB's iterators are exposed as a Node.js-style **readable stream** a matching **writeable stream** converts writes to *batch* operations.\n\nLevelDB stores entries **sorted lexicographically by keys**. This makes LevelUP's <a href=\"#createReadStream\"><code>ReadStream</code></a> interface a very powerful query mechanism.\n\n**LevelUP** is an **OPEN Open Source Project**, see the <a href=\"#contributing\">Contributing</a> section to find out what this means.\n\n<a name=\"leveldown\"></a>\nRelationship to LevelDOWN\n-------------------------\n\nLevelUP is designed to be backed by **[LevelDOWN](https://github.com/rvagg/node-leveldown/)** which provides a pure C++ binding to LevelDB and can be used as a stand-alone package if required.\n\n**As of version 0.9, LevelUP no longer requires LevelDOWN as a dependency so you must `npm install leveldown` when you install LevelUP.**\n\nLevelDOWN is now optional because LevelUP can be used with alternative backends, such as **[level.js](https://github.com/maxogden/level.js)** in the browser or [MemDOWN](https://github.com/rvagg/node-memdown) for a pure in-memory store.\n\nLevelUP will look for LevelDOWN and throw an error if it can't find it in its Node `require()` path. It will also tell you if the installed version of LevelDOWN is incompatible.\n\n**The [level](https://github.com/level/level) package is available as an alternative installation mechanism.** Install it instead to automatically get both LevelUP & LevelDOWN. It exposes LevelUP on its export (i.e. you can `var leveldb = require('level')`).\n\n\n<a name=\"platforms\"></a>\nTested & supported platforms\n----------------------------\n\n  * **Linux**: including ARM platforms such as Raspberry Pi *and Kindle!*\n  * **Mac OS**\n  * **Solaris**: including Joyent's SmartOS & Nodejitsu\n  * **Windows**: Node 0.10 and above only. See installation instructions for *node-gyp's* dependencies [here](https://github.com/TooTallNate/node-gyp#installation), you'll need these (free) components from Microsoft to compile and run any native Node add-on in Windows.\n\n<a name=\"basic\"></a>\nBasic usage\n-----------\n\nFirst you need to install LevelUP!\n\n```sh\n$ npm install levelup leveldown\n```\n\nOr\n\n```sh\n$ npm install level\n```\n\n*(this second option requires you to use LevelUP by calling `var levelup = require('level')`)*\n\n\nAll operations are asynchronous although they don't necessarily require a callback if you don't need to know when the operation was performed.\n\n```js\nvar levelup = require('levelup')\n\n// 1) Create our database, supply location and options.\n//    This will create or open the underlying LevelDB store.\nvar db = levelup('./mydb')\n\n// 2) put a key & value\ndb.put('name', 'LevelUP', function (err) {\n  if (err) return console.log('Ooops!', err) // some kind of I/O error\n\n  // 3) fetch by key\n  db.get('name', function (err, value) {\n    if (err) return console.log('Ooops!', err) // likely the key was not found\n\n    // ta da!\n    console.log('name=' + value)\n  })\n})\n```\n\n<a name=\"api\"></a>\n## API\n\n  * <a href=\"#ctor\"><code><b>levelup()</b></code></a>\n  * <a href=\"#open\"><code>db.<b>open()</b></code></a>\n  * <a href=\"#close\"><code>db.<b>close()</b></code></a>\n  * <a href=\"#put\"><code>db.<b>put()</b></code></a>\n  * <a href=\"#get\"><code>db.<b>get()</b></code></a>\n  * <a href=\"#del\"><code>db.<b>del()</b></code></a>\n  * <a href=\"#batch\"><code>db.<b>batch()</b></code> *(array form)*</a>\n  * <a href=\"#batch_chained\"><code>db.<b>batch()</b></code> *(chained form)*</a>\n  * <a href=\"#isOpen\"><code>db.<b>isOpen()</b></code></a>\n  * <a href=\"#isClosed\"><code>db.<b>isClosed()</b></code></a>\n  * <a href=\"#createReadStream\"><code>db.<b>createReadStream()</b></code></a>\n  * <a href=\"#createKeyStream\"><code>db.<b>createKeyStream()</b></code></a>\n  * <a href=\"#createValueStream\"><code>db.<b>createValueStream()</b></code></a>\n  * <a href=\"#createWriteStream\"><code>db.<b>createWriteStream()</b></code></a>\n\n### Special operations exposed by LevelDOWN\n\n  * <a href=\"#approximateSize\"><code>db.db.<b>approximateSize()</b></code></a>\n  * <a href=\"#getProperty\"><code>db.db.<b>getProperty()</b></code></a>\n  * <a href=\"#destroy\"><code><b>leveldown.destroy()</b></code></a>\n  * <a href=\"#repair\"><code><b>leveldown.repair()</b></code></a>\n\n\n--------------------------------------------------------\n<a name=\"ctor\"></a>\n### levelup(location[, options[, callback]])\n### levelup(options[, callback ])\n### levelup(db[, callback ])\n<code>levelup()</code> is the main entry point for creating a new LevelUP instance and opening the underlying store with LevelDB.\n\nThis function returns a new instance of LevelUP and will also initiate an <a href=\"#open\"><code>open()</code></a> operation. Opening the database is an asynchronous operation which will trigger your callback if you provide one. The callback should take the form: `function (err, db) {}` where the `db` is the LevelUP instance. If you don't provide a callback, any read & write operations are simply queued internally until the database is fully opened.\n\nThis leads to two alternative ways of managing a new LevelUP instance:\n\n```js\nlevelup(location, options, function (err, db) {\n  if (err) throw err\n  db.get('foo', function (err, value) {\n    if (err) return console.log('foo does not exist')\n    console.log('got foo =', value)\n  })\n})\n\n// vs the equivalent:\n\nvar db = levelup(location, options) // will throw if an error occurs\ndb.get('foo', function (err, value) {\n  if (err) return console.log('foo does not exist')\n  console.log('got foo =', value)\n})\n```\n\nThe `location` argument is available as a read-only property on the returned LevelUP instance.\n\nThe `levelup(options, callback)` form (with optional `callback`) is only available where you provide a valid `'db'` property on the options object (see below). Only for back-ends that don't require a `location` argument, such as [MemDOWN](https://github.com/rvagg/memdown).\n\nFor example:\n\n```js\nvar levelup = require('levelup')\nvar memdown = require('memdown')\nvar db = levelup({ db: memdown })\n```\n\nThe `levelup(db, callback)` form (with optional `callback`) is only available where `db` is a factory function, as would be provided as a `'db'` property on an `options` object (see below). Only for back-ends that don't require a `location` argument, such as [MemDOWN](https://github.com/rvagg/memdown).\n\nFor example:\n\n```js\nvar levelup = require('levelup')\nvar memdown = require('memdown')\nvar db = levelup(memdown)\n```\n\n#### `options`\n\n`levelup()` takes an optional options object as its second argument; the following properties are accepted:\n\n* `'createIfMissing'` *(boolean, default: `true`)*: If `true`, will initialise an empty database at the specified location if one doesn't already exist. If `false` and a database doesn't exist you will receive an error in your `open()` callback and your database won't open.\n\n* `'errorIfExists'` *(boolean, default: `false`)*: If `true`, you will receive an error in your `open()` callback if the database exists at the specified location.\n\n* `'compression'` *(boolean, default: `true`)*: If `true`, all *compressible* data will be run through the Snappy compression algorithm before being stored. Snappy is very fast and shouldn't gain much speed by disabling so leave this on unless you have good reason to turn it off.\n\n* `'cacheSize'` *(number, default: `8 * 1024 * 1024`)*: The size (in bytes) of the in-memory [LRU](http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used) cache with frequently used uncompressed block contents. \n\n* `'keyEncoding'` and `'valueEncoding'` *(string, default: `'utf8'`)*: The encoding of the keys and values passed through Node.js' `Buffer` implementation (see [Buffer#toString()](http://nodejs.org/docs/latest/api/buffer.html#buffer_buf_tostring_encoding_start_end)).\n  <p><code>'utf8'</code> is the default encoding for both keys and values so you can simply pass in strings and expect strings from your <code>get()</code> operations. You can also pass <code>Buffer</code> objects as keys and/or values and conversion will be performed.</p>\n  <p>Supported encodings are: hex, utf8, ascii, binary, base64, ucs2, utf16le.</p>\n  <p><code>'json'</code> encoding is also supported, see below.</p>\n\n* `'db'` *(object, default: LevelDOWN)*: LevelUP is backed by [LevelDOWN](https://github.com/rvagg/node-leveldown/) to provide an interface to LevelDB. You can completely replace the use of LevelDOWN by providing a \"factory\" function that will return a LevelDOWN API compatible object given a `location` argument. For further information, see [MemDOWN](https://github.com/rvagg/node-memdown/), a fully LevelDOWN API compatible replacement that uses a memory store rather than LevelDB. Also see [Abstract LevelDOWN](http://github.com/rvagg/node-abstract-leveldown), a partial implementation of the LevelDOWN API that can be used as a base prototype for a LevelDOWN substitute.\n\nAdditionally, each of the main interface methods accept an optional options object that can be used to override `'keyEncoding'` and `'valueEncoding'`.\n\n--------------------------------------------------------\n<a name=\"open\"></a>\n### db.open([callback])\n<code>open()</code> opens the underlying LevelDB store. In general **you should never need to call this method directly** as it's automatically called by <a href=\"#ctor\"><code>levelup()</code></a>.\n\nHowever, it is possible to *reopen* a database after it has been closed with <a href=\"#close\"><code>close()</code></a>, although this is not generally advised.\n\n--------------------------------------------------------\n<a name=\"close\"></a>\n### db.close([callback])\n<code>close()</code> closes the underlying LevelDB store. The callback will receive any error encountered during closing as the first argument.\n\nYou should always clean up your LevelUP instance by calling `close()` when you no longer need it to free up resources. A LevelDB store cannot be opened by multiple instances of LevelDB/LevelUP simultaneously.\n\n--------------------------------------------------------\n<a name=\"put\"></a>\n### db.put(key, value[, options][, callback])\n<code>put()</code> is the primary method for inserting data into the store. Both the `key` and `value` can be arbitrary data objects.\n\nThe callback argument is optional but if you don't provide one and an error occurs then expect the error to be thrown.\n\n#### `options`\n\nEncoding of the `key` and `value` objects will adhere to `'keyEncoding'` and `'valueEncoding'` options provided to <a href=\"#ctor\"><code>levelup()</code></a>, although you can provide alternative encoding settings in the options for `put()` (it's recommended that you stay consistent in your encoding of keys and values in a single store).\n\nIf you provide a `'sync'` value of `true` in your `options` object, LevelDB will perform a synchronous write of the data; although the operation will be asynchronous as far as Node is concerned. Normally, LevelDB passes the data to the operating system for writing and returns immediately, however a synchronous write will use `fsync()` or equivalent so your callback won't be triggered until the data is actually on disk. Synchronous filesystem writes are **significantly** slower than asynchronous writes but if you want to be absolutely sure that the data is flushed then you can use `'sync': true`.\n\n--------------------------------------------------------\n<a name=\"get\"></a>\n### db.get(key[, options][, callback])\n<code>get()</code> is the primary method for fetching data from the store. The `key` can be an arbitrary data object. If it doesn't exist in the store then the callback will receive an error as its first argument. A not-found err object will be of type `'NotFoundError'` so you can `err.type == 'NotFoundError'` or you can perform a truthy test on the property `err.notFound`.\n\n```js\ndb.get('foo', function (err, value) {\n  if (err) {\n    if (err.notFound) {\n      // handle a 'NotFoundError' here\n      return\n    }\n    // I/O or other error, pass it up the callback chain\n    return callback(err)\n  }\n\n  // .. handle `value` here\n})\n```\n\n#### `options`\n\nEncoding of the `key` object will adhere to the `'keyEncoding'` option provided to <a href=\"#ctor\"><code>levelup()</code></a>, although you can provide alternative encoding settings in the options for `get()` (it's recommended that you stay consistent in your encoding of keys and values in a single store).\n\nLevelDB will by default fill the in-memory LRU Cache with data from a call to get. Disabling this is done by setting `fillCache` to `false`. \n\n--------------------------------------------------------\n<a name=\"del\"></a>\n### db.del(key[, options][, callback])\n<code>del()</code> is the primary method for removing data from the store.\n\n#### `options`\n\nEncoding of the `key` object will adhere to the `'keyEncoding'` option provided to <a href=\"#ctor\"><code>levelup()</code></a>, although you can provide alternative encoding settings in the options for `del()` (it's recommended that you stay consistent in your encoding of keys and values in a single store).\n\nA `'sync'` option can also be passed, see <a href=\"#put\"><code>put()</code></a> for details on how this works.\n\n--------------------------------------------------------\n<a name=\"batch\"></a>\n### db.batch(array[, options][, callback]) *(array form)*\n<code>batch()</code> can be used for very fast bulk-write operations (both *put* and *delete*). The `array` argument should contain a list of operations to be executed sequentially, although as a whole they are performed as an atomic operation inside LevelDB. Each operation is contained in an object having the following properties: `type`, `key`, `value`, where the *type* is either `'put'` or `'del'`. In the case of `'del'` the `'value'` property is ignored. Any entries with a `'key'` of `null` or `undefined` will cause an error to be returned on the `callback` and any `'type': 'put'` entry with a `'value'` of `null` or `undefined` will return an error.\n\n```js\nvar ops = [\n    { type: 'del', key: 'father' }\n  , { type: 'put', key: 'name', value: 'Yuri Irsenovich Kim' }\n  , { type: 'put', key: 'dob', value: '16 February 1941' }\n  , { type: 'put', key: 'spouse', value: 'Kim Young-sook' }\n  , { type: 'put', key: 'occupation', value: 'Clown' }\n]\n\ndb.batch(ops, function (err) {\n  if (err) return console.log('Ooops!', err)\n  console.log('Great success dear leader!')\n})\n```\n\n#### `options`\n\nSee <a href=\"#put\"><code>put()</code></a> for a discussion on the `options` object. You can overwrite default `'keyEncoding'` and `'valueEncoding'` and also specify the use of `sync` filesystem operations.\n\nIn addition to encoding options for the whole batch you can also overwrite the encoding per operation, like:\n\n```js\nvar ops = [{\n    type          : 'put'\n  , key           : new Buffer([1, 2, 3])\n  , value         : { some: 'json' }\n  , keyEncoding   : 'binary'\n  , valueEncoding : 'json'\n}]\n```\n\n--------------------------------------------------------\n<a name=\"batch_chained\"></a>\n### db.batch() *(chained form)*\n<code>batch()</code>, when called with no arguments will return a `Batch` object which can be used to build, and eventually commit, an atomic LevelDB batch operation. Depending on how it's used, it is possible to obtain greater performance when using the chained form of `batch()` over the array form.\n\n```js\ndb.batch()\n  .del('father')\n  .put('name', 'Yuri Irsenovich Kim')\n  .put('dob', '16 February 1941')\n  .put('spouse', 'Kim Young-sook')\n  .put('occupation', 'Clown')\n  .write(function () { console.log('Done!') })\n```\n\n<b><code>batch.put(key, value[, options])</code></b>\n\nQueue a *put* operation on the current batch, not committed until a `write()` is called on the batch.\n\nThe optional `options` argument can be used to override the default `'keyEncoding'` and/or `'valueEncoding'`.\n\nThis method may `throw` a `WriteError` if there is a problem with your put (such as the `value` being `null` or `undefined`).\n\n<b><code>batch.del(key[, options])</code></b>\n\nQueue a *del* operation on the current batch, not committed until a `write()` is called on the batch.\n\nThe optional `options` argument can be used to override the default `'keyEncoding'`.\n\nThis method may `throw` a `WriteError` if there is a problem with your delete.\n\n<b><code>batch.clear()</code></b>\n\nClear all queued operations on the current batch, any previous operations will be discarded.\n\n<b><code>batch.write([callback])</code></b>\n\nCommit the queued operations for this batch. All operations not *cleared* will be written to the database atomically, that is, they will either all succeed or fail with no partial commits. The optional `callback` will be called when the operation has completed with an *error* argument if an error has occurred; if no `callback` is supplied and an error occurs then this method will `throw` a `WriteError`.\n\n\n--------------------------------------------------------\n<a name=\"isOpen\"></a>\n### db.isOpen()\n\nA LevelUP object can be in one of the following states:\n\n  * *\"new\"*     - newly created, not opened or closed\n  * *\"opening\"* - waiting for the database to be opened\n  * *\"open\"*    - successfully opened the database, available for use\n  * *\"closing\"* - waiting for the database to be closed\n  * *\"closed\"*  - database has been successfully closed, should not be used\n\n`isOpen()` will return `true` only when the state is \"open\".\n\n--------------------------------------------------------\n<a name=\"isClosed\"></a>\n### db.isClosed()\n\n*See <a href=\"#put\"><code>isOpen()</code></a>*\n\n`isClosed()` will return `true` only when the state is \"closing\" *or* \"closed\", it can be useful for determining if read and write operations are permissible.\n\n--------------------------------------------------------\n<a name=\"createReadStream\"></a>\n### db.createReadStream([options])\n\nYou can obtain a **ReadStream** of the full database by calling the `createReadStream()` method. The resulting stream is a complete Node.js-style [Readable Stream](http://nodejs.org/docs/latest/api/stream.html#stream_readable_stream) where `'data'` events emit objects with `'key'` and `'value'` pairs. You can also use the `start`, `end` and `limit` options to control the range of keys that are streamed.\n\n```js\ndb.createReadStream()\n  .on('data', function (data) {\n    console.log(data.key, '=', data.value)\n  })\n  .on('error', function (err) {\n    console.log('Oh my!', err)\n  })\n  .on('close', function () {\n    console.log('Stream closed')\n  })\n  .on('end', function () {\n    console.log('Stream closed')\n  })\n```\n\nThe standard `pause()`, `resume()` and `destroy()` methods are implemented on the ReadStream, as is `pipe()` (see below). `'data'`, '`error'`, `'end'` and `'close'` events are emitted.\n\nAdditionally, you can supply an options object as the first parameter to `createReadStream()` with the following options:\n\n* `'start'`: the key you wish to start the read at. By default it will start at the beginning of the store. Note that the *start* doesn't have to be an actual key that exists, LevelDB will simply find the *next* key, greater than the key you provide.\n\n* `'end'`: the key you wish to end the read on. By default it will continue until the end of the store. Again, the *end* doesn't have to be an actual key as an (inclusive) `<=`-type operation is performed to detect the end. You can also use the `destroy()` method instead of supplying an `'end'` parameter to achieve the same effect.\n\n* `'reverse'` *(boolean, default: `false`)*: a boolean, set to true if you want the stream to go in reverse order. Beware that due to the way LevelDB works, a reverse seek will be slower than a forward seek.\n\n* `'keys'` *(boolean, default: `true`)*: whether the `'data'` event should contain keys. If set to `true` and `'values'` set to `false` then `'data'` events will simply be keys, rather than objects with a `'key'` property. Used internally by the `createKeyStream()` method.\n\n* `'values'` *(boolean, default: `true`)*: whether the `'data'` event should contain values. If set to `true` and `'keys'` set to `false` then `'data'` events will simply be values, rather than objects with a `'value'` property. Used internally by the `createValueStream()` method.\n\n* `'limit'` *(number, default: `-1`)*: limit the number of results collected by this stream. This number represents a *maximum* number of results and may not be reached if you get to the end of the store or your `'end'` value first. A value of `-1` means there is no limit.\n\n* `'fillCache'` *(boolean, default: `false`)*: wheather LevelDB's LRU-cache should be filled with data read.\n\n* `'keyEncoding'` / `'valueEncoding'` *(string)*: the encoding applied to each read piece of data.\n\n--------------------------------------------------------\n<a name=\"createKeyStream\"></a>\n### db.createKeyStream([options])\n\nA **KeyStream** is a **ReadStream** where the `'data'` events are simply the keys from the database so it can be used like a traditional stream rather than an object stream.\n\nYou can obtain a KeyStream either by calling the `createKeyStream()` method on a LevelUP object or by passing passing an options object to `createReadStream()` with `keys` set to `true` and `values` set to `false`.\n\n```js\ndb.createKeyStream()\n  .on('data', function (data) {\n    console.log('key=', data)\n  })\n\n// same as:\ndb.createReadStream({ keys: true, values: false })\n  .on('data', function (data) {\n    console.log('key=', data)\n  })\n```\n\n--------------------------------------------------------\n<a name=\"createValueStream\"></a>\n### db.createValueStream([options])\n\nA **ValueStream** is a **ReadStream** where the `'data'` events are simply the values from the database so it can be used like a traditional stream rather than an object stream.\n\nYou can obtain a ValueStream either by calling the `createValueStream()` method on a LevelUP object or by passing passing an options object to `createReadStream()` with `values` set to `true` and `keys` set to `false`.\n\n```js\ndb.createValueStream()\n  .on('data', function (data) {\n    console.log('value=', data)\n  })\n\n// same as:\ndb.createReadStream({ keys: false, values: true })\n  .on('data', function (data) {\n    console.log('value=', data)\n  })\n```\n\n--------------------------------------------------------\n<a name=\"createWriteStream\"></a>\n### db.createWriteStream([options])\n\nA **WriteStream** can be obtained by calling the `createWriteStream()` method. The resulting stream is a complete Node.js-style [Writable Stream](http://nodejs.org/docs/latest/api/stream.html#stream_writable_stream) which accepts objects with `'key'` and `'value'` pairs on its `write()` method.\n\nThe WriteStream will buffer writes and submit them as a `batch()` operations where writes occur *within the same tick*.\n\n```js\nvar ws = db.createWriteStream()\n\nws.on('error', function (err) {\n  console.log('Oh my!', err)\n})\nws.on('close', function () {\n  console.log('Stream closed')\n})\n\nws.write({ key: 'name', value: 'Yuri Irsenovich Kim' })\nws.write({ key: 'dob', value: '16 February 1941' })\nws.write({ key: 'spouse', value: 'Kim Young-sook' })\nws.write({ key: 'occupation', value: 'Clown' })\nws.end()\n```\n\nThe standard `write()`, `end()`, `destroy()` and `destroySoon()` methods are implemented on the WriteStream. `'drain'`, `'error'`, `'close'` and `'pipe'` events are emitted.\n\nYou can specify encodings both for the whole stream and individual entries:\n\nTo set the encoding for the whole stream, provide an options object as the first parameter to `createWriteStream()` with `'keyEncoding'` and/or `'valueEncoding'`.\n\nTo set the encoding for an individual entry:\n\n```js\nwriteStream.write({\n    key           : new Buffer([1, 2, 3])\n  , value         : { some: 'json' }\n  , keyEncoding   : 'binary'\n  , valueEncoding : 'json'\n})\n```\n\n#### write({ type: 'put' })\n\nIf individual `write()` operations are performed with a `'type'` property of `'del'`, they will be passed on as `'del'` operations to the batch.\n\n```js\nvar ws = db.createWriteStream()\n\nws.on('error', function (err) {\n  console.log('Oh my!', err)\n})\nws.on('close', function () {\n  console.log('Stream closed')\n})\n\nws.write({ type: 'del', key: 'name' })\nws.write({ type: 'del', key: 'dob' })\nws.write({ type: 'put', key: 'spouse' })\nws.write({ type: 'del', key: 'occupation' })\nws.end()\n```\n\n#### db.createWriteStream({ type: 'del' })\n\nIf the *WriteStream* is created with a `'type'` option of `'del'`, all `write()` operations will be interpreted as `'del'`, unless explicitly specified as `'put'`.\n\n```js\nvar ws = db.createWriteStream({ type: 'del' })\n\nws.on('error', function (err) {\n  console.log('Oh my!', err)\n})\nws.on('close', function () {\n  console.log('Stream closed')\n})\n\nws.write({ key: 'name' })\nws.write({ key: 'dob' })\n// but it can be overridden\nws.write({ type: 'put', key: 'spouse', value: 'Ri Sol-ju' })\nws.write({ key: 'occupation' })\nws.end()\n```\n\n#### Pipes and Node Stream compatibility\n\nA ReadStream can be piped directly to a WriteStream, allowing for easy copying of an entire database. A simple `copy()` operation is included in LevelUP that performs exactly this on two open databases:\n\n```js\nfunction copy (srcdb, dstdb, callback) {\n  srcdb.createReadStream().pipe(dstdb.createWriteStream()).on('close', callback)\n}\n```\n\nThe ReadStream is also [fstream](https://github.com/isaacs/fstream)-compatible which means you should be able to pipe to and from fstreams. So you can serialize and deserialize an entire database to a directory where keys are filenames and values are their contents, or even into a *tar* file using [node-tar](https://github.com/isaacs/node-tar). See the [fstream functional test](https://github.com/rvagg/node-levelup/blob/master/test/functional/fstream-test.js) for an example. *(Note: I'm not really sure there's a great use-case for this but it's a fun example and it helps to harden the stream implementations.)*\n\nKeyStreams and ValueStreams can be treated like standard streams of raw data. If `'keyEncoding'` or `'valueEncoding'` is set to `'binary'` the `'data'` events will simply be standard Node `Buffer` objects straight out of the data store.\n\n\n--------------------------------------------------------\n<a name='approximateSize'></a>\n### db.db.approximateSize(start, end, callback)\n<code>approximateSize()</code> can used to get the approximate number of bytes of file system space used by the range `[start..end)`. The result may not include recently written data.\n\n```js\nvar db = require('level')('./huge.db')\n\ndb.db.approximateSize('a', 'c', function (err, size) {\n  if (err) return console.error('Ooops!', err)\n  console.log('Approximate size of range is %d', size)\n})\n```\n\n**Note:** `approximateSize()` is available via [LevelDOWN](https://github.com/rvagg/node-leveldown/), which by default is accessible as the `db` property of your LevelUP instance. This is a specific LevelDB operation and is not likely to be available where you replace LevelDOWN with an alternative back-end via the `'db'` option.\n\n\n--------------------------------------------------------\n<a name='getProperty'></a>\n### db.db.getProperty(property)\n<code>getProperty</code> can be used to get internal details from LevelDB. When issued with a valid property string, a readable string will be returned (this method is synchronous).\n\nCurrently, the only valid properties are:\n\n* <b><code>'leveldb.num-files-at-levelN'</code></b>: returns the number of files at level *N*, where N is an integer representing a valid level (e.g. \"0\").\n\n* <b><code>'leveldb.stats'</code></b>: returns a multi-line string describing statistics about LevelDB's internal operation.\n\n* <b><code>'leveldb.sstables'</code></b>: returns a multi-line string describing all of the *sstables* that make up contents of the current database.\n\n\n```js\nvar db = require('level')('./huge.db')\nconsole.log(db.db.getProperty('leveldb.num-files-at-level3'))\n// → '243'\n```\n\n**Note:** `getProperty()` is available via [LevelDOWN](https://github.com/rvagg/node-leveldown/), which by default is accessible as the `db` property of your LevelUP instance. This is a specific LevelDB operation and is not likely to be available where you replace LevelDOWN with an alternative back-end via the `'db'` option.\n\n\n--------------------------------------------------------\n<a name=\"destroy\"></a>\n### leveldown.destroy(location, callback)\n<code>destroy()</code> is used to completely remove an existing LevelDB database directory. You can use this function in place of a full directory *rm* if you want to be sure to only remove LevelDB-related files. If the directory only contains LevelDB files, the directory itself will be removed as well. If there are additional, non-LevelDB files in the directory, those files, and the directory, will be left alone.\n\nThe callback will be called when the destroy operation is complete, with a possible `error` argument.\n\n**Note:** `destroy()` is available via [LevelDOWN](https://github.com/rvagg/node-leveldown/) which you will have to install seperately, e.g.:\n\n```js\nrequire('leveldown').destroy('./huge.db', function (err) { console.log('done!') })\n```\n\n--------------------------------------------------------\n<a name=\"repair\"></a>\n### leveldown.repair(location, callback)\n<code>repair()</code> can be used to attempt a restoration of a damaged LevelDB store. From the LevelDB documentation:\n\n> If a DB cannot be opened, you may attempt to call this method to resurrect as much of the contents of the database as possible. Some data may be lost, so be careful when calling this function on a database that contains important information.\n\nYou will find information on the *repair* operation in the *LOG* file inside the store directory. \n\nA `repair()` can also be used to perform a compaction of the LevelDB log into table files.\n\nThe callback will be called when the repair operation is complete, with a possible `error` argument.\n\n**Note:** `repair()` is available via [LevelDOWN](https://github.com/rvagg/node-leveldown/) which you will have to install seperately, e.g.:\n\n```js\nrequire('leveldown').repair('./huge.db', function (err) { console.log('done!') })\n```\n\n--------------------------------------------------------\n\n<a name=\"events\"></a>\nEvents\n------\n\nLevelUP emits events when the callbacks to the corresponding methods are called.\n\n* `db.emit('put', key, value)` emitted when a new value is `'put'`\n* `db.emit('del', key)` emitted when a value is deleted\n* `db.emit('batch', ary)` emitted when a batch operation has executed\n* `db.emit('ready')` emitted when the database has opened (`'open'` is synonym)\n* `db.emit('closed')` emitted when the database has closed\n* `db.emit('opening')` emitted when the database is opening\n* `db.emit('closing')` emitted when the database is closing\n\nIf you do not pass a callback to an async function, and there is an error, LevelUP will `emit('error', err)` instead.\n\n<a name=\"json\"></a>\nJSON data\n---------\n\nYou specify `'json'` encoding for both keys and/or values, you can then supply JavaScript objects to LevelUP and receive them from all fetch operations, including ReadStreams. LevelUP will automatically *stringify* your objects and store them as *utf8* and parse the strings back into objects before passing them back to you.\n\n<a name=\"custom_encodings\"></a>\nCustom encodings\n----------------\n\nA custom encoding may be provided by passing in an object as an value for `keyEncoding` or `valueEncoding` (wherever accepted), it must have the following properties:\n\n```js\n{\n    encode : function (val) { ... }\n  , decode : function (val) { ... }\n  , buffer : boolean // encode returns a buffer-like and decode accepts a buffer\n  , type   : String  // name of this encoding type.\n}\n```\n\n*\"buffer-like\"* means either a `Buffer` if running in Node, or a Uint8Array if in a browser. Use [bops](https://github.com/chrisdickinson/bops) to get portable binary operations.\n\n<a name=\"extending\"></a>\nExtending LevelUP\n-----------------\n\nA list of <a href=\"https://github.com/rvagg/node-levelup/wiki/Modules\"><b>Node.js LevelDB modules and projects</b></a> can be found in the wiki.\n\nWhen attempting to extend the functionality of LevelUP, it is recommended that you consider using [level-hooks](https://github.com/dominictarr/level-hooks) and/or [level-sublevel](https://github.com/dominictarr/level-sublevel). **level-sublevel** is particularly helpful for keeping additional, extension-specific, data in a LevelDB store. It allows you to partition a LevelUP instance into multiple sub-instances that each correspond to discrete namespaced key ranges.\n\n<a name=\"multiproc\"></a>\nMulti-process access\n--------------------\n\nLevelDB is thread-safe but is **not** suitable for accessing with multiple processes. You should only ever have a LevelDB database open from a single Node.js process. Node.js clusters are made up of multiple processes so a LevelUP instance cannot be shared between them either.\n\nSee the <a href=\"https://github.com/rvagg/node-levelup/wiki/Modules\"><b>wiki</b></a> for some LevelUP extensions, including [multilevel](https://github.com/juliangruber/multilevel), that may help if you require a single data store to be shared across processes.\n\n<a name=\"support\"></a>\nGetting support\n---------------\n\nThere are multiple ways you can find help in using LevelDB in Node.js:\n\n * **IRC:** you'll find an active group of LevelUP users in the **##leveldb** channel on Freenode, including most of the contributors to this project.\n * **Mailing list:** there is an active [Node.js LevelDB](https://groups.google.com/forum/#!forum/node-levelup) Google Group.\n * **GitHub:** you're welcome to open an issue here on this GitHub repository if you have a question.\n\n<a name=\"contributing\"></a>\nContributing\n------------\n\nLevelUP is an **OPEN Open Source Project**. This means that:\n\n> Individuals making significant and valuable contributions are given commit-access to the project to contribute as they see fit. This project is more like an open wiki than a standard guarded open source project.\n\nSee the [CONTRIBUTING.md](https://github.com/rvagg/node-levelup/blob/master/CONTRIBUTING.md) file for more details.\n\n### Contributors\n\nLevelUP is only possible due to the excellent work of the following contributors:\n\n<table><tbody>\n<tr><th align=\"left\">Rod Vagg</th><td><a href=\"https://github.com/rvagg\">GitHub/rvagg</a></td><td><a href=\"http://twitter.com/rvagg\">Twitter/@rvagg</a></td></tr>\n<tr><th align=\"left\">John Chesley</th><td><a href=\"https://github.com/chesles/\">GitHub/chesles</a></td><td><a href=\"http://twitter.com/chesles\">Twitter/@chesles</a></td></tr>\n<tr><th align=\"left\">Jake Verbaten</th><td><a href=\"https://github.com/raynos\">GitHub/raynos</a></td><td><a href=\"http://twitter.com/raynos2\">Twitter/@raynos2</a></td></tr>\n<tr><th align=\"left\">Dominic Tarr</th><td><a href=\"https://github.com/dominictarr\">GitHub/dominictarr</a></td><td><a href=\"http://twitter.com/dominictarr\">Twitter/@dominictarr</a></td></tr>\n<tr><th align=\"left\">Max Ogden</th><td><a href=\"https://github.com/maxogden\">GitHub/maxogden</a></td><td><a href=\"http://twitter.com/maxogden\">Twitter/@maxogden</a></td></tr>\n<tr><th align=\"left\">Lars-Magnus Skog</th><td><a href=\"https://github.com/ralphtheninja\">GitHub/ralphtheninja</a></td><td><a href=\"http://twitter.com/ralphtheninja\">Twitter/@ralphtheninja</a></td></tr>\n<tr><th align=\"left\">David Björklund</th><td><a href=\"https://github.com/kesla\">GitHub/kesla</a></td><td><a href=\"http://twitter.com/david_bjorklund\">Twitter/@david_bjorklund</a></td></tr>\n<tr><th align=\"left\">Julian Gruber</th><td><a href=\"https://github.com/juliangruber\">GitHub/juliangruber</a></td><td><a href=\"http://twitter.com/juliangruber\">Twitter/@juliangruber</a></td></tr>\n<tr><th align=\"left\">Paolo Fragomeni</th><td><a href=\"https://github.com/hij1nx\">GitHub/hij1nx</a></td><td><a href=\"http://twitter.com/hij1nx\">Twitter/@hij1nx</a></td></tr>\n<tr><th align=\"left\">Anton Whalley</th><td><a href=\"https://github.com/No9\">GitHub/No9</a></td><td><a href=\"https://twitter.com/antonwhalley\">Twitter/@antonwhalley</a></td></tr>\n<tr><th align=\"left\">Matteo Collina</th><td><a href=\"https://github.com/mcollina\">GitHub/mcollina</a></td><td><a href=\"https://twitter.com/matteocollina\">Twitter/@matteocollina</a></td></tr>\n<tr><th align=\"left\">Pedro Teixeira</th><td><a href=\"https://github.com/pgte\">GitHub/pgte</a></td><td><a href=\"https://twitter.com/pgte\">Twitter/@pgte</a></td></tr>\n<tr><th align=\"left\">James Halliday</th><td><a href=\"https://github.com/substack\">GitHub/substack</a></td><td><a href=\"https://twitter.com/substack\">Twitter/@substack</a></td></tr>\n</tbody></table>\n\n### Windows\n\nA large portion of the Windows support comes from code by [Krzysztof Kowalczyk](http://blog.kowalczyk.info/) [@kjk](https://twitter.com/kjk), see his Windows LevelDB port [here](http://code.google.com/r/kkowalczyk-leveldb/). If you're using LevelUP on Windows, you should give him your thanks!\n\n\n<a name=\"license\"></a>\nLicense &amp; copyright\n-------------------\n\nCopyright (c) 2012-2014 LevelUP contributors (listed above).\n\nLevelUP is licensed under the MIT license. All rights not explicitly granted in the MIT license are reserved. See the included LICENSE.md file for more details.\n\n=======\n*LevelUP builds on the excellent work of the LevelDB and Snappy teams from Google and additional contributors. LevelDB and Snappy are both issued under the [New BSD Licence](http://opensource.org/licenses/BSD-3-Clause).*\n",readmeFilename:"README.md"}
},{}],44:[function(e,t,n){(function(n,r,i){var o=e("util"),a=e("abstract-leveldown").AbstractLevelDOWN,s=e("abstract-leveldown").AbstractIterator,u=function(){},f=r.setImmediate||n.nextTick;function l(e,t){s.call(this,e);var n=new i(0);this._dbsize=this.db.container.length();this._reverse=!!t.reverse;if(t.end instanceof i){if(t.end.length=0)this._end=this.db.container.key(this._dbsize-1)}else{this._end=t.end}this._limit=t.limit;this._count=0;if(t.start){var r=false;for(var o=0;o<this._dbsize;o++){if(this.db.container.key(o)>=t.start){this._pos=o;if(this._reverse){if(this.db.container.key(o)>t.start){this._pos=o-1}else{this._pos=o}}r=true;break}}if(!r){this._pos=this._reverse?this._dbsize-1:-1}}else{this._pos=this._reverse?this._dbsize-1:0}}o.inherits(l,s);l.prototype._next=function(e){if(this._pos>=this.db.container.length()||this._pos<0)return f(e);var t=this.db.container.key(this._pos),n;if(!!this._end&&(this._reverse?t<this._end:t>this._end))return f(e);if(!!this._limit&&this._limit>0&&this._count++>=this._limit)return f(e);n=this.db.container.getItem(t);this._pos+=this._reverse?-1:1;f(e.bind(null,undefined,t,n))};function c(t){if(!(this instanceof c))return new c(t);a.call(this,t);var n=e("./localstorage").localStorage;this.container=new n(t)}o.inherits(c,a);c.prototype._open=function(e,t){f(function(){t(null,this)}.bind(this))};c.prototype._put=function(e,t,n,r){var o=g(e,"key");if(o)return r(o);o=g(t,"value");if(o)return r(o);if(typeof t=="object"&&!i.isBuffer(t)&&t.buffer==undefined){var a={};a.storetype="json";a.data=t;t=JSON.stringify(a)}this.container.setItem(e,t);f(r)};c.prototype._get=function(e,t,n){var r=g(e,"key");if(r)return n(r);if(!v(e)){e=String(e)}var o=this.container.getItem(e);if(o===undefined){return f(function(){n(new Error("NotFound: "))})}if(t.asBuffer!==false&&!i.isBuffer(o)){o=new i(String(o))}if(t.asBuffer===false){if(o.indexOf('{"storetype":"json","data"')>-1){var a=JSON.parse(o);o=a.data}}f(function(){n(null,o)})};c.prototype._del=function(e,t,n){var r=g(e,"key");if(r)return n(r);if(!v(e))e=String(e);this.container.removeItem(e);f(n)};c.prototype._batch=function(e,t,n){var r,o=0,a,s;if(Array.isArray(e)){for(;o<e.length;o++){if(e[o]){a=i.isBuffer(e[o].key)?e[o].key:String(e[o].key);r=g(a,"key");if(r)return f(n.bind(null,r));if(e[o].type==="del"){this._del(e[o].key,t,u)}else if(e[o].type==="put"){s=i.isBuffer(e[o].value)?e[o].value:String(e[o].value);r=g(s,"value");if(r)return f(n.bind(null,r));this._put(a,s,t,u)}}}}f(n)};c.prototype._iterator=function(e){return new l(this,e)};c.destroy=function(e,t){try{Object.keys(localStorage).forEach(function(t){if(t.substring(0,e.length+1)==e+"!"){localStorage.removeItem(t)}});t()}catch(n){}};function h(e,t){return this.slice(e,t)}function d(e,t){if(arguments.length<2)t=0;for(var n=0,r=e.length;n<r;++n,++t)this[t]=e[n]&255}function p(e){var t;if(typeof e==="number"){t=new Array(e);for(var n=0;n<e;++n)t[n]=0}else t=e.slice(0);t.subarray=h;t.buffer=t;t.byteLength=t.length;t.set=d;if(typeof e==="object"&&e.buffer)t.buffer=e.buffer;return t}function v(e){return e instanceof ArrayBuffer}function g(e,t){if(e===null||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(e===null||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(t==="key"){if(e instanceof Boolean){return new Error(t+" cannot be `null` or `undefined`")}if(e===""){return new Error(t+" cannot be empty")}}if(e.toString().indexOf("[object ArrayBuffer]")==0){if(e.byteLength==0||e.byteLength==undefined){return new Error(t+" cannot be an empty Buffer")}}if(v(e)){if(e.length===0)return new Error(t+" cannot be an empty Buffer")}else if(String(e)==="")return new Error(t+" cannot be an empty String")}t.exports=c}).call(this,e("GS1EMO"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer)},{"./localstorage":45,GS1EMO:89,"abstract-leveldown":48,buffer:80,util:110}],45:[function(e,t,n){function r(e){this._partition=e;this._keys=[];for(var t=0;t<window.localStorage.length;t++){if(window.localStorage.key(t).indexOf(e+"!")==0)this._keys.push(window.localStorage.key(t))}this._keys.sort()}r.prototype.key=function(e){var t=this._keys[e];if(typeof t!=="undefined"){return this._keys[e].replace(this._partition+"!","").replace("!bin")}else{return t}};r.prototype.setItem=function(e,t){e=this._partition+"!"+e;if(t instanceof ArrayBuffer){var n="ArrayBuffer:";t=n+btoa(String.fromCharCode.apply(null,t))}if(t instanceof Uint8Array){var n="Uint8Array:";t=n+btoa(String.fromCharCode.apply(null,t))}for(var r=0;r<this._keys.length;r++){if(this._keys[r]===e){window.localStorage.setItem(e,t);return}}this._keys.push(e);this._keys.sort();window.localStorage.setItem(e,t)};r.prototype.getItem=function(e){e=this._partition+"!"+e;var t=window.localStorage.getItem(e);if(t==null){return undefined}if(t.indexOf("ArrayBuffer:")==0){var n=t.replace("ArrayBuffer:","");t=new ArrayBuffer(atob(n).split("").map(function(e){return e.charCodeAt(0)}));return t}if(t.indexOf("Uint8Array:")==0){var n=t.replace("Uint8Array:","");return atob(n)}return t};r.prototype.removeItem=function(e){e=this._partition+"!"+e;for(var t=this._keys.length;t>=0;t--){if(this._keys[t]===e){this._keys.splice(t,1);window.localStorage.removeItem(e)}}};r.prototype.clear=function(){window.localStorage.clear()};r.prototype.length=function(){return this._keys.length};n.localStorage=r},{}],46:[function(e,t,n){t.exports=e(26)},{GS1EMO:89}],47:[function(e,t,n){t.exports=e(27)},{GS1EMO:89}],48:[function(e,t,n){(function(n,r){var i=e("xtend"),o=e("./abstract-iterator"),a=e("./abstract-chained-batch");function s(e){if(!arguments.length||e===undefined)throw new Error("constructor requires at least a location argument");if(typeof e!="string")throw new Error("constructor requires a location string argument");this.location=e}s.prototype.open=function(e,t){if(typeof e=="function")t=e;if(typeof t!="function")throw new Error("open() requires a callback argument");if(typeof e!="object")e={};if(typeof this._open=="function")return this._open(e,t);n.nextTick(t)};s.prototype.close=function(e){if(typeof e!="function")throw new Error("close() requires a callback argument");if(typeof this._close=="function")return this._close(e);n.nextTick(e)};s.prototype.get=function(e,t,r){var i;if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("get() requires a callback argument");if(i=this._checkKeyValue(e,"key",this._isBuffer))return r(i);if(!this._isBuffer(e))e=String(e);if(typeof t!="object")t={};if(typeof this._get=="function")return this._get(e,t,r);n.nextTick(function(){r(new Error("NotFound"))})};s.prototype.put=function(e,t,r,i){var o;if(typeof r=="function")i=r;if(typeof i!="function")throw new Error("put() requires a callback argument");if(o=this._checkKeyValue(e,"key",this._isBuffer))return i(o);if(o=this._checkKeyValue(t,"value",this._isBuffer))return i(o);if(!this._isBuffer(e))e=String(e);if(!this._isBuffer(t)&&!n.browser)t=String(t);if(typeof r!="object")r={};if(typeof this._put=="function")return this._put(e,t,r,i);n.nextTick(i)};s.prototype.del=function(e,t,r){var i;if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("del() requires a callback argument");if(i=this._checkKeyValue(e,"key",this._isBuffer))return r(i);if(!this._isBuffer(e))e=String(e);if(typeof t!="object")t={};if(typeof this._del=="function")return this._del(e,t,r);n.nextTick(r)};s.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if(typeof t=="function")r=t;if(typeof r!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));if(typeof t!="object")t={};var i=0,o=e.length,a,s;for(;i<o;i++){a=e[i];if(typeof a!="object")continue;if(s=this._checkKeyValue(a.type,"type",this._isBuffer))return r(s);if(s=this._checkKeyValue(a.key,"key",this._isBuffer))return r(s);if(a.type=="put"){if(s=this._checkKeyValue(a.value,"value",this._isBuffer))return r(s)}}if(typeof this._batch=="function")return this._batch(e,t,r);n.nextTick(r)};s.prototype.approximateSize=function(e,t,r){if(e==null||t==null||typeof e=="function"||typeof t=="function"){throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments")}if(typeof r!="function")throw new Error("approximateSize() requires a callback argument");if(!this._isBuffer(e))e=String(e);if(!this._isBuffer(t))t=String(t);if(typeof this._approximateSize=="function")return this._approximateSize(e,t,r);n.nextTick(function(){r(null,0)})};s.prototype._setupIteratorOptions=function(e){var t=this;e=i(e);["start","end","gt","gte","lt","lte"].forEach(function(n){if(e[n]&&t._isBuffer(e[n])&&e[n].length===0)delete e[n]});e.reverse=!!e.reverse;if(e.reverse&&e.lt)e.start=e.lt;if(e.reverse&&e.lte)e.start=e.lte;if(!e.reverse&&e.gt)e.start=e.gt;if(!e.reverse&&e.gte)e.start=e.gte;if(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)e.exclusiveStart=true;return e};s.prototype.iterator=function(e){if(typeof e!="object")e={};e=this._setupIteratorOptions(e);if(typeof this._iterator=="function")return this._iterator(e);return new o(this)};s.prototype._chainedBatch=function(){return new a(this)};s.prototype._isBuffer=function(e){return r.isBuffer(e)};s.prototype._checkKeyValue=function(e,t){if(e===null||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(e===null||e===undefined)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(e.length===0)return new Error(t+" cannot be an empty Buffer")}else if(String(e)==="")return new Error(t+" cannot be an empty String")};t.exports.AbstractLevelDOWN=s;t.exports.AbstractIterator=o;t.exports.AbstractChainedBatch=a}).call(this,e("GS1EMO"),e("buffer").Buffer)},{"./abstract-chained-batch":46,"./abstract-iterator":47,GS1EMO:89,buffer:80,xtend:50}],49:[function(e,t,n){t.exports=e(11)},{}],50:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{"./has-keys":49,"object-keys":52}],51:[function(e,t,n){var r=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;var o=function(e){var t=typeof e==="function"&&!(e instanceof RegExp)||i.call(e)==="[object Function]";if(!t&&typeof window!=="undefined"){t=e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt}return t};t.exports=function a(e,t){if(!o(t)){throw new TypeError("iterator must be a function")}var n,i,a=typeof e==="string",s=e.length,u=arguments.length>2?arguments[2]:null;if(s===+s){for(n=0;n<s;n++){if(u===null){t(a?e.charAt(n):e[n],n,e)}else{t.call(u,a?e.charAt(n):e[n],n,e)}}}else{for(i in e){if(r.call(e,i)){if(u===null){t(e[i],i,e)}else{t.call(u,e[i],i,e)}}}}}},{}],52:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{"./shim":54}],53:[function(e,t,n){var r=Object.prototype.toString;t.exports=function i(e){var t=r.call(e);var i=t==="[object Arguments]";if(!i){i=t!=="[object Array]"&&e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&r.call(e.callee)==="[object Function]"}return i}},{}],54:[function(e,t,n){(function(){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=e("./foreach"),o=e("./isArguments"),a=!{toString:null}.propertyIsEnumerable("toString"),s=function(){}.propertyIsEnumerable("prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f;f=function l(e){var t=e!==null&&typeof e==="object",f=r.call(e)==="[object Function]",l=o(e),c=[];if(!t&&!f&&!l){throw new TypeError("Object.keys called on a non-object")}if(l){i(e,function(e){c.push(e)})}else{var h,d=s&&f;for(h in e){if(!(d&&h==="prototype")&&n.call(e,h)){c.push(h)}}}if(a){var p=e.constructor,v=p&&p.prototype===e;i(u,function(t){if(!(v&&t==="constructor")&&n.call(e,t)){c.push(t)}})}return c};t.exports=f})()},{"./foreach":51,"./isArguments":53}],55:[function(e,t,n){var r=e("events").EventEmitter;var i=e("level-sublevel");var o=e("weak-type-wizard");var a=e("noddity-retrieval");var s=e("extend");var u=e("./lib/reflect.js");var f=e("./lib/index_manager.js");var l=e("./lib/post_manager.js");var c=new o({postMetadata:"metadata",string:["content","filename"],"default":{content:"",filename:""},cast:{postMetadata:new o({date:"date",markdown:"boolean"})}});t.exports=function h(e,t,n){var o=typeof e==="string"?new a(e):e;var h=i(t);var d=new r;n=s({},n);var p=Object.create(d);var v=new l(o,h.sublevel("posts",{valueEncoding:c.getLevelUpEncoding()}),{refreshEvery:n.refreshEvery});var g=new f(o,v,h.sublevel("index",{valueEncoding:"json"}),{refreshEvery:n.refreshEvery});u("change",v,d,"post changed");u("post added",v,d);u("change",g,d,"index changed");g.on("change",g.getPosts);function m(e,t){if(typeof e==="function"){t=e}if(typeof e!=="object"){e={}}var n=e.local||false;var r=typeof e.mostRecent==="number"?-e.mostRecent:undefined;var i=n?g.getLocalPosts:g.getPosts;i(r,undefined,t)}function y(){v.stop();g.stop()}p.getPost=v.getPost;p.getPosts=m;p.allPostsAreLoaded=g.allPostsAreLoaded;p.stop=y;return p}},{"./lib/index_manager.js":56,"./lib/post_manager.js":57,"./lib/reflect.js":58,events:83,extend:60,"level-sublevel":6,"noddity-retrieval":64,"weak-type-wizard":66}],56:[function(e,t,n){var r=e("levelup-cache");var i=e("extend");var o=e("events").EventEmitter;var a=e("./reflect.js");function s(e,t){var n=e&&t&&e.metadata&&t.metadata&&e.metadata.date&&t.metadata.date;if(!n||e.metadata.date==t.metadata.date){return 0}else if(e.metadata.date<t.metadata.date){return-1}else{return 1}}function u(e,t){return e.length===t.length&&e.every(function(e,n){return t[n]===e})}var f="index";function l(e,t,n,a){a=i({refreshEvery:10*60*1e3,comparison:u},a);var l=Object.create(new o);var c=r(n,function(t,n){e.getIndex(n)},a);c.on("change",function(e,t){l.emit("change",t)});var h=c.get.bind(c,f);h();function d(e,t,n,r){if(typeof t==="function"){r=t}h(function(i,o){if(i){r(i)}else{e(o,function(e,i){if(!e){i=i.sort(s);if(typeof t==="number"){i=i.slice(t,n)}}r(e,i)})}})}var p=d.bind(null,t.getPosts);var v=d.bind(null,t.getLocalPosts);l.getPosts=p;l.getLocalPosts=v;l.allPostsAreLoaded=function(e){h(function(t,n){if(t){e(false,false)}else{v(function(t,r){e(t,t||r.length===n.length)})}})};l.stop=c.stop;return l}t.exports=l},{"./reflect.js":58,events:83,extend:60,"levelup-cache":61}],57:[function(e,t,n){var r=e("asynquence");var i=e("levelup-cache");var o=e("events").EventEmitter;var a=e("extend");var s=e("util").isDate;var u=e("./reflect.js");function f(e,t){return typeof t!=="undefined"&&s(e)?e.toString()===t.toString():e===t}function l(e,t){return e.content===t.content&&e.metadata.length===t.metadata.length&&e.filename===t.filename&&Object.keys(e.metadata).every(function(n){return f(e.metadata[n],t.metadata[n])})}function c(e,t,n){n=n||{};var s=Object.create(new o);var f=a({refreshEvery:12*60*60*1e3},n,{comparison:l});var c=new i(t,e.getPost,f);u("change",c,s);function h(e,t){c.get(e,t)}function d(e,t){var n=[];var i=false;var o=r();var a=e.map(function(e,t){return function(r){h(e,function(e,o){if(!i&&e){i=e}else if(!i){n[t]=o}r()})}});o.gate.apply(o,a).then(function(){t(i,n)})}function p(e,t){var n=[];var i=false;var o=r();var a=e.map(function(e){return function(t){c.getLocal(e,function(e,r){if(!i){if(!e){n.push(r)}else if(!e.notFound){i=e;o.abort()}}t()})}});o.gate.apply(o,a).then(function(e){t(i,n);e()})}s.getPost=h;s.getPosts=d;s.getLocalPosts=p;s.stop=c.stop;return s}t.exports=c},{"./reflect.js":58,asynquence:59,events:83,extend:60,"levelup-cache":61,util:110}],58:[function(e,t,n){t.exports=function r(e,t,n,i){if(typeof e==="string"){e=[e]}e.forEach(function(e){t.on(e,n.emit.bind(n,i||e))})}},{}],59:[function(e,t,n){!function(e,n,r){"undefined"!=typeof t&&t.exports?t.exports=r():"function"==typeof define&&define.amd?define(r):n[e]=r(e,n)}("ASQ",this,function(e,t){function n(e){return"undefined"!=typeof setImmediate?setImmediate(e):setTimeout(e,0)}function r(){function e(){function e(){clearTimeout(p),p=null,y.length=0,b.length=0,w.length=0,E.length=0}function t(){return g?r():(p||(p=n(r)),void 0)}function r(){var n,r;if(p=null,g)e();else if(v)for(;b.length;){n=b.shift();try{n.apply(n,E)}catch(o){E.push(o),o.stack&&E.push(o.stack),0===b.length&&console.error.apply(console,E)}}else if(m&&y.length>0){m=!1,n=y.shift(),r=w.slice(),w.length=0,r.unshift(i());try{n.apply(n,r)}catch(o){E.push(o),v=!0,t()}}}function i(){function e(){v||g||m||(m=!0,w.push.apply(w,arguments),E.length=0,t())}return e.fail=function(){v||g||m||(v=!0,w.length=0,E.push.apply(E,arguments),t())},e.abort=function(){v||g||(m=!1,g=!0,w.length=0,E.length=0,t())},e}function o(e,t,r){function i(){clearTimeout(p),p=w=E=d=null}function o(){return y?s():(p||(p=n(s)),void 0)}function s(){if(!(v||g||b)){var t,n=[];if(p=null,m)e.fail.apply(e,d),i();else if(y)e.abort(),i();else if(u()){for(b=!0,t=0;t<w.length;t++)n.push(E["m"+t]);e.apply(e,n),i()}}}function u(){if(!(v||g||m||y||b||0===w.length)){var e,t=!0;for(e=0;e<w.length;e++)if(null===w[e]){t=!1;break}return t}}function f(){function e(){if(!(v||g||m||y||b||w[t])){var e=a.call(arguments);E["m"+t]=e.length>1?e:e[0],w[t]=!0,o()}}var t=w.length;return e.fail=function(){v||g||m||y||b||w[t]||(m=!0,d=a.call(arguments),o())},e.abort=function(){v||g||m||y||b||(y=!0,s())},w[t]=null,e}var l,c,h,d,p,m=!1,y=!1,b=!1,w=[],E={};for(l=0;l<t.length&&!m&&!y;l++){c=r.slice(),c.unshift(f());try{t[l].apply(t[l],c)}catch(_){h=_,m=!0;break}}h&&e.fail(h)}function s(){return v||g?_:(arguments.length>0&&y.push.apply(y,arguments),t(),_)}function u(){return g?_:(b.push.apply(b,arguments),t(),_)}function f(){if(v||g||0===arguments.length)return _;var e=a.apply(arguments);return s(function(t){var n=a.call(arguments);n.shift(),o(t,e,n)}),_}function l(){if(v||g||0===arguments.length)return _;var e,t=a.call(arguments);for(e=0;e<t.length;e++)!function(e){s(function(t){var n=a.call(arguments,1);e.apply(e,n),t()}).or(e.fail)}(t[e]);return _}function c(){if(v||g||0===arguments.length)return _;var e,t=a.call(arguments);for(e=0;e<t.length;e++)!function(e){s(function(t){var n=a.call(arguments,1);e.apply(e,n).pipe(t)})}(t[e]);return _}function h(){if(v||g||0===arguments.length)return _;var e,t=a.call(arguments);for(e=0;e<t.length;e++)!function(e){s(function(t){var n=a.call(arguments,1);t(e.apply(e,n))})}(t[e]);return _}function d(){return v?_:(g=!0,r(),_)}var p,v=!1,g=!1,m=!0,y=[],b=[],w=[],E=[],_={then:s,or:u,gate:f,pipe:l,seq:c,val:h,abort:d};return arguments.length>0&&_.then.apply(_,arguments),_}return e}var i,o=(t||{})[e],a=Array.prototype.slice;return i=r(),i.noConflict=function(){return t&&(t[e]=o),i},i})},{}],60:[function(e,t,n){var r=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;function o(e){if(!e||i.call(e)!=="[object Object]"||e.nodeType||e.setInterval)return false;var t=r.call(e,"constructor");var n=r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return false;var o;for(o in e){}return o===undefined||r.call(e,o)}t.exports=function a(){var e,t,n,r,i,s,u=arguments[0]||{},f=1,l=arguments.length,c=false;if(typeof u==="boolean"){c=u;u=arguments[1]||{};f=2}if(typeof u!=="object"&&typeof u!=="function"){u={}}for(;f<l;f++){if((e=arguments[f])!=null){for(t in e){n=u[t];r=e[t];if(u===r){continue}if(c&&r&&(o(r)||(i=Array.isArray(r)))){if(i){i=false;s=n&&Array.isArray(n)?n:[]}else{s=n&&o(n)?n:{}}u[t]=a(c,s,r)}else if(r!==undefined){u[t]=r}}}}return u}},{}],61:[function(e,t,n){var r=e("stringmap");var i=e("level-sublevel");var o=e("asynquence");var a=e("events").EventEmitter;var s=e("expire-unused-keys");var u=e("extend");t.exports=function f(e,t,n){n=n||{};n=u({refreshEvery:12*60*60*1e3,checkToSeeIfItemsNeedToBeRefreshedEvery:1e3,ttl:7*24*60*60*1e3,comparison:function b(e,t){return e===t}},n);var f=i(e);var l=f.sublevel("items");var c=new s(n.ttl,f.sublevel("item-expirations",{valueEncoding:"utf8"}),n.checkToSeeIfItemsNeedToBeRefreshedEvery);var h=new s(n.refreshEvery,f.sublevel("refresh",{valueEncoding:"utf8"}),n.checkToSeeIfItemsNeedToBeRefreshedEvery);var d=new r;var p=Object.create(new a);h.on("expire",m);c.on("expire",g);function v(){h.stop();c.stop()}function g(e){l.del(e);h.forget(e);var t=d.get(e);if(t){t.abort();d.remove(e)}}function m(e,r){var i=d.get(e);if(!i){i=o(function(r){t(e,function(t,i){l.get(e,function(o,a){if(!t&&d.has(e)){l.put(e,i,function(){p.emit("load",e,i);if(o&&o.notFound||!n.comparison(a,i)){p.emit("change",e,i,a)}});h.touch(e)}r(t,i)})})});d.set(e,i);i.then(function(t,n,r){d.remove(e);t(n,r)})}if(typeof r==="function"){i.then(function(e,t,n){r(t,n);e(t,n)})}}function y(e,t){return function(n,r){c.touch(e);if(typeof t==="function"){t(n,r)}}}p.stop=v;p.get=function w(e,t){l.get(e,function(n,r){if(n&&n.notFound){m(e,y(e,t))}else if(t){y(e,t)(n,r)}})};p.getLocal=function E(e,t){l.get(e,y(e,t))};p.refresh=function _(e,t){m(e,y(e,t))};return p}},{asynquence:59,events:83,"expire-unused-keys":62,extend:60,"level-sublevel":6,stringmap:63}],62:[function(e,t,n){var r=e("events").EventEmitter;function i(e){var t=false;function n(){t=false}return function r(){if(!t){t=true;var r=Array.prototype.slice.call(arguments,0);r.push(n);e.apply(null,r)}}}t.exports=function o(e,t,n){var o=new r;var a=[];var s=i(function f(n){var r=(new Date).getTime();var i=[];t.createReadStream().on("data",function(t){if(parseInt(t.value)+e<r){i.push(t.key)}}).on("end",function(){var e=t.batch();i.filter(function(e){return a.indexOf(e)===-1}).forEach(function(t){o.emit("expire",t);e.del(t)});a=[];e.write(n)})});o.on("touch",function l(e){t.put(e,(new Date).getTime())});o.on("forget",function c(e){a.push(e);t.del(e)});var u=setInterval(s,n||1e3);o.touch=o.emit.bind(o,"touch");o.forget=o.emit.bind(o,"forget");o.stop=function h(){clearInterval(u)};return o}},{events:83}],63:[function(e,t,n){var r=function(){"use strict";var e=Object.prototype.hasOwnProperty;var t=function(){function t(t){for(var n in t){if(e.call(t,n)){return true}}return false}function n(t){return e.call(t,"__count__")||e.call(t,"__parent__")}var r=false;if(typeof Object.create==="function"){if(!t(Object.create(null))){r=true}}if(r===false){if(t({})){throw new Error("StringMap environment error 0, please file a bug at https://github.com/olov/stringmap/issues")}}var i=r?Object.create(null):{};var o=false;if(n(i)){i.__proto__=null;if(t(i)||n(i)){throw new Error("StringMap environment error 1, please file a bug at https://github.com/olov/stringmap/issues")}o=true}return function(){var e=r?Object.create(null):{};if(o){e.__proto__=null}return e}}();function n(e){if(!(this instanceof n)){return new n(e)}this.obj=t();this.hasProto=false;this.proto=undefined;if(e){this.setMany(e)}}n.prototype.has=function(t){if(typeof t!=="string"){throw new Error("StringMap expected string key")}return t==="__proto__"?this.hasProto:e.call(this.obj,t)};n.prototype.get=function(t){if(typeof t!=="string"){throw new Error("StringMap expected string key")}return t==="__proto__"?this.proto:e.call(this.obj,t)?this.obj[t]:undefined};n.prototype.set=function(e,t){if(typeof e!=="string"){throw new Error("StringMap expected string key")}if(e==="__proto__"){this.hasProto=true;this.proto=t}else{this.obj[e]=t}};n.prototype.remove=function(e){if(typeof e!=="string"){throw new Error("StringMap expected string key")}var t=this.has(e);if(e==="__proto__"){this.hasProto=false;this.proto=undefined}else{delete this.obj[e]}return t};n.prototype["delete"]=n.prototype.remove;n.prototype.isEmpty=function(){for(var t in this.obj){if(e.call(this.obj,t)){return false}}return!this.hasProto};n.prototype.size=function(){var t=0;for(var n in this.obj){if(e.call(this.obj,n)){++t}}return this.hasProto?t+1:t};n.prototype.keys=function(){var t=[];for(var n in this.obj){if(e.call(this.obj,n)){t.push(n)}}if(this.hasProto){t.push("__proto__")}return t};n.prototype.values=function(){var t=[];for(var n in this.obj){if(e.call(this.obj,n)){t.push(this.obj[n])}}if(this.hasProto){t.push(this.proto)}return t};n.prototype.items=function(){var t=[];for(var n in this.obj){if(e.call(this.obj,n)){t.push([n,this.obj[n]])}}if(this.hasProto){t.push(["__proto__",this.proto])}return t};n.prototype.setMany=function(t){if(t===null||typeof t!=="object"&&typeof t!=="function"){throw new Error("StringMap expected Object")}for(var n in t){if(e.call(t,n)){this.set(n,t[n])}}return this};n.prototype.merge=function(e){var t=e.keys();for(var n=0;n<t.length;n++){var r=t[n];this.set(r,e.get(r))}return this};n.prototype.map=function(e){var t=this.keys();for(var n=0;n<t.length;n++){var r=t[n];t[n]=e(this.get(r),r)}return t};n.prototype.forEach=function(e){var t=this.keys();for(var n=0;n<t.length;n++){var r=t[n];e(this.get(r),r)}};n.prototype.clone=function(){var e=n();return e.merge(this)};n.prototype.toString=function(){var e=this;return"{"+this.keys().map(function(t){return JSON.stringify(t)+":"+JSON.stringify(e.get(t))}).join(",")+"}"};return n}();if(typeof t!=="undefined"&&typeof t.exports!=="undefined"){t.exports=r}},{}],64:[function(e,t,n){var r=e("http");var i=e("url");var o=e("text-metadata-parser");t.exports=function a(e){var t=function(t,n,o){var a="";var s=i.resolve(e,t);r.get(i.parse(s),function(e){var t=typeof e.setEncoding!=="function";if(!t){e.setEncoding("utf8")}e.on("data",function(e){if(a!==null){a+=e}});e.on("error",function(e){a=null;n(e)});e.on("end",function(t){if(a!==null){if(typeof t!=="undefined"){a+=t}if(e.statusCode!==200){n(new Error("Lookup of "+s+" returned status "+e.statusCode+"\n========\n"+a))}else{var r=null;try{r=o(a)}catch(i){n(new Error("Error parsing file with contents:\n"+a+"\n==========\n"+i.message))}if(r!==null){n(false,r)}}}})}).on("error",function(e){n(new Error("Lookup of "+s+" failed\n========\n"+e.message))})};return{getIndex:function(e){t("index.json",e,JSON.parse)},getPost:function(e,n){t(e,n,function(t){var n=o(t,{date:"date","boolean":"markdown"});n.filename=e;return n})}}}},{http:84,"text-metadata-parser":65,url:108}],65:[function(e,t,n){var r=e("weak-type-wizard");function i(e){var t=e.split("\n");var n=false;var r=false;var i={content:"",metadata:{}};for(var o=0;o<t.length&&!r;o++){if(!n){var a=/^([^:]+):\s*([^\r\n]+)\s*$/.exec(t[o]);if(a&&a.length===3){var s=a[1].trim();i.metadata[s]=a[2]}else if(o===0){return{content:e,metadata:{}}}else{n=true}}else if(!r){r=!/^\s*$/.test(t[o])}}i.content=t.slice(o-1).join("\n");return i}function o(e,t){var n=i(t);n.metadata=e(n.metadata);return n}function a(e,t,n){var r=typeof t!=="string";if(typeof n==="undefined"&&typeof t!=="string"){n=t}var i=typeof n==="object"?e.extend(n):e;if(r){return a.bind(null,i)}else{return o(i,t)}}t.exports=a.bind(null,new r({}))},{"weak-type-wizard":66}],66:[function(e,t,n){var r=e("extend");var i={"boolean":function(e){return e.toString().toLowerCase()!=="false"&&!(/^\d+$/.test(e)&&parseInt(e)!==0)},number:function(e){return parseFloat(e)},string:function(e){return e.toString()},date:function(e){return new Date(e)}};function o(e){return Object.keys(e).reduce(function(t,n){return r(true,t,a(e[n],n))},{})}function a(e,t){if(typeof e==="string"){return a([e],t)}else if(Array.isArray(e)){return e.reduce(function(e,n){e[n]=t;return e},{})}else{return{}}}function s(e,t,n){Object.keys(t).filter(function(t){return typeof e[t]!=="undefined"}).forEach(function(r){var i=n[e[r]];if(typeof i==="function"){t[r]=i(t[r])}});return t}function u(e,t,n){var a=function f(i){var o=r(true,{},t,i);return s(e,o,n)};a.extend=function l(a){var s=a.default;delete a.default;var f=a.cast;delete a.cast;var l=o(a);return new u(r(true,{},e,l),r(true,{},t,s),r(true,{},i,n,f))};a.getLevelUpEncoding=function c(){return{buffer:false,type:"weak-type-wizard",encode:JSON.stringify,decode:function e(t){return a(JSON.parse(t))}}};return a}var f=new u({},{});t.exports=function l(e){return f.extend(e)}},{extend:60}],67:[function(e,t,n){var r=e("events").EventEmitter;function i(e,t){var n=0;var r=t.indexOf(e);while(r!==-1){n++;r=t.indexOf(e,r+1)}return n}function o(e,t,n){return n.replace(/\[\[([\w.-]+)(?:\|([^\]>\n]+))?\]\]/gm,function(n,r,o,a,s){var u=i("<code",s.substr(0,a));var f=i("</code",s.substr(0,a));if(u!==f){return n}else{o=o||r;e.emit("link",r);return'<a href="'+t+r+'">'+o+"</a>"}})}t.exports=function a(e){var t=Object.create(new r);t.linkify=o.bind(null,t,e);return t}},{events:83}],68:[function(e,t,n){var r=e("./mixins");function i(e,t){var n=r(e,t);function i(e){n.mixinHtml(e);n.parseTemplate(e);n.mixinChildPosts(e);n.mixinRenderedHtmlEmitter(e);e.on("all child posts fetched",function(e){e.templateElements.forEach(i)})}function o(e,t){var r=n.makeNewMixinObject(e);i(r);r.on("final html rendered",function(e){t(null,e.renderedHtml)})}function a(e){n.mixinHtml(e);n.parseTemplate(e);n.mixinTemplateRactive(e);n.updateEmitterMixin(e);n.mixinTeardownChildren(e);n.mixinChildPosts(e);e.on("child post fetched",function(t){if(!e.torndown){a(t);e.children.push(t)}});e.on("post changed",function(t){var r=n.makeNewMixinObject(t);r.elementId=e.elementId;r.data=e.data;e.ractive.teardown();e.removeAllListeners();a(r)});e.ractive.on("teardown",function t(){e.torndown=true;e.teardownChildren();e.removeAllListeners()})}function s(e){function t(t){e.teardownChildren();u(t,e.ractive)}e.on("post changed",t);e.change=function(n){e.removeListener("post changed",t);t(n)};e.ractive.on("teardown",function(){e.teardownChildren();e.torndown=true})}function u(e,t){var r=n.makeNewMixinObject(e);r.ractive=t;n.mixinHtml(r);n.parseTemplate(r);n.updateEmitterMixin(r);n.mixinTeardownChildren(r);n.mixinChildPosts(r);s(r);r.on("child post fetched",function(e){if(!r.torndown){a(e);r.children.push(e)}});t.set("html",r.html);t.set("metadata",e.metadata);t.set("current",e.filename);return r.change}return{populateRootRactive:u,renderPost:o}}t.exports=i},{"./mixins":69}],69:[function(e,t,n){(function(n){var r=e("./templateToolbox.js");var i=r.htmlify;var o=e("events").EventEmitter;var a=e("ractive");var s=e("./updateEmitterMixin.js");var u=a.parse("{{error}}");function f(e){try{return new a({el:null,data:e.data,template:e.renderedHtml||e.html,preserveWhitespace:true}).toHTML()}catch(t){e.emit("error",t);return t.message}}function l(e){var t=Object.create(new o);if(e){t.post=e;t.postName=e.filename}return t}function c(e,t){var n=r.generatePostDiv(t.elementId);var i=e.renderedHtml||e.html;e.renderedHtml=i.replace(n,t.renderedHtml);return e}function h(e,t){var r=0;function i(){t.emit("all child posts fetched",t)}t.templateElements.forEach(function(n){e(n.postName,function(e,o){r+=1;if(e){n.err=e}else{n.post=o;t.emit("child post fetched",n)}if(r===t.templateElements.length){i()}})});if(t.templateElements.length===0){n.nextTick(i)}return t}function d(e,t){t.html=e(i(t.post));return t}function p(e){e.on("all child posts fetched",function(e){if(e.templateElements.length===0){e.renderedHtml=f(e);n.nextTick(function(){e.emit("final html rendered",e)})}else{var t=0;var r=function i(n){c(e,n);t+=1;if(t>=e.templateElements.length){e.renderedHtml=f(e);e.emit("final html rendered",e)}};e.templateElements.forEach(function(e){e.once("final html rendered",r)})}});return e}function v(e){try{e.ractive=new a({el:e.elementId,data:e.data,template:e.html,preserveWhitespace:true})}catch(t){e.ractive=new a({el:e.elementId,data:{error:t.message},template:u});e.emit("error",t)}e.emit("ractive created",e)}function g(e){e.children=[];e.teardownChildren=function t(){e.children.forEach(function(e){if(e.ractive){e.ractive.teardown()}e.torndown=true})}}t.exports=function(t,n){return{mixinHtml:d.bind(null,n),makeNewMixinObject:l,mixinRenderedHtmlEmitter:p,parseTemplate:e("./parseTemplate"),mixinChildPosts:h.bind(null,t.getPost),updateEmitterMixin:s(t),mixinTemplateRactive:v,mixinTeardownChildren:g}}}).call(this,e("GS1EMO"))},{"./parseTemplate":72,"./templateToolbox.js":73,"./updateEmitterMixin.js":74,GS1EMO:89,events:83,ractive:70}],70:[function(e,t,n){(function(e){"use strict";var n=e.Ractive;var r=undefined;var i=function(){var e,t;e={el:null,template:"",complete:null,preserveWhitespace:false,append:false,twoway:true,modifyArrays:true,lazy:false,debug:false,noIntro:false,transitionsEnabled:true,magic:false,noCssTransform:false,adapt:[],sanitize:false,stripComments:true,isolated:false,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],computed:null};
t={keys:Object.keys(e),defaults:e};return t}(r);var o=function(){if(typeof document==="undefined"){return}return document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();var a={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var s=function(e,t){if(!e){return function(e,n){if(n&&n!==t.html){throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information"}return document.createElement(e)}}else{return function(e,n){if(!n||n===t.html){return document.createElement(e)}return document.createElementNS(n,e)}}}(o,a);var u=typeof document==="object";var f=function(e){try{Object.defineProperty({},"test",{value:0});if(e){Object.defineProperty(document.createElement("div"),"test",{value:0})}return Object.defineProperty}catch(t){return function(e,t,n){e[t]=n.value}}}(u);var l=function(e,t,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}if(n){Object.defineProperties(e("div"),{test:{value:0}})}return Object.defineProperties}catch(r){return function(e,n){var r;for(r in n){if(n.hasOwnProperty(r)){t(e,r,n[r])}}}}}(s,f,u);var c=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};var h=function(e){return function(t,n,r){var i;if(typeof n!=="string"||!e(r)){throw new Error("Bad arguments")}i=+t.get(n)||0;if(!e(i)){throw new Error("Cannot add to a non-numeric value")}return t.set(n,i+r)}}(c);var d=function(e){return function(t,n){return e(this,t,n===undefined?1:+n)}}(h);var p=function(e,t){if(e===null&&t===null){return true}if(typeof e==="object"||typeof t==="object"){return false}return e===t};var v=function(){var e,t={},n={},r={};e=function(s){var u=[],f=[],l=t,c,h,d,p,v,g;d=function(e){return function(r){if(l!==t){return}c=r;l=e;h=o(l===n?u:f,c);i(h)}};p=d(n);v=d(r);s(p,v);g={then:function(n,r){var o=new e(function(e,s){var c=function(t,n,r){if(typeof t==="function"){n.push(function(n){var r;try{r=t(n);a(o,r,e,s)}catch(i){s(i)}})}else{n.push(r)}};c(n,u,e);c(r,f,s);if(l!==t){i(h)}});return o}};g["catch"]=function(e){return this.then(null,e)};return g};e.all=function(t){return new e(function(e,n){var r=[],i,o,a;if(!t.length){e(r);return}a=function(o){t[o].then(function(t){r[o]=t;if(!--i){e(r)}},n)};i=o=t.length;while(o--){a(o)}})};e.resolve=function(t){return new e(function(e){e(t)})};e.reject=function(t){return new e(function(e,n){n(t)})};return e;function i(e){setTimeout(e,0)}function o(e,t){return function(){var n;while(n=e.shift()){n(t)}}}function a(t,n,r,i){var o;if(n===t){throw new TypeError("A promise's fulfillment handler cannot return the same promise")}if(n instanceof e){n.then(r,i)}else if(n&&(typeof n==="object"||typeof n==="function")){try{o=n.then}catch(s){i(s);return}if(typeof o==="function"){var u,f,l;f=function(e){if(u){return}u=true;a(t,e,r,i)};l=function(e){if(u){return}u=true;i(e)};try{o.call(n,f,l)}catch(s){if(!u){i(s);u=true;return}}}else{r(n)}}else{r(n)}}}();var g=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function t(n){return(n||"").replace(e,".$1")}}();var m=["o","ms","moz","webkit"];var y=function(e){if(typeof window==="undefined"){return}(function(e,t,n){var r,i;if(n.requestAnimationFrame){return}for(r=0;r<e.length&&!n.requestAnimationFrame;++r){n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"]}if(!n.requestAnimationFrame){i=n.setTimeout;n.requestAnimationFrame=function(e){var n,r,o;n=Date.now();r=Math.max(0,16-(n-t));o=i(function(){e(n+r)},r);t=n+r;return o}}})(e,0,window);return window.requestAnimationFrame}(m);var b=function(){if(typeof window!=="undefined"&&window.performance&&typeof window.performance.now==="function"){return function(){return window.performance.now()}}else{return function(){return Date.now()}}}();var w=[];var E=function(e,t){var n=e.indexOf(t);if(n!==-1){e.splice(n,1)}};var _=function(e,t,n){var r,i,o,a,s,u="/* Ractive.js component styles */\n",f={},l=[];if(!t){return}e.push(function(){r=e.runloop});i=document.createElement("style");i.type="text/css";o=document.getElementsByTagName("head")[0];s=false;a=i.styleSheet;return{add:function(e){if(!e.css){return}if(!f[e._guid]){f[e._guid]=0;l.push(e.css);r.scheduleCssUpdate()}f[e._guid]+=1},remove:function(e){if(!e.css){return}f[e._guid]-=1;if(!f[e._guid]){n(l,e.css);r.scheduleCssUpdate()}},update:function(){var e;if(l.length){e=u+l.join(" ");if(a){a.cssText=e}else{i.innerHTML=e}if(!s){o.appendChild(i)}}else if(s){o.removeChild(i)}}}}(w,u,E);var x=function(e,t){var n,r,i,o,a,s;n=[];s=e._rendering?e.fragment.docFrag:e.el;r=s.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]');o=r.length;for(a=0;a<o;a+=1){i=r[a];if(i.hasAttribute("checked")||i.checked){n.push(i._ractive.value)}}return n};var k=Object.prototype.hasOwnProperty;var S=function(e){do{if(e.context){return e.context}}while(e=e.parent);return""};var O=function(e,t,n,r){var i,o='Could not resolve reference - too many "../" prefixes';e.push(function(){i=e.get});return function a(e,s,u){var f,l,c,h,d,p,v,g,m;s=t(s);if(s==="."){return r(u)}if(s.charAt(0)==="."){f=r(u);l=f?f.split("."):[];if(s.substr(0,3)==="../"){while(s.substr(0,3)==="../"){if(!l.length){throw new Error(o)}l.pop();s=s.substring(3)}l.push(s);return l.join(".")}if(!f){return s.substring(1)}return f+s}c=s.split(".");h=c.pop();d=c.length?"."+c.join("."):"";do{f=u.context;if(!f){continue}m=true;p=f+d;v=i(e,p);if(g=e._wrapped[p]){v=g.get()}if(v&&(typeof v==="object"||typeof v==="function")&&h in v){return f+"."+s}}while(u=u.parent);if(!m&&(!e._parent||e.isolated)){return s}if(n.call(e.data,s)){return s}else if(i(e,s)!==undefined){return s}}}(w,g,k,S);var T=function po(e){var t=[""],n,r,i,o;n=e.length;while(n--){r=e[n];i=r.split(".");while(i.length>1){i.pop();o=i.join(".");if(t[o]!==true){t.push(o);t[o]=true}}}return t};var A=function(){var e,t={};e=/[^\.]+$/;function n(e,t,n){var i;if(e._patternObservers.length){a(e,t,t,n,true)}for(i=0;i<e._deps.length;i+=1){r(e,t,i,n)}}n.multiple=function f(e,t,n){var i,o,s;s=t.length;if(e._patternObservers.length){i=s;while(i--){a(e,t[i],t[i],n,true)}}for(i=0;i<e._deps.length;i+=1){if(e._deps[i]){o=s;while(o--){r(e,t[o],i,n)}}}};return n;function r(e,t,n,r){var a=e._deps[n];if(!a){return}i(a[t]);if(r){return}o(e._depsMap[t],e,n)}function i(e){var t,n;if(e){n=e.length;for(t=0;t<n;t+=1){e[t].update()}}}function o(e,t,n,i){var o;if(e){o=e.length;while(o--){r(t,e[o],n,i)}}}function a(t,n,r,i,o){var u,f,l,c,h,d,p,v;u=t._patternObservers.length;while(u--){f=t._patternObservers[u];if(f.regex.test(r)){f.update(r)}}if(i){return}v=function(n){if(l=t._depsMap[n]){u=l.length;while(u--){c=l[u];h=e.exec(c)[0];d=r?r+"."+h:h;a(t,c,d)}}};if(o){p=s(r);p.forEach(v)}else{v(n)}}function s(e){var t,n,r,i,o,a;t=e.split(".");n=u(t.length);o=[];r=function(e,n){return e?"*":t[n]};i=n.length;while(i--){a=n[i].map(r).join(".");if(!o[a]){o.push(a);o[a]=true}}return o}function u(e){var n="",r,i,o,a,s;if(!t[e]){o=[];while(n.length<e){n+=1}r=parseInt(n,2);a=function(e){return e==="1"};for(s=0;s<=r;s+=1){i=s.toString(2);while(i.length<e){i="0"+i}o[s]=Array.prototype.map.call(i,a)}t[e]=o}return t[e]}}();var N=function(e){var t,n,r,i;t=function(e,t){var o=[];o.detachQueue=[];o.remove=r;o.init=i;o._check=n;o._callback=e;o._previous=t;if(t){t.push(o)}return o};n=function(){var e;if(this._ready&&!this.length){while(e=this.detachQueue.pop()){e.detach()}if(typeof this._callback==="function"){this._callback()}if(this._previous){this._previous.remove(this)}}};r=function(t){e(this,t);this._check()};i=function(){this._ready=true;this._check()};return t}(E);var L=function(e,t,n,r,i,o,a,s){e.push(function(){f=e.get;l=e.set});var u,f,l,c=false,h=false,d,p=0,v=null,g=[],m=[],y=[],b=[],w=[],E=[],_=[],x=[],k=[],S={},O=[],T=[],A=[],N=[],L;u={start:function(e,t){this.addInstance(e);if(!h){p+=1;L=s(t,L)}},end:function(){if(h){j();return}if(!--p){h=true;C();h=false;R()}L.init();L=L._previous},trigger:function(){if(p||h){j();return}h=true;C();h=false;R()},focus:function(e){v=e},addInstance:function(e){if(e&&!N[e._guid]){N.push(e);N[N._guid]=true}},addLiveQuery:function(e){g.push(e)},addDecorator:function(e){m.push(e)},addTransition:function(e){e._manager=L;L.push(e);y.push(e)},addObserver:function(e){b.push(e)},addAttribute:function(e){w.push(e)},addBinding:function(e){e.active=true;E.push(e)},scheduleCssUpdate:function(){if(!p&&!h){t.update()}else{d=true}},addEvaluator:function(e){c=true;_.push(e)},addComputation:function(e){c=true;x.push(e)},addSelectValue:function(e){c=true;k.push(e)},addCheckbox:function(e){if(!S[e.keypath]){c=true;O.push(e)}},addRadio:function(e){c=true;T.push(e)},addUnresolved:function(e){c=true;A.push(e)},removeUnresolved:function(e){n(A,e)},detachWhenReady:function(e){L.detachQueue.push(e)}};e.runloop=u;return u;function R(){var e,n,r;if(v){v.focus();v=null}while(e=w.pop()){e.update().deferred=false}while(e=g.pop()){e._sort()}while(e=m.pop()){e.init()}while(e=y.pop()){e.init()}while(e=b.pop()){e.update()}while(e=E.pop()){e.active=false}while(e=N.pop()){N[e._guid]=false;if(e._changes.length){r={};while(n=e._changes.pop()){r[n]=f(e,n)}e.fire("change",r)}}if(d){t.update();d=false}}function C(){var e,t,n;n=N.length;while(n--){e=N[n];if(e._changes.length){t=o(e._changes);a.multiple(e,t,true)}}j();while(c){c=false;while(e=x.pop()){e.update()}while(e=_.pop()){e.update().deferred=false}while(e=k.pop()){e.deferredUpdate()}while(e=O.pop()){l(e.root,e.keypath,r(e.root,e.keypath))}while(e=T.pop()){e.update()}}}function j(){var e,t,n;if(!A.length){return}e=A.splice(0,A.length);while(t=e.pop()){if(t.keypath){continue}n=i(t.root,t.ref,t.parentFragment);if(n!==undefined){t.resolve(n)}else{A.push(t)}}}}(w,_,E,x,O,T,A,N);var R=function(e,t,n){var r=[];var i={tick:function(){var o,a,s;s=t();n.start();for(o=0;o<r.length;o+=1){a=r[o];if(!a.tick(s)){r.splice(o--,1)}}n.end();if(r.length){e(i.tick)}else{i.running=false}},add:function(t){r.push(t);if(!i.running){i.running=true;e(i.tick)}},abort:function(e,t){var n=r.length,i;while(n--){i=r[n];if(i.root===t&&i.keypath===e){i.stop()}}}};return i}(y,b,L);var C=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}();var j=function(e){return function(t){var n,r;if(!t||typeof t!=="object"){return t}if(e(t)){return t.slice()}n={};for(r in t){if(t.hasOwnProperty(r)){n[r]=t[r]}}return n}}(C);var I={};var M=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length){return[-1]}return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}};var P=function(e,t){var n,r,i,o;if(!t){return null}n=+(t[0]<0?e.length+t[0]:t[0]);r=Math.max(0,t.length-2);i=t[1]!==undefined?t[1]:e.length-n;i=Math.min(i,e.length-n);o=r-i;return{start:n,balance:o,added:r,removed:i}};var D={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40};var F=function vo(e,t,n){var r,i;if(!n){if(i=e._wrapped[t]){if(i.teardown()!==false){e._wrapped[t]=null}}}e._cache[t]=undefined;if(r=e._cacheMap[t]){while(r.length){vo(e,r.pop())}}};var B=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}();var U=function(e,t,n,r,i){var o;e.push(function(){o=e.get});function a(e,s,u,f){var l,c,h,d,p,v,g,m;if(t(e._cache[s],u)){return}p=e._computations[s];v=e._wrapped[s];g=e._evaluators[s];if(p&&!p.setting){p.set(u)}if(v&&v.reset){m=v.reset(u)!==false;if(m){u=v.get()}}if(g){g.value=u}if(!p&&!g&&!m){l=s.split(".");c=l.pop();h=l.join(".");v=e._wrapped[h];if(v&&v.set){v.set(c,u)}else{d=v?v.get():o(e,h);if(!d){d=n(c);a(e,h,d,true)}d[c]=u}}r(e,s,m);if(!f){e._changes.push(s);i(e,s)}}e.set=a;return a}(w,p,B,F,A);var W=function(e,t,n,r){return function(i,o,a,s){var u,f,l,c,h,d,p,v,g,m;u=i.root;f=i.keypath;u._changes.push(f);if(a==="sort"||a==="reverse"){r(u,f,o);return}if(!s){return}l=!s.balance?s.added:o.length-Math.min(s.balance,0);for(h=s.start;h<l;h+=1){t(u,f+"."+h)}c=function(t){if(t.keypath===f&&t.type===e.SECTION&&!t.inverted&&t.docFrag){t.splice(s)}else{t.update()}};u._deps.forEach(function(e){var t=e[f];if(t){t.forEach(c)}});if(s.added&&s.removed){d=Math.max(s.added,s.removed);p=s.start;v=p+d;m=s.added===s.removed;for(h=p;h<v;h+=1){g=f+"."+h;n(u,g)}}if(!m){t(u,f+".length");n(u,f+".length",true)}}}(D,F,A,U);var q=function(e,t,n,r,i){var o=[],a=["pop","push","reverse","shift","sort","splice","unshift"],s,u,f;a.forEach(function(a){var s=function(){var t,o,s,u,f;t=n(this,a,Array.prototype.slice.call(arguments));o=r(this,t);s=Array.prototype[a].apply(this,arguments);this._ractive.setting=true;f=this._ractive.wrappers.length;while(f--){u=this._ractive.wrappers[f];e.start(u.root);i(u,this,a,o);e.end()}this._ractive.setting=false;return s};t(o,a,{value:s})});s={};if(s.__proto__){u=function(e){e.__proto__=o};f=function(e){e.__proto__=Array.prototype}}else{u=function(e){var n,r;n=a.length;while(n--){r=a[n];t(e,r,{value:o[r],configurable:true})}};f=function(e){var t;t=a.length;while(t--){delete e[a[t]]}}}u.unpatch=f;return u}(L,f,M,P,W);var V=function(e,t,n){var r,i,o;r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}};i=function(t,r,i){this.root=t;this.value=r;this.keypath=i;if(!r._ractive){e(r,"_ractive",{value:{wrappers:[],instances:[],setting:false},configurable:true});n(r)}if(!r._ractive.instances[t._guid]){r._ractive.instances[t._guid]=0;r._ractive.instances.push(t)}r._ractive.instances[t._guid]+=1;r._ractive.wrappers.push(this)};i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,a;e=this.value;t=e._ractive;r=t.wrappers;i=t.instances;if(t.setting){return false}a=r.indexOf(this);if(a===-1){throw new Error(o)}r.splice(a,1);if(!r.length){delete e._ractive;n.unpatch(this.value)}else{i[this.root._guid]-=1;if(!i[this.root._guid]){a=i.indexOf(this.root);if(a===-1){throw new Error(o)}i.splice(a,1)}}}};o="Something went wrong in a rather interesting way";return r}(f,C,q);var z=function(e,t,n,r,i){var o,a;try{Object.defineProperty({},"test",{value:0})}catch(s){return false}o={filter:function(e,t,r){var i,o,a,s,u;if(!t){return false}i=t.split(".");o=i.pop();a=i.join(".");if((s=r._wrapped[a])&&!s.magic){return false}u=r.get(a);if(n(u)&&/^[0-9]+$/.test(o)){return false}return u&&(typeof u==="object"||typeof u==="function")},wrap:function(e,t,n){return new a(e,t,n)}};a=function(e,t,n){var r,i,o,a;this.magic=true;this.ractive=e;this.keypath=n;this.value=t;r=n.split(".");this.prop=r.pop();i=r.join(".");this.obj=i?e.get(i):e.data;o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(o&&o.set&&(a=o.set._ractiveWrappers)){if(a.indexOf(this)===-1){a.push(this)}return}u(this,t,o)};a.prototype={get:function(){return this.value},reset:function(e){if(this.updating){return}this.updating=true;this.obj[this.prop]=e;r(this.ractive,this.keypath);this.updating=false},set:function(e,n){if(this.updating){return}if(!this.obj[this.prop]){this.updating=true;this.obj[this.prop]=t(e);this.updating=false}this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating){return false}e=Object.getOwnPropertyDescriptor(this.obj,this.prop);t=e&&e.set;if(!t){return}r=t._ractiveWrappers;i=r.indexOf(this);if(i!==-1){r.splice(i,1)}if(!r.length){n=this.obj[this.prop];Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:true,enumerable:true,configurable:true});this.obj[this.prop]=n}}};function u(t,n,o){var a,s,u,f,l,c;a=t.obj;s=t.prop;if(o&&!o.configurable){if(s==="length"){return}throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}if(o){u=o.get;f=o.set}l=u||function(){return n};c=function(e){if(f){f(e)}n=u?u():e;c._ractiveWrappers.forEach(h)};function h(t){var o,a;t.value=n;if(t.updating){return}a=t.ractive;o=t.keypath;t.updating=true;e.start(a);a._changes.push(o);r(a,o);i(a,o);e.end();t.updating=false}c._ractiveWrappers=[t];Object.defineProperty(a,s,{get:l,set:c,enumerable:true,configurable:true})}return o}(L,B,C,F,A);var H=function(e,t){if(!e){return false}var n,r;n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}};r=function(n,r,i){this.value=r;this.magic=true;this.magicWrapper=e.wrap(n,r,i);this.arrayWrapper=t.wrap(n,r,i)};r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}};return n}(z,V);var G=function(e,t,n,r){var i={};return function s(i,o,u,f){var l,c,h,d;l=i.adapt.length;for(c=0;c<l;c+=1){h=i.adapt[c];if(typeof h==="string"){if(!e[h]){throw new Error('Missing adaptor "'+h+'"')}h=i.adapt[c]=e[h]}if(h.filter(u,o,i)){d=i._wrapped[o]=h.wrap(i,u,o,a(o));d.value=u;return u}}if(!f){if(i.magic){if(r.filter(u,o,i)){i._wrapped[o]=r.wrap(i,u,o)}else if(n.filter(u,o,i)){i._wrapped[o]=n.wrap(i,u,o)}}else if(i.modifyArrays&&t.filter(u,o,i)){i._wrapped[o]=t.wrap(i,u,o)}}return u};function o(e,t){var n={},r;if(!t){return e}t+=".";for(r in e){if(e.hasOwnProperty(r)){n[t+r]=e[r]}}return n}function a(e){var t;if(!i[e]){t=e?e+".":"";i[e]=function(n,r){var i;if(typeof n==="string"){i={};i[t+n]=r;return i}if(typeof n==="object"){return t?o(n,e):n}}}return i[e]}}(I,V,z,H);var $=function(){return function t(n){var r,i,o,a,s;o=n.root;a=n.keypath;s=n.priority;r=o._deps[s]||(o._deps[s]={});i=r[a]||(r[a]=[]);i.push(n);n.registered=true;if(!a){return}e(o,a)};function e(e,t){var n,r,i;n=t.split(".");while(n.length){n.pop();r=n.join(".");i=e._depsMap[r]||(e._depsMap[r]=[]);if(i[t]===undefined){i[t]=0;i[i.length]=t}i[t]+=1;t=r}}}();var K=function(){return function t(n){var r,i,o,a,s;o=n.root;a=n.keypath;s=n.priority;r=o._deps[s][a];i=r.indexOf(n);if(i===-1||!n.registered){throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks")}r.splice(i,1);n.registered=false;if(!a){return}e(o,a)};function e(e,t){var n,r,i;n=t.split(".");while(n.length){n.pop();r=n.join(".");i=e._depsMap[r];i[t]-=1;if(!i[t]){i.splice(i.indexOf(t),1);i[t]=undefined}t=r}}}();var J=function(e,t,n,r,i,o){var a,s;e.push(function(){a=e.get;s=e.set});var u=function(e,t,n,r,o){this.root=e;this.keypath=t;this.priority=o;this.otherInstance=n;this.otherKeypath=r;i(this);this.value=a(this.root,this.keypath)};u.prototype={update:function(){var e;if(this.updating||this.counterpart&&this.counterpart.updating){return}e=a(this.root,this.keypath);if(n(e)&&e._ractive&&e._ractive.setting){return}if(!r(e,this.value)){this.updating=true;t.addInstance(this.otherInstance);s(this.otherInstance,this.otherKeypath,e);this.value=e;this.updating=false}},reassign:function(e){o(this);o(this.counterpart);this.keypath=e;this.counterpart.otherKeypath=e;i(this);i(this.counterpart)},teardown:function(){o(this)}};return function f(e,t,n,r){var i,o,a,s,f,l;i=n+"="+r;a=e.bindings;if(a[i]){return}a[i]=true;o=e.instance;s=e.parentFragment.priority;f=new u(t,n,o,r,s);a.push(f);if(o.twoway){l=new u(o,r,t,n,1);a.push(l);f.counterpart=l;l.counterpart=f}}}(w,L,C,p,$,K);var Y=function(e,t,n){var r;e.push(function(){r=e.get});return function o(e,t){var n,o,a,s,u;n=e._parent;o=e.component.parentFragment;if(o.indexRefs&&(u=o.indexRefs[t])!==undefined){e.component.indexRefBindings[t]=t;return u}do{if(!o.context){continue}a=o.context+"."+t;s=r(n,a);if(s!==undefined){i(n,e,a,t,s);return s}}while(o=o.parent);s=r(n,t);if(s!==undefined){i(n,e,t,t,s);return s}};function i(e,r,i,o,a){n(r,o,a,true);t(r.component,e,i,o)}}(w,J,U);var Q={FAILED_LOOKUP:true};var X=function(e,t,n,r,i,o){function a(e,t,n){var a=e._cache,u,f,l,c;if(a[t]===undefined){if(f=e._computations[t]){u=f.value}else if(l=e._wrapped[t]){u=l.value}else if(!t){r(e,"",e.data);u=e.data}else if(c=e._evaluators[t]){u=c.value}else{u=s(e,t)}a[t]=u}else{u=a[t]}if(u===o){if(e._parent&&!e.isolated){u=i(e,t,n)}else{u=undefined}}if(n&&n.evaluateWrapped&&(l=e._wrapped[t])){u=l.get()}return u}e.get=a;return a;function s(e,i){var s,u,f,l,c,h,d,p;s=i.split(".");u=s.pop();f=s.join(".");l=a(e,f);if(d=e._wrapped[f]){l=d.get()}if(l===null||l===undefined){return}if(!(c=e._cacheMap[f])){e._cacheMap[f]=[i]}else{if(c.indexOf(i)===-1){c.push(i)}}if(typeof l==="object"&&!(u in l)){return e._cache[i]=o}p=!t.call(l,u);h=p?n(l[u]):l[u];h=r(e,i,h,false);e._cache[i]=h;return h}}(w,k,j,G,Y,Q);var Z=function(){if(typeof console!=="undefined"&&typeof console.warn==="function"&&typeof console.warn.apply==="function"){return function(){console.warn.apply(console,arguments)}}return function(){}}();var et=function(){var e=Object.prototype.toString;return function(t){return typeof t==="object"&&e.call(t)==="[object Object]"}}();var tt=function(e,t,n,r,i){var o,a,s;e.push(function(){a=e.interpolate});s=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/;o={number:function(e,t){var n;if(!i(e)||!i(t)){return null}e=+e;t=+t;n=t-e;if(!n){return function(){return e}}return function(t){return e+t*n}},array:function(e,t){var r,i,o,s;if(!n(e)||!n(t)){return null}r=[];i=[];s=o=Math.min(e.length,t.length);while(s--){i[s]=a(e[s],t[s])}for(s=o;s<e.length;s+=1){r[s]=e[s]}for(s=o;s<t.length;s+=1){r[s]=t[s]}return function(e){var t=o;while(t--){r[t]=i[t](e)}return r}},object:function(e,n){var i,o,s,u,f;if(!r(e)||!r(n)){return null}i=[];u={};s={};for(f in e){if(t.call(e,f)){if(t.call(n,f)){i.push(f);s[f]=a(e[f],n[f])}else{u[f]=e[f]}}}for(f in n){if(t.call(n,f)&&!t.call(e,f)){u[f]=n[f]}}o=i.length;return function(e){var t=o,n;while(t--){n=i[t];u[n]=s[n](e)}return u}},cssLength:function(e,t){var n,r,i,o,a,u,f,l;if(e!==0&&typeof e!=="string"||t!==0&&typeof t!=="string"){return null}n=s.exec(e);r=s.exec(t);i=n?n[2]:"";o=r?r[2]:"";if(i&&o&&i!==o){return null}f=i||o;a=n?+n[1]:0;u=r?+r[1]:0;l=u-a;if(!l){return function(){return a+f}}return function(e){return a+e*l+f}}};return o}(w,k,C,et,c);var nt=function(e,t,n){var r=function(e,r,o,a){if(e===r){return i(r)}if(a){if(o.interpolators[a]){return o.interpolators[a](e,r)||i(r)}t('Missing "'+a+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,r)||n.array(e,r)||n.object(e,r)||n.cssLength(e,r)||i(r)};e.interpolate=r;return r;function i(e){return function(){return e}}}(w,Z,tt);var rt=function(e,t,n,r){var i=function(e){var t;this.startTime=Date.now();for(t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}this.interpolator=n(this.from,this.to,this.root,this.interpolator);this.running=true};i.prototype={tick:function(){var n,i,o,a,s,u;u=this.keypath;if(this.running){a=Date.now();n=a-this.startTime;if(n>=this.duration){if(u!==null){t.start(this.root);r(this.root,u,this.to);t.end()}if(this.step){this.step(1,this.to)}this.complete(this.to);s=this.root._animations.indexOf(this);if(s===-1){e("Animation was not found")}this.root._animations.splice(s,1);this.running=false;return false}i=this.easing?this.easing(n/this.duration):n/this.duration;if(u!==null){o=this.interpolator(i);t.start(this.root);r(this.root,u,o);t.end()}if(this.step){this.step(i,o)}return true}return false},stop:function(){var t;this.running=false;t=this.root._animations.indexOf(this);if(t===-1){e("Animation was not found")}this.root._animations.splice(t,1)}};return i}(Z,L,nt,U);var it=function(e,t,n,r,i,o){var a=function(){},s={stop:a};return function(e,n,r){var i,o,s,f,l,c,h,d,p,v,g,m,y,b;i=new t(function(e){o=e});if(typeof e==="object"){r=n||{};c=r.easing;h=r.duration;l=[];d=r.step;p=r.complete;if(d||p){g={};r.step=null;r.complete=null;v=function(e){return function(t,n){g[e]=n}}}for(s in e){if(e.hasOwnProperty(s)){if(d||p){m=v(s);r={easing:c,duration:h};if(d){r.step=m}}r.complete=p?m:a;l.push(u(this,s,e[s],r))}}if(d||p){b={easing:c,duration:h};if(d){b.step=function(e){d(e,g)}}if(p){i.then(function(e){p(e,g)})}b.complete=o;y=u(this,null,null,b);l.push(y)}return{stop:function(){var e;while(e=l.pop()){e.stop()}if(y){y.stop()}}}}r=r||{};if(r.complete){i.then(r.complete)}r.complete=o;f=u(this,e,n,r);i.stop=function(){f.stop()};return i};function u(t,a,u,f){var l,c,h,d;if(a){a=n(a)}if(a!==null){d=i(t,a)}r.abort(a,t);if(e(d,u)){if(f.complete){f.complete(f.to)}return s}if(f.easing){if(typeof f.easing==="function"){l=f.easing}else{l=t.easing[f.easing]}if(typeof l!=="function"){l=null}}c=f.duration===undefined?400:f.duration;h=new o({keypath:a,from:d,to:u,root:t,duration:c,easing:l,interpolator:f.interpolator,step:f.step,complete:f.complete});r.add(h);t._animations.push(h);return h}}(p,v,g,R,X,rt);var ot=function(){return this.fragment.detach()};var at=function(e){if(!this.el){return null}return this.fragment.find(e)};var st=function(e,t,n){var r,i,o,a,s,u,f;if(!e){return}r=n("div");i=["matches","matchesSelector"];f=function(e){return function(t,n){return t[e](n)}};s=i.length;while(s--){o=i[s];if(r[o]){return f(o)}u=t.length;while(u--){a=t[s]+o.substr(0,1).toUpperCase()+o.substring(1);if(r[a]){return f(a)}}}return function(e,t){var n,r;n=(e.parentNode||e.document).querySelectorAll(t);r=n.length;while(r--){if(n[r]===e){return true}}return false}}(u,m,s);var ut=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r){this.push(t.node||t.instance);if(!n){this._makeDirty()}return true}}}(st);var ft=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];t=this.selector;n=e.indexOf(t);if(n!==-1){e.splice(n,1);e[t]=null}};var lt=function(){return function(e,n){var r,i,o,a,s,u,f,l,c,h;r=t(e.component||e._ractive.proxy);i=t(n.component||n._ractive.proxy);o=r[r.length-1];a=i[i.length-1];while(o&&o===a){r.pop();i.pop();s=o;o=r[r.length-1];a=i[i.length-1]}o=o.component||o;a=a.component||a;c=o.parentFragment;h=a.parentFragment;if(c===h){u=c.items.indexOf(o);f=h.items.indexOf(a);return u-f||r.length-i.length}if(l=s.fragments){u=l.indexOf(c);f=l.indexOf(h);return u-f||r.length-i.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")};function e(e){var t;if(t=e.parentFragment){return t.owner}if(e.component&&(t=e.component.parentFragment)){return t.owner}}function t(t){var n,r;n=[t];r=e(t);while(r){n.push(r);r=e(r)}return n}}();var ct=function(e){return function(t,n){var r;if(t.compareDocumentPosition){r=t.compareDocumentPosition(n);return r&2?1:-1}return e(t,n)}}(lt);var ht=function(e,t){return function(){this.sort(this._isComponentQuery?t:e);this._dirty=false}}(ct,lt);var dt=function(e){return function(){if(!this._dirty){e.addLiveQuery(this);this._dirty=true}}}(L);var pt=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);if(t!==-1){this.splice(t,1)}};var vt=function(e,t,n,r,i,o){return function(a,s,u,f){var l=[];e(l,{selector:{value:s},live:{value:u},_isComponentQuery:{value:f},_test:{value:t}});if(!u){return l}e(l,{cancel:{value:n},_root:{value:a},_sort:{value:r},_makeDirty:{value:i},_remove:{value:o},_dirty:{value:false,writable:true}});return l}}(l,ut,ft,ht,dt,pt);var gt=function(e){return function(t,n){var r,i;if(!this.el){return[]}n=n||{};r=this._liveQueries;if(i=r[t]){return n&&n.live?i:i.slice()}i=e(this,t,!!n.live,false);if(i.live){r.push(t);r[t]=i}this.fragment.findAll(t,i);return i}}(vt);var mt=function(e){return function(t,n){var r,i;n=n||{};r=this._liveComponentQueries;if(i=r[t]){return n&&n.live?i:i.slice()}i=e(this,t,!!n.live,true);if(i.live){r.push(t);r[t]=i}this.fragment.findAllComponents(t,i);return i}}(vt);var yt=function(e){return this.fragment.findComponent(e)};var bt=function(e){var t,n,r,i=this._subs[e];if(!i){return}t=Array.prototype.slice.call(arguments,1);for(n=0,r=i.length;n<r;n+=1){i[n].apply(this,t)}};var wt=function(e,t,n,r){var i,o={};e.push(function(){i=e.get});var a=function(e,t){this.root=e;this.ref=t;this.parentFragment=o;e._unresolvedImplicitDependencies[t]=true;e._unresolvedImplicitDependencies.push(this);n.addUnresolved(this)};a.prototype={resolve:function(){var e=this.root;r(e,this.ref);e._unresolvedImplicitDependencies[this.ref]=false;t(e._unresolvedImplicitDependencies,this)},teardown:function(){n.removeUnresolved(this)}};return a}(w,E,L,A);var Et=function(e,t,n){var r={isTopLevel:true};return function i(o){var a;o=e(o);a=t(this,o,r);if(this._captured&&this._captured[o]!==true){this._captured.push(o);this._captured[o]=true;if(a===undefined&&this._unresolvedImplicitDependencies[o]!==true){new n(this,o)}}return a}}(g,X,wt);var _t=function(e){var t;if(typeof window==="undefined"||!document||!e){return null}if(e.nodeType){return e}if(typeof e==="string"){t=document.getElementById(e);if(!t&&document.querySelector){t=document.querySelector(e)}if(t&&t.nodeType){return t}}if(e[0]&&e[0].nodeType){return e[0]}return null};var xt=function(e){return function(t,n){t=e(t);n=e(n)||null;if(!t){throw new Error("You must specify a valid target to insert into")}t.insertBefore(this.detach(),n);this.fragment.pNode=this.el=t}}(_t);var kt=function(e,t){var n,r,i,o;n={};r=0;i=e.map(function(e,i){var a,s,u;s=r;u=t.length;do{a=t.indexOf(e,s);if(a===-1){o=true;return-1}s=a+1}while(n[a]&&s<u);if(a===r){r+=1}if(a!==i){o=true}n[a]=true;return a});i.unchanged=!o;return i};var St=function(e,t){return function(n,r,i,o){var a;n._changes.push(r);a=function(t){if(t.type===e.REFERENCE){t.update()}else if(t.keypath===r&&t.type===e.SECTION&&!t.inverted&&t.docFrag){t.merge(i)}else{t.update()}};n._deps.forEach(function(e){var t=e[r];if(t){t.forEach(a)}});if(!o){t(n,r+".length",true)}}}(D,A);var Ot=function(e,t,n,r,i,o,a){var s={};return function l(s,u,c){var h,d,p,v,g,m,y,b;h=this.get(s);if(!n(h)||!n(u)){return this.set(s,u,c&&c.complete)}g=h.length===u.length;if(c&&c.compare){v=f(c.compare);try{d=h.map(v);p=u.map(v)}catch(w){if(this.debug){throw w}else{t("Merge operation: comparison failed. Falling back to identity checking")}d=h;p=u}}else{d=h;p=u}m=o(d,p);y=new r(function(e){b=e});e.start(this,b);i(this,s,u,true);a(this,s,m,g);e.end();if(c&&c.complete){y.then(c.complete)}return y};function u(e){return JSON.stringify(e)}function f(e){if(e===true){return u}if(typeof e==="string"){if(!s[e]){s[e]=function(t){return t[e]}}return s[e]}if(typeof e==="function"){return e}throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}}(L,Z,C,v,U,kt,St);var Tt=function(e,t,n){var r=function(e,t,n,r){var i=this;this.root=e;this.keypath=t;this.callback=n;this.defer=r.defer;this.debug=r.debug;this.proxy={update:function(){i.reallyUpdate()}};this.priority=0;this.context=r&&r.context?r.context:e};r.prototype={init:function(e){if(e!==false){this.update()}else{this.value=n(this.root,this.keypath)}},update:function(){if(this.defer&&this.ready){e.addObserver(this.proxy);return}this.reallyUpdate()},reallyUpdate:function(){var e,r;e=this.value;r=n(this.root,this.keypath);this.value=r;if(this.updating){return}this.updating=true;if(!t(r,e)||!this.ready){try{this.callback.call(this.context,r,e,this.keypath)}catch(i){if(this.debug||this.root.debug){throw i}}}this.updating=false}};return r}(L,p,X);var At=function(e){return function(t,n){var r,i,o,a,s,u,f;r=n.split(".");a=[];u=function(n){var r,i;r=t._wrapped[n]?t._wrapped[n].get():t.get(n);for(i in r){if(r.hasOwnProperty(i)&&(i!=="_ractive"||!e(r))){s.push(n+"."+i)}}};f=function(e){return e+"."+i};while(i=r.shift()){if(i==="*"){s=[];
a.forEach(u);a=s}else{if(!a[0]){a[0]=i}else{a=a.map(f)}}}o={};a.forEach(function(e){o[e]=t.get(e)});return o}}(C);var Nt=function(e,t,n,r){var i,o=/\*/;i=function(e,t,n,r){this.root=e;this.callback=n;this.defer=r.defer;this.debug=r.debug;this.keypath=t;this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$");this.values={};if(this.defer){this.proxies=[]}this.priority="pattern";this.context=r&&r.context?r.context:e};i.prototype={init:function(e){var t,n;t=r(this.root,this.keypath);if(e!==false){for(n in t){if(t.hasOwnProperty(n)){this.update(n)}}}else{this.values=t}},update:function(t){var n;if(o.test(t)){n=r(this.root,t);for(t in n){if(n.hasOwnProperty(t)){this.update(t)}}return}if(this.defer&&this.ready){e.addObserver(this.getProxy(t));return}this.reallyUpdate(t)},reallyUpdate:function(e){var r=n(this.root,e);if(this.updating){this.values[e]=r;return}this.updating=true;if(!t(r,this.values[e])||!this.ready){try{this.callback.call(this.context,r,this.values[e],e)}catch(i){if(this.debug||this.root.debug){throw i}}this.values[e]=r}this.updating=false},getProxy:function(e){var t=this;if(!this.proxies[e]){this.proxies[e]={update:function(){t.reallyUpdate(e)}}}return this.proxies[e]}};return i}(L,p,X,At);var Lt=function(e,t,n,r,i){var o=/\*/,a={};return function s(u,f,l,c){var h,d;f=e(f);c=c||a;if(o.test(f)){h=new i(u,f,l,c);u._patternObservers.push(h);d=true}else{h=new r(u,f,l,c)}t(h);h.init(c.init);h.ready=true;return{cancel:function(){var e;if(d){e=u._patternObservers.indexOf(h);if(e!==-1){u._patternObservers.splice(e,1)}}n(h)}}}}(g,$,K,Tt,Nt);var Rt=function(e,t){return function n(r,i,o){var a,s,u,f;if(e(r)){o=i;s=r;a=[];for(r in s){if(s.hasOwnProperty(r)){i=s[r];a.push(this.observe(r,i,o))}}return{cancel:function(){while(a.length){a.pop().cancel()}}}}if(typeof r==="function"){o=i;i=r;r="";return t(this,r,i,o)}u=r.split(" ");if(u.length===1){return t(this,r,i,o)}a=[];f=u.length;while(f--){r=u[f];if(r){a.push(t(this,r,i,o))}}return{cancel:function(){while(a.length){a.pop().cancel()}}}}}(et,Lt);var Ct=function(e,t){var n,r;if(!t){if(!e){for(e in this._subs){delete this._subs[e]}}else{this._subs[e]=[]}}n=this._subs[e];if(n){r=n.indexOf(t);if(r!==-1){n.splice(r,1)}}};var jt=function(e,t){var n=this,r,i;if(typeof e==="object"){r=[];for(i in e){if(e.hasOwnProperty(i)){r.push(this.on(i,e[i]))}}return{cancel:function(){var e;while(e=r.pop()){e.cancel()}}}}if(!this._subs[e]){this._subs[e]=[t]}else{this._subs[e].push(t)}return{cancel:function(){n.off(e,t)}}};var It=function(){var e;try{Object.create(null);e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;if(t===null){return{}}e.prototype=t;r=new e;if(n){Object.defineProperties(r,n)}return r}}()}return e}();var Mt=function(e,t){return function n(r,i){var o,a,s,u,f;r.owner=i.owner;s=r.parent=r.owner.parentFragment;r.root=i.root;r.pNode=i.pNode;r.pElement=i.pElement;r.context=i.context;if(r.owner.type===e.SECTION){r.index=i.index}if(s){u=s.indexRefs;if(u){r.indexRefs=t(null);for(f in u){r.indexRefs[f]=u[f]}}}r.priority=s?s.priority+1:1;if(i.indexRef){if(!r.indexRefs){r.indexRefs={}}r.indexRefs[i.indexRef]=i.index}r.items=[];o=i.descriptor?i.descriptor.length:0;for(a=0;a<o;a+=1){r.items[r.items.length]=r.createItem({parentFragment:r,pElement:i.pElement,descriptor:i.descriptor[a],index:a})}}}(D,It);var Pt=function go(e,t){return e.substr(0,t.length+1)===t+"."};var Dt=function(e){return function t(n,r){return n===r||e(n,r)}}(Pt);var Ft=function(e){return function t(n,r,i){if(n===r){return i}if(e(n,r)){return n.replace(r+".",i+".")}}}(Pt);var Bt=function(e,t){return function n(r,i,o,a){if(!r[i]||e(r[i],a)){return}r[i]=t(r[i],o,a)}}(Dt,Ft);var Ut=function(e){return function t(n,r,i,o){if(this.html!==undefined){return}e(this,"context",i,o);if(this.indexRefs&&this.indexRefs[n]!==undefined&&this.indexRefs[n]!==r){this.indexRefs[n]=r}this.items.forEach(function(e){e.reassign(n,r,i,o)})}}(Bt);var Wt=function(e,t){return{init:e,reassign:t}}(Mt,Ut);var qt=function(e,t){var n={},r,i;try{t("table").innerHTML="foo"}catch(o){r=true;i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,n,o,s){var u,f=[],l;if(t){if(r&&(l=i[n])){u=a("DIV");u.innerHTML=l[0]+t+l[1];u=u.querySelector(".x")}else if(o===e.svg){u=a("DIV");u.innerHTML='<svg class="x">'+t+"</svg>";u=u.querySelector(".x")}else{u=a(n);u.innerHTML=t}while(u.firstChild){f.push(u.firstChild);s.appendChild(u.firstChild)}}return f};function a(e){return n[e]||(n[e]=t(e))}}(a,s);var Vt=function(){var e=this.node,t;if(e&&(t=e.parentNode)){t.removeChild(e);return e}};var zt=function(e,t){var n,r,i;r=/</g;i=/>/g;n=function(t,n){this.type=e.TEXT;this.descriptor=t.descriptor;if(n){this.node=document.createTextNode(t.descriptor);n.appendChild(this.node)}};n.prototype={detach:t,reassign:function(){},teardown:function(e){if(e){this.detach()}},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(r,"&lt;").replace(i,"&gt;")}};return n}(D,Vt);var Ht=function(e,t){return function(n){if(!n.keypath){e.removeUnresolved(n)}else{t(n)}}}(L,K);var Gt=function(e){var t=function(t,n,r,i){this.root=t;this.ref=n;this.parentFragment=r;this.resolve=i;e.addUnresolved(this)};t.prototype={teardown:function(){e.removeUnresolved(this)}};return t}(L);var $t=function(e,t,n,r,i){var o,a;a=/this/;o=function(t,n,i,o,a){var u;this.evaluator=i;this.keypath=n;this.root=t;this.argNum=o;this.type=e.REFERENCE;this.priority=a;u=t.get(n);if(typeof u==="function"){u=s(u,t,i)}this.value=i.values[o]=u;r(this)};o.prototype={update:function(){var e=this.root.get(this.keypath);if(typeof e==="function"&&!e._nowrap){e=s(e,this.root,this.evaluator)}if(!t(e,this.value)){this.evaluator.values[this.argNum]=e;this.evaluator.bubble();this.value=e}},teardown:function(){i(this)}};return o;function s(e,t,r){var i,o,s;if(!a.test(e.toString())){n(e,"_nowrap",{value:true});return e}if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,a;n=t._captured;if(!n){t._captured=[]}r=e.apply(t,arguments);if(t._captured.length){i=o.length;while(i--){a=o[i];a.updateSoftDependencies(t._captured)}}t._captured=n;return r},writable:true});for(i in e){if(e.hasOwnProperty(i)){e["_"+t._guid][i]=e[i]}}e["_"+t._guid+"_evaluators"]=[]}o=e["_"+t._guid+"_evaluators"];s=o.indexOf(r);if(s===-1){o.push(r)}return e["_"+t._guid]}}(D,p,f,$,K);var Kt=function(e,t,n){var r=function(e,n,r){this.root=e;this.keypath=n;this.priority=r.priority;this.evaluator=r;t(this)};r.prototype={update:function(){var t=this.root.get(this.keypath);if(!e(t,this.value)){this.evaluator.bubble();this.value=t}},teardown:function(){n(this)}};return r}(p,$,K);var Jt=function(e,t,n,r,i,o,a,s){var u,f={};u=function(e,t,n,r,i,o){var s=this;s.root=e;s.uniqueString=n;s.keypath=t;s.priority=o;s.fn=l(r,i.length);s.values=[];s.refs=[];i.forEach(function(t,n){if(!t){return}if(t.indexRef){s.values[n]=t.value}else{s.refs.push(new a(e,t.keypath,s,n,o))}});s.selfUpdating=s.refs.length<=1};u.prototype={bubble:function(){if(this.selfUpdating){this.update()}else if(!this.deferred){e.addEvaluator(this);this.deferred=true}},update:function(){var e;if(this.evaluating){return this}this.evaluating=true;try{e=this.fn.apply(null,this.values)}catch(a){if(this.root.debug){t('Error evaluating "'+this.uniqueString+'": '+a.message||a)}e=undefined}if(!n(e,this.value)){this.value=e;r(this.root,this.keypath);o(this.root,this.keypath,e,true);i(this.root,this.keypath)}this.evaluating=false;return this},teardown:function(){while(this.refs.length){this.refs.pop().teardown()}r(this.root,this.keypath);this.root._evaluators[this.keypath]=null},refresh:function(){if(!this.selfUpdating){this.deferred=true}var e=this.refs.length;while(e--){this.refs[e].update()}if(this.deferred){this.update();this.deferred=false}},updateSoftDependencies:function(e){var t,n,r;if(!this.softRefs){this.softRefs=[]}t=this.softRefs.length;while(t--){r=this.softRefs[t];if(!e[r.keypath]){this.softRefs.splice(t,1);this.softRefs[r.keypath]=false;r.teardown()}}t=e.length;while(t--){n=e[t];if(!this.softRefs[n]){r=new s(this.root,n,this);this.softRefs.push(r);this.softRefs[n]=true}}this.selfUpdating=this.refs.length+this.softRefs.length<=1}};return u;function l(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(f[e]){return f[e]}r=[];while(t--){r[t]="_"+t}n=new Function(r.join(","),"return("+e+")");f[e]=n;return n}}(L,Z,p,F,A,G,$t,Kt);var Yt=function(e,t,n,r,i){var o=function(r,i,o,a){var s=this,u,f,l;u=r.root;this.root=u;this.callback=a;this.owner=r;this.str=o.s;this.args=l=[];this.unresolved=[];this.pending=0;f=i.indexRefs;if(!o.r||!o.r.length){this.resolved=this.ready=true;this.bubble();return}o.r.forEach(function(r,o){var a,c,h;if(f&&(a=f[r])!==undefined){l[o]={indexRef:r,value:a};return}if(c=t(u,r,i)){l[o]={keypath:c};return}l[o]=undefined;s.pending+=1;h=new n(u,r,i,function(t){s.resolve(o,t);e(s.unresolved,h)});s.unresolved.push(h)});this.ready=true;this.bubble()};o.prototype={bubble:function(){if(!this.ready){return}this.uniqueString=a(this.str,this.args);this.keypath=s(this.uniqueString);this.createEvaluator();this.callback(this.keypath)},teardown:function(){var e;while(e=this.unresolved.pop()){e.teardown()}},resolve:function(e,t){this.args[e]={keypath:t};this.bubble();this.resolved=!--this.pending},createEvaluator:function(){var e;if(!this.root._evaluators[this.keypath]){e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority);this.root._evaluators[this.keypath]=e;e.update()}else{this.root._evaluators[this.keypath].refresh()}},reassign:function(e,t,n,r){var o;this.args.forEach(function(a){var s;if(a.keypath&&(s=i(a.keypath,n,r))){a.keypath=s;o=true}else if(a.indexRef===e){a.value=t;o=true}});if(o){this.bubble()}}};return o;function a(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n]?t[n].value||t[n].keypath:"undefined"})}function s(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}}(E,O,Gt,Jt,Ft);var Qt=function(e,t,n,r,i,o,a){var s=function(i,o,s){var f=this,l,c,h,d,p;l=i.root;c=i.parentFragment;this.ref=o.r;this.root=i.root;this.mustache=i;this.callback=s;this.pending=0;this.unresolved=[];p=this.members=[];this.indexRefMembers=[];this.keypathObservers=[];this.expressionResolvers=[];o.m.forEach(function(o,s){var v,g,m,y,b,w;if(typeof o==="string"){f.members[s]=o;return}if(o.t===e.REFERENCE){v=o.n;g=c.indexRefs;if(g&&(m=g[v])!==undefined){p[s]=m;f.indexRefMembers.push({ref:v,index:s});return}d=true;y=function(e){var t=new u(l,e,i.priority,f,s);f.keypathObservers.push(t)};if(h=n(l,v,c)){y(h);return}p[s]=undefined;f.pending+=1;b=new r(l,v,c,function(e){f.resolve(s,e);t(f.unresolved,b)});f.unresolved.push(b);return null}d=true;f.pending+=1;w=new a(f,c,o,function(e){f.resolve(s,e);t(f.unresolved,w)});f.unresolved.push(w)});if(!d){h=this.getKeypath();s(h);return}this.ready=true;this.bubble()};s.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){if(!this.ready||this.pending){return}this.callback(this.getKeypath())},resolve:function(e,t){var n=new u(this.root,t,this.mustache.priority,this,e);n.update();this.keypathObservers.push(n);this.resolved=!--this.pending;this.bubble()},teardown:function(){var e;while(e=this.unresolved.pop()){e.teardown()}},reassign:function(e,t){var n,r,i;r=this.indexRefMembers.length;while(r--){i=this.indexRefMembers[r];if(i.ref===e){n=true;this.members[i.index]=t}}if(n){this.bubble()}}};var u=function(e,t,n,r,o){this.root=e;this.keypath=t;this.priority=n;this.resolver=r;this.index=o;i(this);this.update()};u.prototype={update:function(){var e=this.resolver;e.members[this.index]=this.root.get(this.keypath);e.bubble()},teardown:function(){o(this)}};return s}(D,E,O,Gt,$,K,Yt);var Xt=function(e,t,n,r){return function i(o,a){var s,u,f,l,c,h,d;c=a.parentFragment;h=a.descriptor;o.root=c.root;o.parentFragment=c;o.descriptor=a.descriptor;o.index=a.index||0;o.priority=c.priority;o.type=a.descriptor.t;d=function(e){o.resolve(e)};if(s=h.r){f=c.indexRefs;if(f&&(l=f[s])!==undefined){o.indexRef=s;o.value=l;o.render(o.value)}else{u=t(o.root,s,o.parentFragment);if(u!==undefined){d(u)}else{o.ref=s;e.addUnresolved(o)}}}if(a.descriptor.x){o.resolver=new r(o,c,a.descriptor.x,d)}if(a.descriptor.kx){o.resolver=new n(o,a.descriptor.kx,d)}if(o.descriptor.n&&!o.hasOwnProperty("value")){o.render(undefined)}}}(L,O,Qt,Yt);var Zt=function(e,t){var n={evaluateWrapped:true};return function r(){var r=t(this.root,this.keypath,n);if(!e(r,this.value)){this.render(r);this.value=r}}}(p,X);var en=function(e,t,n){return function r(i){var o;if(i===this.keypath){return}if(this.registered){n(this);if(this.type===e.SECTION){o=this.fragments.length;while(o--){this.fragments[o].reassign(null,null,this.keypath,i)}}}this.keypath=i;t(this);this.update()}}(D,$,K);var tn=function(e){return function t(n,r,i,o){var a,s;if(this.resolver){this.resolver.reassign(n,r,i,o)}else if(this.keypath){a=e(this.keypath,i,o);if(a){this.resolve(a)}}else if(n!==undefined&&this.indexRef===n){this.value=r;this.render(r)}if(this.fragments){s=this.fragments.length;while(s--){this.fragments[s].reassign(n,r,i,o)}}}}(Ft);var nn=function(e,t,n,r){return{init:e,update:t,resolve:n,reassign:r}}(Xt,Zt,en,tn);var rn=function(e,t,n,r){var i,o,a;o=/</g;a=/>/g;i=function(t,r){this.type=e.INTERPOLATOR;if(r){this.node=document.createTextNode("");r.appendChild(this.node)}n.init(this,t)};i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:r,teardown:function(e){if(e){this.detach()}t(this)},render:function(e){if(this.node){this.node.data=e==undefined?"":e}},firstNode:function(){return this.node},toString:function(){var e=this.value!=undefined?""+this.value:"";return e.replace(o,"&lt;").replace(a,"&gt;")}};return i}(D,Ht,nn,Vt);var on=function(){var e=[];return function t(n){var r=this,i,o,a,s,u,f,l,c;i=this.parentFragment;u=[];n.forEach(function h(t,n){var i,a,s,f;if(t===n){u[t]=r.fragments[n];return}if(o===undefined){o=n}if(t===-1){e.push(r.fragments[n]);return}i=r.fragments[n];a=t-n;s=r.keypath+"."+n;f=r.keypath+"."+t;i.reassign(r.descriptor.i,n,t,a,s,f);u[t]=i});while(l=e.pop()){l.teardown(true)}if(o===undefined){o=this.length}this.length=s=this.root.get(this.keypath).length;if(s===o){return}f={descriptor:this.descriptor.f,root:this.root,pNode:i.pNode,owner:this};if(this.descriptor.i){f.indexRef=this.descriptor.i}for(a=o;a<s;a+=1){if(l=u[a]){this.docFrag.appendChild(l.detach(false))}else{f.context=this.keypath+"."+a;f.index=a;l=this.createFragment(f)}this.fragments[a]=l}c=i.findNextNode(this);i.pNode.insertBefore(this.docFrag,c)}}();var an=function(e,t){return function a(s,u){var f={descriptor:s.descriptor.f,root:s.root,pNode:s.parentFragment.pNode,pElement:s.parentFragment.pElement,owner:s};if(s.descriptor.n){o(s,u,true,f);return}if(e(u)){n(s,u,f)}else if(t(u)||typeof u==="function"){if(s.descriptor.i){r(s,u,f)}else{i(s,f)}}else{o(s,u,false,f)}};function n(e,t,n){var r,i,o;i=t.length;if(i<e.length){o=e.fragments.splice(i,e.length-i);while(o.length){o.pop().teardown(true)}}else{if(i>e.length){for(r=e.length;r<i;r+=1){n.context=e.keypath+"."+r;n.index=r;if(e.descriptor.i){n.indexRef=e.descriptor.i}e.fragments[r]=e.createFragment(n)}}}e.length=i}function r(e,t,n){var r,i,o,a;o=e.hasKey||(e.hasKey={});i=e.fragments.length;while(i--){a=e.fragments[i];if(!(a.index in t)){e.fragments[i].teardown(true);e.fragments.splice(i,1);o[a.index]=false}}for(r in t){if(!o[r]){n.context=e.keypath+"."+r;n.index=r;if(e.descriptor.i){n.indexRef=e.descriptor.i}e.fragments.push(e.createFragment(n));o[r]=true}}e.length=e.fragments.length}function i(e,t){if(!e.length){t.context=e.keypath;t.index=0;e.fragments[0]=e.createFragment(t);e.length=1}}function o(t,n,r,i){var o,a,s,u;a=e(n)&&n.length===0;if(r){o=a||!n}else{o=n&&!a}if(o){if(!t.length){i.index=0;t.fragments[0]=t.createFragment(i);t.length=1}if(t.length>1){s=t.fragments.splice(1);while(u=s.pop()){u.teardown(true)}}}else if(t.length){t.teardownFragments(true);t.length=0}}}(C,et);var sn=function(e,t){return function n(r){var i,o;if(o=this.root._wrapped[this.keypath]){r=o.get()}if(this.rendering){return}this.rendering=true;t(this,r);this.rendering=false;if(this.docFrag&&!this.docFrag.childNodes.length){return}if(!this.initialising&&e){i=this.parentFragment.findNextNode(this);if(i&&i.parentNode===this.parentFragment.pNode){this.parentFragment.pNode.insertBefore(this.docFrag,i)}else{this.parentFragment.pNode.appendChild(this.docFrag)}}}}(u,an);var un=function(e,t,n,r){var i,o,a,s,u;a=e.descriptor.i;for(i=t;i<n;i+=1){o=e.fragments[i];s=e.keypath+"."+(i-r);u=e.keypath+"."+i;o.index=i;o.reassign(a,i,s,u)}};var fn=function(e){return function(r){var i=this,o,a,s,u,f;o=r.balance;if(!o){return}a=r.start;i.length+=o;if(o<0){i.fragments.splice(a,-o).forEach(t);e(i,a,i.length,o);return}s=a+r.removed;u=a+r.added;f=[s,0];f.length+=o;i.fragments.splice.apply(i.fragments,f);e(i,u,i.length,o);n(i,s,u)};function t(e){e.teardown(true)}function n(e,t,n){var r,i,o;e.rendering=true;r={descriptor:e.descriptor.f,root:e.root,pNode:e.parentFragment.pNode,owner:e,indexRef:e.descriptor.i};for(i=t;i<n;i+=1){r.context=e.keypath+"."+i;r.index=i;e.fragments[i]=e.createFragment(r)}o=e.fragments[n]?e.fragments[n].firstNode():e.parentFragment.findNextNode(e);e.parentFragment.pNode.insertBefore(e.docFrag,o);e.rendering=false}}(un);var ln=function(e,t,n,r,i,o,a){var s,u;a.push(function(){u=a.DomFragment});s=function(n,r){this.type=e.SECTION;this.inverted=!!n.descriptor.n;this.fragments=[];this.length=0;if(r){this.docFrag=document.createDocumentFragment()}this.initialising=true;t.init(this,n);if(r){r.appendChild(this.docFrag)}this.initialising=false};s.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,splice:i,merge:n,detach:function(){var e,t;if(this.docFrag){t=this.fragments.length;for(e=0;e<t;e+=1){this.docFrag.appendChild(this.fragments[e].detach())}return this.docFrag}},teardown:function(e){this.teardownFragments(e);o(this)},firstNode:function(){if(this.fragments[0]){return this.fragments[0].firstNode()}return this.parentFragment.findNextNode(this)},findNextNode:function(e){if(this.fragments[e.index+1]){return this.fragments[e.index+1].firstNode()}return this.parentFragment.findNextNode(this)},teardownFragments:function(e){var t;while(t=this.fragments.shift()){t.teardown(e)}},render:r,createFragment:function(e){var t=new u(e);if(this.docFrag){this.docFrag.appendChild(t.docFrag)}return t},toString:function(){var e,t,n;e="";t=0;n=this.length;for(t=0;t<n;t+=1){e+=this.fragments[t].toString()}return e},find:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1){if(r=this.fragments[t].find(e)){return r}}return null},findAll:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1){this.fragments[n].findAll(e,t)}},findComponent:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1){if(r=this.fragments[t].findComponent(e)){return r}}return null},findAllComponents:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1){this.fragments[n].findAllComponents(e,t)}}};return s}(D,nn,on,sn,fn,Ht,w);var cn=function(e,t,n,r,i){var o=function(t,r){this.type=e.TRIPLE;if(r){this.nodes=[];this.docFrag=document.createDocumentFragment()}this.initialising=true;n.init(this,t);if(r){r.appendChild(this.docFrag)}this.initialising=false};o.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){e=this.nodes.length;for(t=0;t<e;t+=1){this.docFrag.appendChild(this.nodes[t])}return this.docFrag}},teardown:function(e){if(e){this.detach();this.docFrag=this.nodes=null}i(this)},firstNode:function(){if(this.nodes[0]){return this.nodes[0]}return this.parentFragment.findNextNode(this)},render:function(e){var t,n;if(!this.nodes){return}while(this.nodes.length){t=this.nodes.pop();t.parentNode.removeChild(t)}if(!e){this.nodes=[];return}n=this.parentFragment.pNode;this.nodes=r(e,n.tagName,n.namespaceURI,this.docFrag);if(!this.initialising){n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}if(n.tagName==="SELECT"&&n._ractive&&n._ractive.binding){n._ractive.binding.update()}},toString:function(){return this.value!=undefined?this.value:""},find:function(e){var n,r,i,o;r=this.nodes.length;for(n=0;n<r;n+=1){i=this.nodes[n];if(i.nodeType!==1){continue}if(t(i,e)){return i}if(o=i.querySelector(e)){return o}}return null},findAll:function(e,n){var r,i,o,a,s,u;i=this.nodes.length;for(r=0;r<i;r+=1){o=this.nodes[r];if(o.nodeType!==1){continue}if(t(o,e)){n.push(o)}if(a=o.querySelectorAll(e)){s=a.length;for(u=0;u<s;u+=1){n.push(a[u])}}}}};return o}(D,st,nn,qt,Ht);var hn=function(e){return function(t,n){if(t.a&&t.a.xmlns){return t.a.xmlns}return t.e==="svg"?e.svg:n.namespaceURI||e.html}}(a);var dn=function(){var e,t,n,r;e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ");t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ");n=function(e){var t={},n=e.length;while(n--){t[e[n].toLowerCase()]=e[n]}return t};r=n(e.concat(t));return function(e){var t=e.toLowerCase();return r[t]||t}}();var pn=function(e,t){return function(n,r){var i,o;i=r.indexOf(":");if(i!==-1){o=r.substr(0,i);if(o!=="xmlns"){r=r.substring(i+1);n.name=t(r);n.lcName=n.name.toLowerCase();n.namespace=e[o.toLowerCase()];if(!n.namespace){throw'Unknown namespace ("'+o+'")'}return}}n.name=n.element.namespace!==e.html?t(r):r;n.lcName=n.name.toLowerCase()}}(a,dn);var vn=function(e){return function t(n,r){var i,o=r.value===null?"":r.value;if(i=r.pNode){if(n.namespace){i.setAttributeNS(n.namespace,r.name,o)}else{if(r.name==="style"&&i.style.setAttribute){i.style.setAttribute("cssText",o)}else if(r.name==="class"&&(!i.namespaceURI||i.namespaceURI===e.html)){i.className=o}else{i.setAttribute(r.name,o)}}if(n.name==="id"){r.root.nodes[r.value]=i}if(n.name==="value"){i._ractive.value=r.value}}n.value=r.value}}(a);var gn=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name;if(r.pNode[i]!==undefined){n.propertyName=i}if(typeof r.pNode[i]==="boolean"||i==="value"){n.useProperty=true}}}}(a);var mn=function(e){return function t(n){var r,i;r=n.fragment.items;if(r.length!==1){return}i=r[0];if(i.type!==e.INTERPOLATOR||!i.keypath&&!i.ref){return}return i}}(D);var yn=function(e){return function(t,n){var r;if(!e(t)||!e(n)){return false}if(t.length!==n.length){return false}r=t.length;while(r--){if(t[r]!==n[r]){return false}}return true}}(C);var bn=function(e,t,n,r,i,o){var a='For two-way binding to work, attribute value must be a single interpolator (e.g. value="{{foo}}")',s="You cannot set up two-way binding against an expression ",u,f,l,c,h,d,p,v,g,m,y,b,w,E;u=function(){var e=this.pNode,n,r,i;n=this.interpolator;if(!n){t(a);return false}if(n.keypath&&n.keypath.substr==="${"){t(s+n.keypath);return false}if(!n.keypath){n.resolve(n.descriptor.r)}this.keypath=n.keypath;r=h(this);if(!r){return false}e._ractive.binding=this.element.binding=r;this.twoway=true;i=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]);i.push(r);return true};f=function(){e.start(this._ractive.root);this._ractive.binding.update();e.end()};l={evaluateWrapped:true};c=function(){var e=i(this._ractive.root,this._ractive.binding.keypath,l);this.value=e==undefined?"":e};h=function(e){var t=e.pNode;if(t.tagName==="SELECT"){return t.multiple?new p(e,t):new v(e,t)}if(t.type==="checkbox"||t.type==="radio"){if(e.propertyName==="name"){if(t.type==="checkbox"){return new m(e,t)}if(t.type==="radio"){return new g(e,t)}}if(e.propertyName==="checked"){return new y(e,t)}return null}if(e.lcName!=="value"){throw new Error("Attempted to set up an illegal two-way binding. This error is unexpected - if you can, please file an issue at https://github.com/RactiveJS/Ractive, or contact @RactiveJS on Twitter. Thanks!")}if(t.type==="file"){return new b(e,t)}if(t.getAttribute("contenteditable")){return new w(e,t)}return new E(e,t)};p=function(e,t){var n;d(this,e,t);t.addEventListener("change",f,false);n=i(this.root,this.keypath);if(n===undefined){this.update()}};p.prototype={value:function(){var e,t,n,r,i,o;e=[];t=this.node.options;r=t.length;for(n=0;n<r;n+=1){i=t[n];if(i.selected){o=i._ractive?i._ractive.value:i.value;e.push(o)}}return e},update:function(){var t,r,i;t=this.attr;r=t.value;i=this.value();if(r===undefined||!n(i,r)){e.addBinding(t);t.value=i;o(this.root,this.keypath,i);e.trigger()}return this},deferUpdate:function(){if(this.deferred===true){return}e.addAttribute(this);this.deferred=true},teardown:function(){this.node.removeEventListener("change",f,false)}};v=function(e,t){var n;d(this,e,t);t.addEventListener("change",f,false);n=i(this.root,this.keypath);if(n===undefined){this.update()}};v.prototype={value:function(){var e,t,n,r,i;e=this.node.options;n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected){i=r._ractive?r._ractive.value:r.value;return i}}},update:function(){var t=this.value();e.addBinding(this.attr);this.attr.value=t;o(this.root,this.keypath,t);e.trigger();return this},deferUpdate:function(){if(this.deferred===true){return}e.addAttribute(this);this.deferred=true},teardown:function(){this.node.removeEventListener("change",f,false)}};g=function(t,n){var r;this.radioName=true;d(this,t,n);n.name="{{"+t.keypath+"}}";n.addEventListener("change",f,false);if(n.attachEvent){n.addEventListener("click",f,false)}r=i(this.root,this.keypath);if(r!==undefined){n.checked=r==n._ractive.value}else{e.addRadio(this)}};g.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var t=this.node;if(t.checked){e.addBinding(this.attr);o(this.root,this.keypath,this.value());e.trigger()}},teardown:function(){this.node.removeEventListener("change",f,false);this.node.removeEventListener("click",f,false)}};m=function(t,n){var r,o;this.checkboxName=true;d(this,t,n);n.name="{{"+this.keypath+"}}";n.addEventListener("change",f,false);if(n.attachEvent){n.addEventListener("click",f,false)}r=i(this.root,this.keypath);if(r!==undefined){o=r.indexOf(n._ractive.value)!==-1;n.checked=o}else{e.addCheckbox(this)}};m.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked;e.addBinding(this.attr);o(this.root,this.keypath,r(this.root,this.keypath));e.trigger()},teardown:function(){this.node.removeEventListener("change",f,false);this.node.removeEventListener("click",f,false)}};y=function(e,t){d(this,e,t);t.addEventListener("change",f,false);if(t.attachEvent){t.addEventListener("click",f,false)}};y.prototype={value:function(){return this.node.checked},update:function(){e.addBinding(this.attr);o(this.root,this.keypath,this.value());e.trigger()},teardown:function(){this.node.removeEventListener("change",f,false);this.node.removeEventListener("click",f,false)}};b=function(e,t){d(this,e,t);t.addEventListener("change",f,false)};b.prototype={value:function(){return this.attr.pNode.files},update:function(){o(this.attr.root,this.attr.keypath,this.value());e.trigger()},teardown:function(){this.node.removeEventListener("change",f,false)}};w=function(e,t){d(this,e,t);t.addEventListener("change",f,false);if(!this.root.lazy){t.addEventListener("input",f,false);if(t.attachEvent){t.addEventListener("keyup",f,false)}}};w.prototype={update:function(){e.addBinding(this.attr);o(this.root,this.keypath,this.node.innerHTML);e.trigger()},teardown:function(){this.node.removeEventListener("change",f,false);this.node.removeEventListener("input",f,false);this.node.removeEventListener("keyup",f,false)}};E=function(e,t){d(this,e,t);t.addEventListener("change",f,false);if(!this.root.lazy){t.addEventListener("input",f,false);if(t.attachEvent){t.addEventListener("keyup",f,false)}}this.node.addEventListener("blur",c,false)};E.prototype={value:function(){var e=this.attr.pNode.value;if(+e+""===e&&e.indexOf("e")===-1){e=+e}return e},update:function(){var t=this.attr,n=this.value();e.addBinding(t);o(t.root,t.keypath,n);e.trigger()},teardown:function(){this.node.removeEventListener("change",f,false);this.node.removeEventListener("input",f,false);this.node.removeEventListener("keyup",f,false);this.node.removeEventListener("blur",c,false)}};d=function(e,t,n){e.attr=t;e.node=n;e.root=t.root;e.keypath=t.keypath};return u}(L,Z,yn,x,X,U);var wn=function(e,t,n){var r,i,o,a,s,u,f,l,c,h,d,p;r=function(){var e;if(!this.ready){return this}e=this.pNode;if(e.tagName==="SELECT"&&this.lcName==="value"){this.update=o;this.deferredUpdate=a;return this.update()}if(this.isFileInputValue){this.update=i;return this}if(this.twoway&&this.lcName==="name"){if(e.type==="radio"){this.update=f;return this.update()}if(e.type==="checkbox"){this.update=l;return this.update()}}if(this.lcName==="style"&&e.style.setAttribute){this.update=c;return this.update()}if(this.lcName==="class"&&(!e.namespaceURI||e.namespaceURI===t.html)){this.update=h;return this.update()}if(e.getAttribute("contenteditable")&&this.lcName==="value"){this.update=d;return this.update()}this.update=p;return this.update()};i=function(){return this};a=function(){this.deferredUpdate=this.pNode.multiple?u:s;this.deferredUpdate()};o=function(){e.addSelectValue(this);return this};s=function(){var e=this.fragment.getValue(),t,n,r,i;this.value=this.pNode._ractive.value=e;t=this.pNode.options;i=t.length;while(i--){n=t[i];r=n._ractive?n._ractive.value:n.value;if(r==e){n.selected=true;return this}}return this};u=function(){var e=this.fragment.getValue(),t,r,i,o;if(!n(e)){e=[e]}t=this.pNode.options;r=t.length;while(r--){i=t[r];o=i._ractive?i._ractive.value:i.value;i.selected=e.indexOf(o)!==-1}this.value=e;return this};f=function(){var e,t;e=this.pNode;t=this.fragment.getValue();e.checked=t==e._ractive.value;return this};l=function(){var e,t;e=this.pNode;t=this.fragment.getValue();if(!n(t)){e.checked=t==e._ractive.value;return this}e.checked=t.indexOf(e._ractive.value)!==-1;return this};c=function(){var e,t;e=this.pNode;t=this.fragment.getValue();if(t===undefined){t=""}if(t!==this.value){e.style.setAttribute("cssText",t);this.value=t}return this};h=function(){var e,t;e=this.pNode;t=this.fragment.getValue();if(t===undefined){t=""}if(t!==this.value){e.className=t;this.value=t}return this};d=function(){var e,t;e=this.pNode;t=this.fragment.getValue();if(t===undefined){t=""
}if(t!==this.value){if(!this.active){e.innerHTML=t}this.value=t}return this};p=function(){var e,t,n;e=this.pNode;t=this.fragment.getValue();if(this.isValueAttribute){e._ractive.value=t}if(t==undefined){t=""}if(t!==this.value){if(this.useProperty){if(!this.active){e[this.propertyName]=t}if(e.tagName==="OPTION"&&e.selected&&(n=this.element.select.binding)){n.update()}this.value=t;return this}if(this.namespace){e.setAttributeNS(this.namespace,this.name,t);this.value=t;return this}if(this.lcName==="id"){if(this.value!==undefined){this.root.nodes[this.value]=undefined}this.root.nodes[t]=e}e.setAttribute(this.name,t);this.value=t}return this};return r}(L,a,C);var En=function(e){var t;t=this.str.substr(this.pos,e.length);if(t===e){this.pos+=e.length;return e}return null};var _n=function(){var e=/^\s+/;return function(){var t=e.exec(this.remaining());if(!t){return null}this.pos+=t[0].length;return t[0]}}();var xn=function(e){return function(t){var n=e.exec(t.str.substring(t.pos));if(!n){return null}t.pos+=n[0].length;return n[1]||n[0]}};var kn=function(e){var t,n,r;t=e(/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/);n=e(/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/);r=e(/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/);return function(e){return function(i){var o,a,s,u;o=i.pos;a='"';s=false;while(!s){u=t(i)||n(i)||i.getStringMatch(e);if(u){if(u==='"'){a+='\\"'}else if(u==="\\'"){a+="'"}else{a+=u}}else{u=r(i);if(u){a+="\\u"+("000"+u.charCodeAt(1).toString(16)).slice(-4)}else{s=true}}}a+='"';return JSON.parse(a)}}}(xn);var Sn=function(e){return e('"')}(kn);var On=function(e){return e("'")}(kn);var Tn=function(e,t,n){return function(r){var i,o;i=r.pos;if(r.getStringMatch('"')){o=n(r);if(!r.getStringMatch('"')){r.pos=i;return null}return{t:e.STRING_LITERAL,v:o}}if(r.getStringMatch("'")){o=t(r);if(!r.getStringMatch("'")){r.pos=i;return null}return{t:e.STRING_LITERAL,v:o}}return null}}(D,Sn,On);var An=function(e,t){var n=t(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(t){var r;if(r=n(t)){return{t:e.NUMBER_LITERAL,v:r}}return null}}(D,xn);var Nn=function(e){return e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(xn);var Ln=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var o;if(o=e(i)){return r.test(o.v)?o.v:'"'+o.v.replace(/"/g,'\\"')+'"'}if(o=t(i)){return o.v}if(o=n(i)){return o}}}(Tn,An,Nn);var Rn=function(e,t,n,r){var i,o,a,s,u,f;o={"true":true,"false":false,undefined:undefined,"null":null};a=new RegExp("^(?:"+Object.keys(o).join("|")+")");s=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;u=/\$\{([^\}]+)\}/g;f=/^\$\{([^\}]+)\}/;i=function(e,t){this.str=e;this.values=t;this.pos=0;this.result=this.getToken()};i.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:e,getToken:function(){this.allowWhitespace();return this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var e;if(!this.values){return null}if((e=f.exec(this.remaining()))&&this.values.hasOwnProperty(e[1])){this.pos+=e[0].length;return{v:this.values[e[1]]}}},getSpecial:function(){var e;if(e=a.exec(this.remaining())){this.pos+=e[0].length;return{v:o[e[0]]}}},getNumber:function(){var e;if(e=s.exec(this.remaining())){this.pos+=e[0].length;return{v:+e[0]}}},getString:function(){var e=n(this),t;if(e&&(t=this.values)){return{v:e.v.replace(u,function(e,n){return t[n]||n})}}return e},getObject:function(){var e,t;if(!this.getStringMatch("{")){return null}e={};while(t=l(this)){e[t.key]=t.value;this.allowWhitespace();if(this.getStringMatch("}")){return{v:e}}if(!this.getStringMatch(",")){return null}}return null},getArray:function(){var e,t;if(!this.getStringMatch("[")){return null}e=[];while(t=this.getToken()){e.push(t.v);if(this.getStringMatch("]")){return{v:e}}if(!this.getStringMatch(",")){return null}}return null},allowWhitespace:t};function l(e){var t,n,i;e.allowWhitespace();t=r(e);if(!t){return null}i={key:t};e.allowWhitespace();if(!e.getStringMatch(":")){return null}e.allowWhitespace();n=e.getToken();if(!n){return null}i.value=n.v;return i}return function(e,t){var n=new i(e,t);if(n.result){return{value:n.result.v,remaining:n.remaining()}}return null}}(En,_n,Tn,Ln);var Cn=function(e,t,n){var r=function(t){this.type=e.INTERPOLATOR;n.init(this,t)};r.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,render:function(e){this.value=e;this.parentFragment.bubble()},teardown:function(){t(this)},toString:function(){if(this.value==undefined){return""}return i(this.value)}};return r;function i(e){if(typeof e==="string"){return e}return JSON.stringify(e)}}(D,Ht,nn);var jn=function(e,t,n,r,i){var o,a;i.push(function(){a=i.StringFragment});o=function(n){this.type=e.SECTION;this.fragments=[];this.length=0;t.init(this,n)};o.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,teardown:function(){this.teardownFragments();r(this)},teardownFragments:function(){while(this.fragments.length){this.fragments.shift().teardown()}this.length=0},bubble:function(){this.value=this.fragments.join("");this.parentFragment.bubble()},render:function(e){var t;if(t=this.root._wrapped[this.keypath]){e=t.get()}n(this,e);this.parentFragment.bubble()},createFragment:function(e){return new a(e)},toString:function(){return this.fragments.join("")}};return o}(D,nn,an,Ht,w);var In=function(e){var t=function(t){this.type=e.TEXT;this.text=t};t.prototype={toString:function(){return this.text},reassign:function(){},teardown:function(){}};return t}(D);var Mn=function(e,t){return function(){var n,r,i,o,a,s,u;if(!this.argsList||this.dirty){n={};r=0;o=this.root._guid;u=function(e){return e.map(function(e){var t,i,a;if(e.text){return e.text}if(e.fragments){return e.fragments.map(function(e){return u(e.items)}).join("")}t=o+"-"+r++;if(i=e.root._wrapped[e.keypath]){a=i.value}else{a=e.value}n[t]=a;return"${"+t+"}"}).join("")};i=u(this.items);s=t("["+i+"]",n);if(!s){a="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues";if(this.root.debug){throw new Error(a)}else{e(a);this.argsList=[i]}}else{this.argsList=s.value}this.dirty=false}return this.argsList}}(Z,Rn);var Pn=function(e,t,n,r,i,o,a,s){var u=function(e){n.init(this,e)};u.prototype={reassign:n.reassign,createItem:function(t){if(typeof t.descriptor==="string"){return new o(t.descriptor)}switch(t.descriptor.t){case e.INTERPOLATOR:return new r(t);case e.TRIPLE:return new r(t);case e.SECTION:return new i(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=true;this.owner.bubble()},teardown:function(){var e,t;e=this.items.length;for(t=0;t<e;t+=1){this.items[t].teardown()}},getValue:function(){var t;if(this.items.length===1&&this.items[0].type===e.INTERPOLATOR){t=this.items[0].value;if(t!==undefined){return t}}return this.toString()},isSimple:function(){var t,n,r;if(this.simple!==undefined){return this.simple}t=this.items.length;while(t--){n=this.items[t];if(n.type===e.TEXT){continue}if(n.type===e.INTERPOLATOR){if(r){return false}else{r=true;continue}}return this.simple=false}return this.simple=true},toString:function(){return this.items.join("")},toJSON:function(){var e=this.getValue(),n;if(typeof e==="string"){n=t(e);e=n?n.value:e}return e},toArgsList:a};s.StringFragment=u;return u}(D,Rn,Wt,Cn,jn,In,Mn,w);var Dn=function(e,t,n,r,i,o,a,s,u){var f=function(e){this.type=t.ATTRIBUTE;this.element=e.element;n(this,e.name);if(e.value===null||typeof e.value==="string"){r(this,e);return}this.root=e.root;this.pNode=e.pNode;this.parentFragment=this.element.parentFragment;this.fragment=new u({descriptor:e.value,root:this.root,owner:this});this.interpolator=o(this);if(!this.pNode){return}if(this.name==="value"){this.isValueAttribute=true;if(this.pNode.tagName==="INPUT"&&this.pNode.type==="file"){this.isFileInputValue=true}}i(this,e);this.selfUpdating=this.fragment.isSimple();this.ready=true};f.prototype={bind:a,update:s,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref;if(this.propertyName==="name"){this.pNode.name="{{"+this.keypath+"}}"}},reassign:function(e,t,n,r){if(this.fragment){this.fragment.reassign(e,t,n,r);if(this.twoway){this.updateBindings()}}},teardown:function(){var e;if(this.boundEvents){e=this.boundEvents.length;while(e--){this.pNode.removeEventListener(this.boundEvents[e],this.updateModel,false)}}if(this.fragment){this.fragment.teardown()}},bubble:function(){if(this.selfUpdating){this.update()}else if(!this.deferred&&this.ready){e.addAttribute(this);this.deferred=true}},toString:function(){var e,t;if(this.value===null){return this.name}if(this.name==="value"&&this.element.lcName==="select"){return}if(this.name==="name"&&this.element.lcName==="input"&&(t=this.interpolator)){return"name={{"+(t.keypath||t.ref)+"}}"}if(!this.fragment){return this.name+"="+JSON.stringify(this.value)}e=this.fragment.toString();return this.name+"="+JSON.stringify(e)}};return f}(L,D,pn,vn,gn,mn,bn,wn,Pn);var Fn=function(e){return function t(n,r,i){var o=new e({element:n,name:r,value:i,root:n.root,pNode:n.node});n.attributes.push(n.attributes[r]=o);if(r!=="name"){o.update()}}}(Dn);var Bn=function(e){return function(t,n){var r;t.attributes=[];for(r in n){if(n.hasOwnProperty(r)){e(t,r,n[r])}}return t.attributes}}(Fn);var Un=function mo(e){var t=[],n=e.length;while(n--){t[n]=e[n]}return t};var Wn=function(e){return function t(n,r){if(!n.matchingStaticNodes[r]){n.matchingStaticNodes[r]=e(n.node.querySelectorAll(r))}return n.matchingStaticNodes[r]}}(Un);var qn=function(e,t,n,r,i){var o,a,s;i.push(function(){o=i.DomFragment});a=function(){var e=this.node,t=this.fragment.toString();if(e.styleSheet){e.styleSheet.cssText=t}else{e.innerHTML=t}};s=function(){if(!this.node.type||this.node.type==="text/javascript"){e("Script tag was updated. This does not cause the code to be re-evaluated!")}this.node.text=this.fragment.toString()};return function f(e,r,i,l){if(e.lcName==="script"||e.lcName==="style"){e.fragment=new n({descriptor:i.f,root:e.root,owner:e});if(l){if(e.lcName==="script"){e.bubble=s;e.node.text=e.fragment.toString()}else{e.bubble=a;e.bubble()}}return}if(typeof i.f==="string"&&(!r||(!r.namespaceURI||r.namespaceURI===t.html))){e.html=i.f;if(l){r.innerHTML=e.html;e.matchingStaticNodes={};u(e)}}else{e.fragment=new o({descriptor:i.f,root:e.root,pNode:r,owner:e,pElement:e});if(l){r.appendChild(e.fragment.docFrag)}}};function u(e){var t,n,i,o,a,s,u;i=e.node;t=e.root;do{n=t._liveQueries;u=n.length;while(u--){o=n[u];a=n[o];s=r(e,o);a.push.apply(a,s)}}while(t=t._parent)}}(Z,a,Pn,Wn,w);var Vn=function(e,t){var n=function(n,r,i){var o=this,a,s,u;o.root=r;o.node=i.node;a=n.n||n;if(typeof a!=="string"){s=new t({descriptor:a,root:r,owner:i});a=s.toString();s.teardown()}if(n.a){o.params=n.a}else if(n.d){o.fragment=new t({descriptor:n.d,root:r,owner:i});o.params=o.fragment.toArgsList();o.fragment.bubble=function(){this.dirty=true;o.params=this.toArgsList();if(o.ready){o.update()}}}o.fn=r.decorators[a];if(!o.fn){u='Missing "'+a+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators';if(r.debug){throw new Error(u)}else{e(u)}}};n.prototype={init:function(){var e,t;if(this.params){t=[this.node].concat(this.params);e=this.fn.apply(this.root,t)}else{e=this.fn.call(this.root,this.node)}if(!e||!e.teardown){throw new Error("Decorator definition must return an object with a teardown method")}this.actual=e;this.ready=true},update:function(){if(this.actual.update){this.actual.update.apply(this.root,this.params)}else{this.actual.teardown(true);this.init()}},teardown:function(e){this.actual.teardown();if(!e&&this.fragment){this.fragment.teardown()}}};return n}(Z,Pn);var zn=function(e,t){return function(n,r,i){var o=new t(n,r,i);if(o.fn){i.decorator=o;e.addDecorator(i.decorator)}}}(L,Vn);var Hn=function(e,t){var n,r,i,o,a,s,u,f,l;n=function(e,t,n,i){var o,a;o=e.node._ractive.events;a=o[t]||(o[t]=new r(e,t,i));a.add(n)};r=function(t,n){var r;this.element=t;this.root=t.root;this.node=t.node;this.name=n;this.proxies=[];if(r=this.root.events[n]){this.custom=r(this.node,l(n))}else{if(!("on"+n in this.node)){e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events')}this.node.addEventListener(n,f,false)}};r.prototype={add:function(e){this.proxies.push(new i(this.element,this.root,e))},teardown:function(){var e;if(this.custom){this.custom.teardown()}else{this.node.removeEventListener(this.name,f,false)}e=this.proxies.length;while(e--){this.proxies[e].teardown()}},fire:function(e){var t=this.proxies.length;while(t--){this.proxies[t].fire(e)}}};i=function(e,n,r){var i;this.root=n;i=r.n||r;if(typeof i==="string"){this.n=i}else{this.n=new t({descriptor:r.n,root:this.root,owner:e})}if(r.a){this.a=r.a;this.fire=a;return}if(r.d){this.d=new t({descriptor:r.d,root:this.root,owner:e});this.fire=s;return}this.fire=o};i.prototype={teardown:function(){if(this.n.teardown){this.n.teardown()}if(this.d){this.d.teardown()}},bubble:function(){}};o=function(e){this.root.fire(this.n.toString(),e)};a=function(e){this.root.fire.apply(this.root,[this.n.toString(),e].concat(this.a))};s=function(e){var t=this.d.toArgsList();if(typeof t==="string"){t=t.substr(1,t.length-2)}this.root.fire.apply(this.root,[this.n.toString(),e].concat(t))};f=function(e){var t=this._ractive;t.events[e.type].fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})};u={};l=function(e){if(u[e]){return u[e]}return u[e]=function(t){var n=t.node._ractive;t.index=n.index;t.keypath=n.keypath;t.context=n.root.get(n.keypath);n.events[e].fire(t)}};return n}(Z,Pn);var Gn=function(e){return function(t,n){var r,i,o;for(i in n){if(n.hasOwnProperty(i)){o=i.split("-");r=o.length;while(r--){e(t,o[r],n[i])}}}}}(Hn);var $n=function(e){var t,n,r,i,o;t=e.root;do{n=t._liveQueries;r=n.length;while(r--){i=n[r];o=n[i];if(o._test(e)){(e.liveQueries||(e.liveQueries=[])).push(o)}}}while(t=t._parent)};var Kn=function(){if(this._inited){throw new Error("Cannot initialize a transition more than once")}this._inited=true;this._fn.apply(this.root,[this].concat(this.params))};var Jn=function(e,t,n){var r,i;if(!e){return}r={};i=n("div").style;return function(e){var n,o,a;if(!r[e]){if(i[e]!==undefined){r[e]=e}else{a=e.charAt(0).toUpperCase()+e.substring(1);n=t.length;while(n--){o=t[n];if(i[o+a]!==undefined){r[e]=o+a;break}}}}return r[e]}}(u,m,s);var Yn=function(e,t,n,r){var i;if(!t){return}i=window.getComputedStyle||e.getComputedStyle;return function(e){var t,i,o,a,s;t=window.getComputedStyle(this.node);if(typeof e==="string"){s=t[r(e)];if(s==="0px"){s=0}return s}if(!n(e)){throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties")}i={};o=e.length;while(o--){a=e[o];s=t[r(a)];if(s==="0px"){s=0}i[a]=s}return i}}(r,u,C,Jn);var Qn=function(e){return function(t,n){var r;if(typeof t==="string"){this.node.style[e(t)]=n}else{for(r in t){if(t.hasOwnProperty(r)){this.node.style[e(r)]=t[r]}}}return this}}(Jn);var Xn=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var Zn=function(e,t,n){var r=function(r){var o;this.duration=r.duration;this.step=r.step;this.complete=r.complete;if(typeof r.easing==="string"){o=r.root.easing[r.easing];if(!o){e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]');o=i}}else if(typeof r.easing==="function"){o=r.easing}else{o=i}this.easing=o;this.start=t();this.end=this.start+this.duration;this.running=true;n.add(this)};r.prototype={tick:function(e){var t,n;if(!this.running){return false}if(e>this.end){if(this.step){this.step(1)}if(this.complete){this.complete(1)}return false}t=e-this.start;n=this.easing(t/this.duration);if(this.step){this.step(n)}return true},stop:function(){if(this.abort){this.abort()}this.running=false}};return r;function i(e){return e}}(Z,b,R);var er=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(m);var tr=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;if(!e){return""}if(t.test(e)){e="-"+e}n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return n}}(m);var nr=function(e,t,n,r,i,o,a,s,u){var f,l,c,h,d,p,v,g={},m={};if(!e){return}f=n("div").style;(function(){if(f.transition!==undefined){l="transition";c="transitionend";h=true}else if(f.webkitTransition!==undefined){l="webkitTransition";c="webkitTransitionEnd";h=true}else{h=false}})();if(l){d=l+"Duration";p=l+"Property";v=l+"TimingFunction"}return function(e,n,f,l,h,y){setTimeout(function(){var b,w,E,_;_=function(){if(w&&E){y()}};b=e.node.namespaceURI+e.node.tagName;e.node.style[p]=l.map(a).map(u).join(",");e.node.style[v]=u(f.easing||"linear");e.node.style[d]=f.duration/1e3+"s";h=function(t){var n;n=l.indexOf(r(s(t.propertyName)));if(n!==-1){l.splice(n,1)}if(l.length){return}e.root.fire(e.name+":end");e.node.removeEventListener(c,h,false);E=true;_()};e.node.addEventListener(c,h,false);setTimeout(function(){var s=l.length,u,d,p,v=[],y;while(s--){y=l[s];u=b+y;if(g[u]){e.node.style[a(y)]=n[y]}else{d=e.getStyle(y)}if(g[u]===undefined){e.node.style[a(y)]=n[y];g[u]=e.getStyle(y)!=n[y];m[u]=!g[u]}if(m[u]){p=l.indexOf(y);if(p===-1){t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!")}else{l.splice(p,1)}e.node.style[a(y)]=d;v.push({name:a(y),interpolator:i(d,n[y])})}}if(v.length){new o({root:e.root,duration:f.duration,easing:r(f.easing),step:function(t){var n,r;r=v.length;while(r--){n=v[r];e.node.style[n.name]=n.interpolator(t)}},complete:function(){w=true;_()}})}else{w=true}if(!l.length){e.node.removeEventListener(c,h,false);E=true;_()}},0)},f.delay||0)}}(u,Z,s,Xn,nt,Zn,Jn,er,tr);var rr=function(e,t,n,r,i,o){var a;if(!t){return}a=window.getComputedStyle||e.getComputedStyle;return function(e,t,a,s){var u=this,f;if(typeof e==="string"){f={};f[e]=t}else{f=e;s=a;a=t}if(!a){n('The "'+u.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340');a=u;s=u.complete}var l=new r(function(e){var t,n,r,s,l,c,h,d;if(!a.duration){u.setStyle(f);e();return}t=Object.keys(f);n=[];r=window.getComputedStyle(u.node);l={};h=t.length;while(h--){d=t[h];s=r[i(d)];if(s==="0px"){s=0}if(s!=f[d]){n.push(d);u.node.style[i(d)]=s}}if(!n.length){e();return}o(u,f,a,n,c,e)});if(s){n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)");l.then(s)}return l}}(r,u,Z,v,Jn,nr);var ir=function(e,t){var n;for(n in t){if(t.hasOwnProperty(n)&&!(n in e)){e[n]=t[n]}}return e};var or=function(e){return function(t,n){if(typeof t==="number"){t={duration:t}}else if(typeof t==="string"){if(t==="slow"){t={duration:600}}else if(t==="fast"){t={duration:200}}else{t={duration:400}}}else if(!t){t={}}return e(t,n)}}(ir);var ar=function(){if(this.originalStyle){this.node.setAttribute("style",this.originalStyle)}else{this.node.getAttribute("style");this.node.removeAttribute("style")}};var sr=function(e,t,n,r,i,o,a,s){var u;u=function(n,r,i,o){var a=this,s,u,f;this.root=r;this.node=i.node;this.isIntro=o;this.originalStyle=this.node.getAttribute("style");a.complete=function(e){if(!e&&a.isIntro){a.resetStyle()}a.node._ractive.transition=null;a._manager.remove(a)};s=n.n||n;if(typeof s!=="string"){u=new t({descriptor:s,root:this.root,owner:i});s=u.toString();u.teardown()}this.name=s;if(n.a){this.params=n.a}else if(n.d){u=new t({descriptor:n.d,root:this.root,owner:i});this.params=u.toArgsList();u.teardown()}this._fn=r.transitions[s];if(!this._fn){f='Missing "'+s+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions';if(r.debug){throw new Error(f)}else{e(f)}return}};u.prototype={init:n,getStyle:r,setStyle:i,animateStyle:o,processParams:a,resetStyle:s};return u}(Z,Pn,Kn,Yn,Qn,rr,or,ar);var ur=function(e,t){return function(n,r,i,o){var a,s,u;if(!r.transitionsEnabled||r._parent&&!r._parent.transitionsEnabled){return}a=new t(n,r,i,o);if(a._fn){s=a.node;if(u=s._ractive.transition){u.complete()}s._ractive.transition=a;e.addTransition(a)}}}(L,sr);var fr=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g){return function y(b,w,E){var _,x,k,S,O,T,A,N,L,R,C,j;b.type=t.ELEMENT;_=b.parentFragment=w.parentFragment;x=_.pNode;k=b.descriptor=w.descriptor;b.parent=w.pElement;b.root=R=_.root;b.index=w.index;b.lcName=k.e.toLowerCase();b.eventListeners=[];b.customEventListeners=[];b.cssDetachQueue=[];if(x){S=b.namespace=u(k,x);O=S!==n.html?g(k.e):k.e;b.node=a(O,S);if(R.css&&x===R.el){b.node.setAttribute("data-rvcguid",R.constructor._guid||R._guid)}i(b.node,"_ractive",{value:{proxy:b,keypath:s(_),index:_.indexRefs,events:r(null),root:R}})}T=l(b,k.a);if(k.f){if(b.node&&b.node.getAttribute("contenteditable")){if(b.node.innerHTML){j="A pre-populated contenteditable element should not have children";if(R.debug){throw new Error(j)}else{o(j)}}}c(b,b.node,k,E)}if(E&&k.v){d(b,k.v)}if(E){if(R.twoway){b.bind();if(b.node.getAttribute("contenteditable")&&b.node._ractive.binding){b.node._ractive.binding.update()}}if(T.name&&!T.name.twoway){T.name.update()}if(b.node.tagName==="IMG"&&((A=b.attributes.width)||(N=b.attributes.height))){b.node.addEventListener("load",L=function(){if(A){b.node.width=A.value}if(N){b.node.height=N.value}b.node.removeEventListener("load",L,false)},false)}E.appendChild(b.node);if(k.o){h(k.o,R,b)}if(k.t1){v(k.t1,R,b,true)}if(b.node.tagName==="OPTION"){if(x.tagName==="SELECT"&&(C=x._ractive.binding)){C.deferUpdate()}if(!T.value){f(b,"value",k.f)}if(b.node._ractive.value==x._ractive.value){b.node.selected=true}}if(b.node.autofocus){e.focus(b.node)}}if(b.lcName==="option"){b.select=m(b.parent)}p(b)};function m(e){do{if(e.lcName==="select"){return e}}while(e=e.parent)}}(L,D,a,It,f,Z,s,S,hn,Fn,Bn,qn,zn,Gn,$n,ur,dn);var lr=function(e,t){return function r(i){var o,a,s;if(i){this.willDetach=true;e.detachWhenReady(this)}if(this.fragment){this.fragment.teardown(false)}while(this.attributes.length){this.attributes.pop().teardown()}if(this.node){for(o in this.node._ractive.events){this.node._ractive.events[o].teardown()}if(a=this.node._ractive.binding){a.teardown();s=this.root._twowayBindings[a.attr.keypath];s.splice(s.indexOf(a),1)}}if(this.decorator){this.decorator.teardown()}if(this.descriptor.t2){t(this.descriptor.t2,this.root,this,false)}if(this.liveQueries){n(this)}};function n(e){var t,n,r,i,o;i=e.liveQueries.length;while(i--){t=e.liveQueries[i];n=t.selector;t._remove(e.node);if(e.matchingStaticNodes&&(r=e.matchingStaticNodes[n])){o=r.length;while(o--){t.remove(r[o])}}}}}(L,ur);var cr=function(e){return function t(n,r,i,o){var a,s,u,f,l,c,h,d,p;a=this.attributes.length;while(a--){this.attributes[a].reassign(n,r,i,o)}if(s=this.node._ractive){e(s,"keypath",i,o);if(n!=undefined){s.index[n]=r}for(u in s.events){f=s.events[u].proxies;a=f.length;while(a--){l=f[a];if(typeof l.n==="object"){l.a.reassign(n,r,i,o)}if(l.d){l.d.reassign(n,r,i,o)}}}if(c=s.binding){if(c.keypath.substr(0,i.length)===i){h=s.root._twowayBindings[c.keypath];h.splice(h.indexOf(c),1);c.keypath=c.keypath.replace(i,o);h=s.root._twowayBindings[c.keypath]||(s.root._twowayBindings[c.keypath]=[]);h.push(c)}}}if(this.fragment){this.fragment.reassign(n,r,i,o)}if(d=this.liveQueries){p=this.root;a=d.length;while(a--){d[a]._makeDirty()}}}}(Bt);var hr="area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" ");var dr=function(e,t){return function(){var t,i,o,a;t="<"+(this.descriptor.y?"!doctype":this.descriptor.e);o=this.attributes.length;for(i=0;i<o;i+=1){if(a=this.attributes[i].toString()){t+=" "+a}}if(this.lcName==="option"&&n(this)){t+=" selected"}if(this.lcName==="input"&&r(this)){t+=" checked"}t+=">";if(this.html){t+=this.html}else if(this.fragment){t+=this.fragment.toString()}if(e.indexOf(this.descriptor.e)===-1){t+="</"+this.descriptor.e+">"}this.stringifying=false;return t};function n(e){var n,r,i,o,a;n=e.attributes.value.value;r=e.select.attributes.value;i=r.interpolator;if(!i){return}o=e.root.get(i.keypath||i.ref);if(o==n){return true}if(e.select.attributes.multiple&&t(o)){a=o.length;while(a--){if(o[a]==n){return true}}}}function r(e){var t,n,r,i;t=e.attributes;n=t.type;r=t.value;i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator){return}if(r.value===i.interpolator.value){return true}}}(hr,C);var pr=function(e){return function(t){var n;if(e(this.node,t)){return this.node}if(this.html&&(n=this.node.querySelector(t))){return n}if(this.fragment&&this.fragment.find){return this.fragment.find(t)}}}(st);var vr=function(e){return function(t,n){var r,i;if(n._test(this,true)&&n.live){(this.liveQueries||(this.liveQueries=[])).push(n)}if(this.html){r=e(this,t);n.push.apply(n,r);if(n.live&&!i){(this.liveQueries||(this.liveQueries=[])).push(n)}}if(this.fragment){this.fragment.findAll(t,n)}}}(Wn);var gr=function(e){if(this.fragment){return this.fragment.findComponent(e)}};var mr=function(e,t){if(this.fragment){this.fragment.findAllComponents(e,t)}};var yr=function(){var e=this.attributes;if(!this.node){return}if(this.binding){this.binding.teardown();this.binding=null}if(this.node.getAttribute("contenteditable")&&e.value&&e.value.bind()){return}switch(this.descriptor.e){case"select":case"textarea":if(e.value){e.value.bind()}return;case"input":if(this.node.type==="radio"||this.node.type==="checkbox"){if(e.name&&e.name.bind()){return}if(e.checked&&e.checked.bind()){return}}if(e.value&&e.value.bind()){return}}};var br=function(e,t,n,r,i,o,a,s,u,f,l){var c=function(e,t){n(this,e,t)};c.prototype={detach:function(){var n;if(this.node){if(this.node.parentNode){this.node.parentNode.removeChild(this.node)}return this.node}if(this.cssDetachQueue.length){e.start();while(n===this.cssDetachQueue.pop()){t.remove(n)}e.end()}},teardown:r,reassign:i,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:o,find:a,findAll:s,findComponent:u,findAllComponents:f,bind:l};return c}(L,_,fr,lr,cr,dr,pr,vr,gr,mr,yr);var wr={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"};var Er={};var _r=function(e){var t,n,r;r="";while(e.length){t=e.indexOf("<!--");n=e.indexOf("-->");if(t===-1&&n===-1){r+=e;break}if(t!==-1&&n===-1){throw"Illegal HTML - expected closing comment sequence ('-->')"}if(n!==-1&&t===-1||n<t){throw"Illegal HTML - unexpected closing comment sequence ('-->')"}r+=e.substr(0,t);e=e.substring(n+3)}return r};var xr=function(e){return function(t){var n,r,i,o,a,s;a=/^\s*\r?\n/;s=/\r?\n\s*$/;for(n=2;n<t.length;n+=1){r=t[n];i=t[n-1];o=t[n-2];if(r.type===e.TEXT&&(i.type===e.MUSTACHE&&i.mustacheType!==e.PARTIAL)&&o.type===e.TEXT){if(s.test(o.value)&&a.test(r.value)){if(i.mustacheType!==e.INTERPOLATOR&&i.mustacheType!==e.TRIPLE){o.value=o.value.replace(s,"\n")}r.value=r.value.replace(a,"");if(r.value===""){t.splice(n--,1)}}}}return t}}(D);var kr=function(e){return function(t){var n,r,i,o;for(n=0;n<t.length;n+=1){r=t[n];i=t[n-1];o=t[n+1];if(r.mustacheType===e.COMMENT||r.mustacheType===e.DELIMCHANGE){t.splice(n,1);if(i&&o){if(i.type===e.TEXT&&o.type===e.TEXT){i.value+=o.value;t.splice(n,1)}}n-=1}}return t}}(D);var Sr=function(e){var t=e(/^[^\s=]+/);return function(e){var n,r,i;if(!e.getStringMatch("=")){return null}n=e.pos;e.allowWhitespace();r=t(e);if(!r){e.pos=n;return null}e.allowWhitespace();i=t(e);if(!i){e.pos=n;return null}e.allowWhitespace();if(!e.getStringMatch("=")){e.pos=n;return null}return[r,i]}}(xn);var Or=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];if(!n){return null}e.pos+=1;return n}}(D);var Tr=function(e,t,n){var r=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),i=/^[0-9][1-9]*$/;return function(t,a){var s,u,f,l,c,h,d,p,v;s=t.pos;u={type:a?e.TRIPLE:e.MUSTACHE};if(!a){if(l=t.getExpression()){u.mustacheType=e.INTERPOLATOR;t.allowWhitespace();if(t.getStringMatch(t.delimiters[1])){t.pos-=t.delimiters[1].length}else{t.pos=s;l=null}}if(!l){f=n(t);if(f===e.TRIPLE){u={type:e.TRIPLE}}else{u.mustacheType=f||e.INTERPOLATOR}if(f===e.COMMENT||f===e.CLOSING){h=t.remaining();d=h.indexOf(t.delimiters[1]);if(d!==-1){u.ref=h.substr(0,d);t.pos+=d;return u}}}}if(!l){t.allowWhitespace();l=t.getExpression();h=t.remaining();p=a?t.tripleDelimiters[1]:t.delimiters[1];if(h.substr(0,p.length)!==p&&h.charAt(0)!==":"){t.pos=s;h=t.remaining();d=h.indexOf(t.delimiters[1]);if(d!==-1){u.ref=h.substr(0,d).trim();t.pos+=d;return u}}}while(l.t===e.BRACKETED&&l.x){l=l.x}if(l.t===e.REFERENCE){u.ref=l.n}else if(l.t===e.NUMBER_LITERAL&&i.test(l.v)){u.ref=l.v}else if(v=o(l)){u.keypathExpression=v}else{u.expression=l}c=r(t);if(c!==null){u.indexRef=c}return u};function o(t){var n=[];while(t.t===e.MEMBER&&t.r.t===e.REFINEMENT){n.unshift(t.r);t=t.x}if(t.t!==e.REFERENCE){return null}return{r:t.n,m:n}}}(D,xn,Or);var Ar=function(e,t,n){return function(){var e=this.tripleDelimiters[0].length>this.delimiters[0].length;return r(this,e)||r(this,!e)};function r(r,i){var o=r.pos,a,s;s=i?r.tripleDelimiters:r.delimiters;if(!r.getStringMatch(s[0])){return null}a=t(r);if(a){if(!r.getStringMatch(s[1])){r.pos=o;return null}r[i?"tripleDelimiters":"delimiters"]=a;return{type:e.MUSTACHE,mustacheType:e.DELIMCHANGE}}r.allowWhitespace();a=n(r,i);if(a===null){r.pos=o;return null}r.allowWhitespace();if(!r.getStringMatch(s[1])){r.pos=o;return null}return a}}(D,Sr,Tr);var Nr=function(e){return function(){var t,n,r;if(!this.getStringMatch("<!--")){return null}n=this.remaining();r=n.indexOf("-->");if(r===-1){throw new Error('Unexpected end of input (expected "-->" to close comment)')}t=n.substr(0,r);this.pos+=r+3;return{type:e.COMMENT,content:t}}}(D);var Lr=function(e,t){var n,r,i;n=t.length;while(n--){r=e.indexOf(t[n]);if(!r){return 0}if(r===-1){continue}if(!i||r<i){i=r}}return i||-1};var Rr=function(e,t,n){var r,i,o,a,s,u,f,l,c,h,d,p,v;r=function(){return i(this)||o(this)};i=function(t){var n,r,i,o;n=t.pos;if(t.inside){return null}if(!t.getStringMatch("<")){return null}r={type:e.TAG};if(t.getStringMatch("!")){r.doctype=true}r.name=a(t);if(!r.name){t.pos=n;return null}i=s(t);if(i){r.attrs=i}t.allowWhitespace();if(t.getStringMatch("/")){r.selfClosing=true}if(!t.getStringMatch(">")){t.pos=n;return null}o=r.name.toLowerCase();if(o==="script"||o==="style"){t.inside=o}return r};o=function(t){var n,r,i;n=t.pos;i=function(e){throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected "+e+")")};if(!t.getStringMatch("<")){return null}r={type:e.TAG,closing:true};if(!t.getStringMatch("/")){i('"/"')}r.name=a(t);if(!r.name){i("tag name")}if(!t.getStringMatch(">")){i('">"')}if(t.inside){if(r.name.toLowerCase()!==t.inside){t.pos=n;return null}t.inside=null}return r};a=t(/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/);s=function(e){var t,n,r;t=e.pos;if(!e.getStringMatch(" ")&&!e.getStringMatch("\n")){return null}e.allowWhitespace();r=u(e);if(!r){e.pos=t;return null}n=[];while(r!==null){n.push(r);e.allowWhitespace();r=u(e)}return n};u=function(e){var t,n,r;n=f(e);if(!n){return null}t={name:n};r=l(e);if(r){t.value=r}return t};f=t(/^[^\s"'>\/=]+/);l=function(e){var t,n;t=e.pos;e.allowWhitespace();if(!e.getStringMatch("=")){e.pos=t;return null}e.allowWhitespace();n=v(e,"'")||v(e,'"')||c(e);if(n===null){e.pos=t;return null}return n};d=t(/^[^\s"'=<>`]+/);h=function(t){var n,r,i;n=t.pos;r=d(t);if(!r){return null}if((i=r.indexOf(t.delimiters[0]))!==-1){r=r.substr(0,i);t.pos=n+r.length}return{type:e.TEXT,value:r}};c=function(e){var t,n;t=[];n=e.getMustache()||h(e);while(n!==null){t.push(n);n=e.getMustache()||h(e)}if(!t.length){return null}return t};v=function(e,t){var n,r,i;n=e.pos;
if(!e.getStringMatch(t)){return null}r=[];i=e.getMustache()||p(e,t);while(i!==null){r.push(i);i=e.getMustache()||p(e,t)}if(!e.getStringMatch(t)){e.pos=n;return null}return r};p=function(t,r){var i,o,a;i=t.pos;a=t.remaining();o=n(a,[r,t.delimiters[0],t.delimiters[1]]);if(o===-1){throw new Error("Quoted attribute value must have a closing quote")}if(!o){return null}t.pos+=o;return{type:e.TEXT,value:a.substr(0,o)}};return r}(D,xn,Lr);var Cr=function(e,t){return function(){var n,r,i;r=this.remaining();i=this.inside?"</"+this.inside:"<";if(this.inside&&!this.interpolate[this.inside]){n=r.indexOf(i)}else{n=t(r,[i,this.delimiters[0],this.tripleDelimiters[0]])}if(!n){return null}if(n===-1){n=r.length}this.pos+=n;return{type:e.TEXT,value:r.substr(0,n)}}}(D,Lr);var jr=function(e){return function(t){var n=t.remaining();if(n.substr(0,4)==="true"){t.pos+=4;return{t:e.BOOLEAN_LITERAL,v:"true"}}if(n.substr(0,5)==="false"){t.pos+=5;return{t:e.BOOLEAN_LITERAL,v:"false"}}return null}}(D);var Ir=function(e,t){return function(n){var r,i,o;r=n.pos;n.allowWhitespace();i=t(n);if(i===null){n.pos=r;return null}n.allowWhitespace();if(!n.getStringMatch(":")){n.pos=r;return null}n.allowWhitespace();o=n.getExpression();if(o===null){n.pos=r;return null}return{t:e.KEY_VALUE_PAIR,k:i,v:o}}}(D,Ln);var Mr=function(e){return function t(n){var r,i,o,a;r=n.pos;o=e(n);if(o===null){return null}i=[o];if(n.getStringMatch(",")){a=t(n);if(!a){n.pos=r;return null}return i.concat(a)}return i}}(Ir);var Pr=function(e,t){return function(n){var r,i;r=n.pos;n.allowWhitespace();if(!n.getStringMatch("{")){n.pos=r;return null}i=t(n);n.allowWhitespace();if(!n.getStringMatch("}")){n.pos=r;return null}return{t:e.OBJECT_LITERAL,m:i}}}(D,Mr);var Dr=function yo(e){var t,n,r,i;t=e.pos;e.allowWhitespace();r=e.getExpression();if(r===null){return null}n=[r];e.allowWhitespace();if(e.getStringMatch(",")){i=yo(e);if(i===null){e.pos=t;return null}n=n.concat(i)}return n};var Fr=function(e,t){return function(n){var r,i;r=n.pos;n.allowWhitespace();if(!n.getStringMatch("[")){n.pos=r;return null}i=t(n);if(!n.getStringMatch("]")){n.pos=r;return null}return{t:e.ARRAY_LITERAL,m:i}}}(D,Dr);var Br=function(e,t,n,r,i){return function(o){var a=e(o)||t(o)||n(o)||r(o)||i(o);return a}}(An,jr,Tn,Pr,Fr);var Ur=function(e,t,n){var r,i,o,a;r=t(/^\.[a-zA-Z_$0-9]+/);i=function(e){var t=o(e);if(t){return"."+t}return null};o=t(/^\[(0|[1-9][0-9]*)\]/);a=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/;return function(t){var o,s,u,f,l,c,h;o=t.pos;s="";while(t.getStringMatch("../")){s+="../"}if(!s){f=t.getStringMatch(".")||""}u=n(t)||"";if(!s&&!f&&a.test(u)){return{t:e.GLOBAL,v:u}}if(u==="this"&&!s&&!f){u=".";o+=3}l=(s||f)+u;if(!l){return null}while(c=r(t)||i(t)){l+=c}if(t.getStringMatch("(")){h=l.lastIndexOf(".");if(h!==-1){l=l.substr(0,h);t.pos=o+l.length}else{t.pos-=1}}return{t:e.REFERENCE,n:l}}}(D,xn,Nn);var Wr=function(e){return function(t){var n,r;n=t.pos;if(!t.getStringMatch("(")){return null}t.allowWhitespace();r=t.getExpression();if(!r){t.pos=n;return null}t.allowWhitespace();if(!t.getStringMatch(")")){t.pos=n;return null}return{t:e.BRACKETED,x:r}}}(D);var qr=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(Br,Ur,Wr);var Vr=function(e,t){return function n(r){var i,o,a;i=r.pos;r.allowWhitespace();if(r.getStringMatch(".")){r.allowWhitespace();if(o=t(r)){return{t:e.REFINEMENT,n:o}}r.expected("a property name")}if(r.getStringMatch("[")){r.allowWhitespace();a=r.getExpression();if(!a){r.expected("an expression")}r.allowWhitespace();if(!r.getStringMatch("]")){r.expected('"]"')}return{t:e.REFINEMENT,x:a}}return null}}(D,Nn);var zr=function(e,t,n,r){return function(i){var o,a,s,u;a=t(i);if(!a){return null}while(a){o=i.pos;if(s=r(i)){a={t:e.MEMBER,x:a,r:s}}else if(i.getStringMatch("(")){i.allowWhitespace();u=n(i);i.allowWhitespace();if(!i.getStringMatch(")")){i.pos=o;break}a={t:e.INVOCATION,x:a};if(u){a.o=u}}else{break}}return a}}(D,qr,Dr,Vr);var Hr=function(e,t){var n,r;r=function(t,n){return function(r){var i,o;if(!r.getStringMatch(t)){return n(r)}i=r.pos;r.allowWhitespace();o=r.getExpression();if(!o){r.expected("an expression")}return{s:t,o:o,t:e.PREFIX_OPERATOR}}};(function(){var e,i,o,a,s;a="! ~ + - typeof".split(" ");s=t;for(e=0,i=a.length;e<i;e+=1){o=r(a[e],s);s=o}n=s})();return n}(D,zr);var Gr=function(e,t){var n,r;r=function(t,n){return function(r){var i,o,a;o=n(r);if(!o){return null}while(true){i=r.pos;r.allowWhitespace();if(!r.getStringMatch(t)){r.pos=i;return o}if(t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0))){r.pos=i;return o}r.allowWhitespace();a=n(r);if(!a){r.pos=i;return o}o={t:e.INFIX_OPERATOR,s:t,o:[o,a]}}}};(function(){var e,i,o,a,s;a="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");s=t;for(e=0,i=a.length;e<i;e+=1){o=r(a[e],s);s=o}n=s})();return n}(D,Hr);var $r=function(e,t){return function(n){var r,i,o,a;i=t(n);if(!i){return null}r=n.pos;n.allowWhitespace();if(!n.getStringMatch("?")){n.pos=r;return i}n.allowWhitespace();o=n.getExpression();if(!o){n.pos=r;return i}n.allowWhitespace();if(!n.getStringMatch(":")){n.pos=r;return i}n.allowWhitespace();a=n.getExpression();if(!a){n.pos=r;return i}return{t:e.CONDITIONAL,o:[i,o,a]}}}(D,Gr);var Kr=function(e){return function(){return e(this)}}($r);var Jr=function(e,t,n,r,i,o,a){var s;s=function(e,t){var n;this.str=e;this.pos=0;this.delimiters=t.delimiters;this.tripleDelimiters=t.tripleDelimiters;this.interpolate=t.interpolate;this.tokens=[];while(this.pos<this.str.length){n=this.getToken();if(n===null&&this.remaining()){this.fail()}this.tokens.push(n)}};s.prototype={getToken:function(){var e=this.getMustache()||this.getComment()||this.getTag()||this.getText();return e},getMustache:e,getComment:t,getTag:n,getText:r,getExpression:i,allowWhitespace:o,getStringMatch:a,remaining:function(){return this.str.substring(this.pos)},fail:function(){var e,t;e=this.str.substr(0,this.pos).substr(-20);if(e.length===20){e="..."+e}t=this.remaining().substr(0,20);if(t.length===20){t=t+"..."}throw new Error("Could not parse template: "+(e?e+"<- ":"")+"failed at character "+this.pos+" ->"+t)},expected:function(e){var t=this.remaining().substr(0,40);if(t.length===40){t+="..."}throw new Error('Tokenizer failed: unexpected string "'+t+'" (expected '+e+")")}};return s}(Ar,Nr,Rr,Cr,Kr,_n,En);var Yr=function(e,t,n,r,i){return function(o,a){var s,u;a=a||{};if(a.stripComments!==false){o=t(o)}s=new i(o,{delimiters:a.delimiters||e.defaults.delimiters,tripleDelimiters:a.tripleDelimiters||e.defaults.tripleDelimiters,interpolate:{script:a.interpolateScripts!==false?true:false,style:a.interpolateStyles!==false?true:false}});u=s.tokens;n(u);r(u);return u}}(i,_r,xr,kr,Jr);var Qr=function(e){var t,n,r,i,o,a,s,u,f;t=function(e,t){this.text=t?e.value:e.value.replace(f," ")};t.prototype={type:e.TEXT,toJSON:function(){return this.decoded||(this.decoded=u(this.text))},toString:function(){return this.text}};n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};r=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];i=new RegExp("&("+Object.keys(n).join("|")+");?","g");o=/&#x([0-9]+);?/g;a=/&#([0-9]+);?/g;s=function(e){if(!e){return 65533}if(e===10){return 32}if(e<128){return e}if(e<=159){return r[e-128]}if(e<55296){return e}if(e<=57343){return 65533}if(e<=65535){return e}return 65533};u=function(e){var t;t=e.replace(i,function(e,t){if(n[t]){return String.fromCharCode(n[t])}return e});t=t.replace(o,function(e,t){return String.fromCharCode(s(parseInt(t,16)))});t=t.replace(a,function(e,t){return String.fromCharCode(s(t))});return t};f=/\s+/g;return t}(D);var Xr=function(e,t){return function(n,r){if(n.type===e.TEXT){this.pos+=1;return new t(n,r)}return null}}(D,Qr);var Zr=function(e){var t;t=function(e){this.content=e.content};t.prototype={toJSON:function(){return{t:e.COMMENT,f:this.content}},toString:function(){return"<!--"+this.content+"-->"}};return t}(D);var ei=function(e,t){return function(n){if(n.type===e.COMMENT){this.pos+=1;return new t(n,this.preserveWhitespace)}return null}}(D,Zr);var ti=function(e,t){var n=function(e){this.refs=[];i(e,this.refs);this.str=o(e,this.refs)};n.prototype={toJSON:function(){if(!this.json){this.json={r:this.refs,s:this.str}}return this.json}};return n;function r(e){return JSON.stringify(String(e))}function i(n,r){var o,a;if(n.t===e.REFERENCE){if(r.indexOf(n.n)===-1){r.unshift(n.n)}}a=n.o||n.m;if(a){if(t(a)){i(a,r)}else{o=a.length;while(o--){i(a[o],r)}}}if(n.x){i(n.x,r)}if(n.r){i(n.r,r)}if(n.v){i(n.v,r)}}function o(t,n){var i=function(e){return o(e,n)};switch(t.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return t.v;case e.STRING_LITERAL:return r(t.v);case e.ARRAY_LITERAL:return"["+(t.m?t.m.map(i).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(t.m?t.m.map(i).join(","):"")+"}";case e.KEY_VALUE_PAIR:return t.k+":"+o(t.v,n);case e.PREFIX_OPERATOR:return(t.s==="typeof"?"typeof ":t.s)+o(t.o,n);case e.INFIX_OPERATOR:return o(t.o[0],n)+(t.s.substr(0,2)==="in"?" "+t.s+" ":t.s)+o(t.o[1],n);case e.INVOCATION:return o(t.x,n)+"("+(t.o?t.o.map(i).join(","):"")+")";case e.BRACKETED:return"("+o(t.x,n)+")";case e.MEMBER:return o(t.x,n)+o(t.r,n);case e.REFINEMENT:return t.n?"."+t.n:"["+o(t.x,n)+"]";case e.CONDITIONAL:return o(t.o[0],n)+"?"+o(t.o[1],n)+":"+o(t.o[2],n);case e.REFERENCE:return"${"+n.indexOf(t.n)+"}";default:throw new Error("Could not stringify expression token. This error is unexpected")}}}(D,et);var ni=function(e,t){var n;n=function(e){this.json={r:e.r,m:e.m.map(r)}};n.prototype={toJSON:function(){return this.json}};return n;function r(n){if(n.n){return n.n}if(n.x.t===e.STRING_LITERAL||n.x.t===e.NUMBER_LITERAL){return n.x.v}if(n.x.t===e.REFERENCE){return n.x}return new t(n.x).toJSON()}}(D,ti);var ri=function(e,t,n){var r=function(r,i){this.type=r.type===e.TRIPLE?e.TRIPLE:r.mustacheType;if(r.ref){this.ref=r.ref}if(r.keypathExpression){this.keypathExpr=new t(r.keypathExpression)}if(r.expression){this.expr=new n(r.expression)}i.pos+=1};r.prototype={toJSON:function(){var e;if(this.json){return this.json}e={t:this.type};if(this.ref){e.r=this.ref}if(this.keypathExpr){e.kx=this.keypathExpr.toJSON()}if(this.expr){e.x=this.expr.toJSON()}this.json=e;return e},toString:function(){return false}};return r}(D,ni,ti);var ii=function(e){var t="",n,r,i;if(!e){return""}for(r=0,i=e.length;r<i;r+=1){n=e[r].toString();if(n===false){return false}t+=n}return t};var oi=function(e){return function(t,n,r){var i,o;if(!r&&!n){i=e(t);if(i!==false){return i}}o=t.map(function(e){return e.toJSON(n)});return o}}(ii);var ai=function(e,t,n,r,i){var o=function(t,n){var o;this.ref=t.ref;this.indexRef=t.indexRef;this.inverted=t.mustacheType===e.INVERTED;if(t.keypathExpression){this.keypathExpr=new r(t.keypathExpression)}if(t.expression){this.expr=new i(t.expression)}n.pos+=1;this.items=[];o=n.next();while(o){if(o.mustacheType===e.CLOSING){a(this,o);n.pos+=1;break}this.items.push(n.getStub());o=n.next()}};function a(e,n){var r=e.ref,i=t(n.ref.trim());if(!r||!i){return}if(e.indexRef){r+=":"+e.indexRef}if(r.substr(0,i.length)!==i){throw new Error("Could not parse template: Illegal closing section {{/"+i+"}}. Expected {{/"+e.ref+"}}.")}}o.prototype={toJSON:function(t){var r;if(this.json){return this.json}r={t:e.SECTION};if(this.ref){r.r=this.ref}if(this.indexRef){r.i=this.indexRef}if(this.inverted){r.n=true}if(this.expr){r.x=this.expr.toJSON()}if(this.keypathExpr){r.kx=this.keypathExpr.toJSON()}if(this.items.length){r.f=n(this.items,t)}this.json=r;return r},toString:function(){return false}};return o}(D,g,oi,ni,ti);var si=function(e,t,n){return function(r){if(r.type===e.MUSTACHE||r.type===e.TRIPLE){if(r.mustacheType===e.SECTION||r.mustacheType===e.INVERTED){return new n(r,this)}return new t(r,this)}}}(D,ri,ai);var ui={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]};var fi=function(e){return function(e){var n,r,i,o,a,s;i={};n=[];r=[];a=e.length;for(o=0;o<a;o+=1){s=e[o];if(s.name==="intro"){if(i.intro){throw new Error("An element can only have one intro transition")}i.intro=s}else if(s.name==="outro"){if(i.outro){throw new Error("An element can only have one outro transition")}i.outro=s}else if(s.name==="intro-outro"){if(i.intro||i.outro){throw new Error("An element can only have one intro and one outro transition")}i.intro=s;i.outro=t(s)}else if(s.name.substr(0,6)==="proxy-"){s.name=s.name.substring(6);r.push(s)}else if(s.name.substr(0,3)==="on-"){s.name=s.name.substring(3);r.push(s)}else if(s.name==="decorator"){i.decorator=s}else{n.push(s)}}i.attrs=n;i.proxies=r;return i};function t(n){var r,i;if(typeof n!=="object"){return n}if(e(n)){return n.map(t)}r={};for(i in n){if(n.hasOwnProperty(i)){r[i]=t(n[i])}}return r}}(C);var li=function(e,t){return function(n){var r,i,o,a,s,u,f,l;s=function(){throw new Error("Illegal directive")};if(!n.name||!n.value){s()}r={directiveType:n.name};i=n.value;u=[];f=[];while(i.length){o=i.shift();if(o.type===e.TEXT){a=o.value.indexOf(":");if(a===-1){u.push(o)}else{if(a){u.push({type:e.TEXT,value:o.value.substr(0,a)})}if(o.value.length>a+1){f[0]={type:e.TEXT,value:o.value.substring(a+1)}}break}}else{u.push(o)}}f=f.concat(i);if(u.length===1&&u[0].type===e.TEXT){r.name=u[0].value}else{r.name=u}if(f.length){if(f.length===1&&f[0].type===e.TEXT){l=t("["+f[0].value+"]");r.args=l?l.value:f[0].value}else{r.dynamicArgs=f}}return r}}(D,Rn);var ci=function(e,t){var n;n=function(e,t){var n;this.tokens=e||[];this.pos=0;this.options=t;this.result=[];while(n=this.getStub()){this.result.push(n)}};n.prototype={getStub:function(){var e=this.next();if(!e){return null}return this.getText(e)||this.getMustache(e)},getText:e,getMustache:t,next:function(){return this.tokens[this.pos]}};return n}(Xr,si);var hi=function(e,t,n){var r;r=function(t){var n=new e(t);this.stubs=n.result};r.prototype={toJSON:function(e){var t;if(this["json_"+e]){return this["json_"+e]}t=this["json_"+e]=n(this.stubs,e);return t},toString:function(){if(this.str!==undefined){return this.str}this.str=t(this.stubs);return this.str}};return r}(ci,ii,oi);var di=function(e){return function(t){var n,r;if(typeof t.name==="string"){if(!t.args&&!t.dynamicArgs){return t.name}r=t.name}else{r=new e(t.name).toJSON()}n={n:r};if(t.args){n.a=t.args;return n}if(t.dynamicArgs){n.d=new e(t.dynamicArgs).toJSON()}return n}}(hi);var pi=function(e,t,n){return function(r){var i,o,a,s,u,f,l;if(this["json_"+r]){return this["json_"+r]}i={t:e.ELEMENT,e:this.tag};if(this.doctype){i.y=1}if(this.attributes&&this.attributes.length){i.a={};f=this.attributes.length;for(u=0;u<f;u+=1){l=this.attributes[u];o=l.name;if(i.a[o]){throw new Error("You cannot have multiple attributes with the same name")}if(l.value===null){a=null}else{a=l.value.toJSON(r)}i.a[o]=a}}if(this.items&&this.items.length){i.f=t(this.items,r)}if(this.proxies&&this.proxies.length){i.v={};f=this.proxies.length;for(u=0;u<f;u+=1){s=this.proxies[u];i.v[s.directiveType]=n(s)}}if(this.intro){i.t1=n(this.intro)}if(this.outro){i.t2=n(this.outro)}if(this.decorator){i.o=n(this.decorator)}this["json_"+r]=i;return i}}(D,oi,di);var vi=function(e,t){var n;n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" ");return function(){var r,i,o,a,s,u,f,l;if(this.str!==undefined){return this.str}if(n.indexOf(this.tag.toLowerCase())===-1){return this.str=false}if(this.proxies||this.intro||this.outro||this.decorator){return this.str=false}f=e(this.items);if(f===false){return this.str=false}l=t.indexOf(this.tag.toLowerCase())!==-1;r="<"+this.tag;if(this.attributes){for(i=0,o=this.attributes.length;i<o;i+=1){s=this.attributes[i].name;if(s.indexOf(":")!==-1){return this.str=false}if(s==="id"||s==="intro"||s==="outro"){return this.str=false}a=" "+s;if(this.attributes[i].value!==null){u=this.attributes[i].value.toString();if(u===false){return this.str=false}if(u!==""){a+="=";if(/[\s"'=<>`]/.test(u)){a+='"'+u.replace(/"/g,"&quot;")+'"'}else{a+=u}}}r+=a}}if(this.selfClosing&&!l){r+="/>";return this.str=r}r+=">";if(l){return this.str=r}r+=f;r+="</"+this.tag+">";return this.str=r}}(ii,hr);var gi=function(e,t,n,r,i,o,a,s,u){var f,l,c,h,d,p=/^\s+/,v=/\s+$/;f=function(a,s,f){var l,c,h,g,m,y,b;s.pos+=1;y=function(e){return{name:e.name,value:e.value?new u(e.value):null}};this.tag=a.name;b=a.name.toLowerCase();if(b.substr(0,3)==="rv-"){n('The "rv-" prefix for components has been deprecated. Support will be removed in a future version');this.tag=this.tag.substring(3)}f=f||b==="pre"||b==="style"||b==="script";if(a.attrs){h=i(a.attrs);c=h.attrs;g=h.proxies;if(s.options.sanitize&&s.options.sanitize.eventAttributes){c=c.filter(d)}if(c.length){this.attributes=c.map(y)}if(g.length){this.proxies=g.map(o)}if(h.intro){this.intro=o(h.intro)}if(h.outro){this.outro=o(h.outro)}if(h.decorator){this.decorator=o(h.decorator)}}if(a.doctype){this.doctype=true}if(a.selfClosing){this.selfClosing=true}if(t.indexOf(b)!==-1){this.isVoid=true}if(this.selfClosing||this.isVoid){return}this.siblings=r[b];this.items=[];l=s.next();while(l){if(l.mustacheType===e.CLOSING){break}if(l.type===e.TAG){if(l.closing){if(l.name.toLowerCase()===b){s.pos+=1}break}else if(this.siblings&&this.siblings.indexOf(l.name.toLowerCase())!==-1){break}}this.items.push(s.getStub(f));l=s.next()}if(!f){m=this.items[0];if(m&&m.type===e.TEXT){m.text=m.text.replace(p,"");if(!m.text){this.items.shift()}}m=this.items[this.items.length-1];if(m&&m.type===e.TEXT){m.text=m.text.replace(v,"");if(!m.text){this.items.pop()}}}};f.prototype={toJSON:a,toString:s};l="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" ");c="li dd rt rp optgroup option tbody tfoot tr td th".split(" ");h=/^on[a-zA-Z]/;d=function(e){var t=!h.test(e.name);return t};return f}(D,hr,Z,ui,fi,li,pi,vi,hi);var mi=function(e){return function(t){if(this.options.sanitize&&this.options.sanitize.elements){if(this.options.sanitize.elements.indexOf(t.name.toLowerCase())!==-1){return null}}return new e(t,this,this.preserveWhitespace)}}(gi);var yi=function(e,t,n,r,i){var o;o=function(e,t){var n,r;this.tokens=e||[];this.pos=0;this.options=t;this.preserveWhitespace=t.preserveWhitespace;r=[];while(n=this.getStub()){r.push(n)}this.result=i(r,t.noStringify,true)};o.prototype={getStub:function(e){var t=this.next();if(!t){return null}return this.getText(t,this.preserveWhitespace||e)||this.getComment(t)||this.getMustache(t)||this.getElement(t)},getText:e,getComment:t,getMustache:n,getElement:r,next:function(){return this.tokens[this.pos]}};return o}(Xr,ei,si,mi,oi);var bi=function(e,t,n){var r,i,o,a,s;i=/^\s*$/;o=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/;a=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/;r=function(r,a){var u,f,l;a=a||{};if(o.test(r)){return s(r,a)}if(a.sanitize===true){a.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:true}}u=e(r,a);if(!a.preserveWhitespace){l=u[0];if(l&&l.type===t.TEXT&&i.test(l.value)){u.shift()}l=u[u.length-1];if(l&&l.type===t.TEXT&&i.test(l.value)){u.pop()}}f=new n(u,a).result;if(typeof f==="string"){return[f]}return f};s=function(e,t){var n,i,s,u,f,l;s={};n="";i=e;while(f=o.exec(i)){u=f[1];n+=i.substr(0,f.index);i=i.substring(f.index+f[0].length);l=a.exec(i);if(!l||l[1]!==u){throw new Error("Inline partials must have a closing delimiter, and cannot be nested")}s[u]=r(i.substr(0,l.index),t);i=i.substring(l.index+l[0].length)}return{main:r(n,t),partials:s}};return r}(Yr,D,yi);var wi=function(){var e=/^\s*$/,t=/^\s*/;return function(t){var r,i,o,a;r=t.split("\n");i=r[0];if(i!==undefined&&e.test(i)){r.shift()}o=r[r.length-1];if(o!==undefined&&e.test(o)){r.pop()}a=r.reduce(n,null);if(a){t=r.map(function(e){return e.replace(a,"")}).join("\n")}return t};function n(e,n){var r=t.exec(n)[0];if(e===null||r.length<e.length){return r}return e}}();var Ei=function(e,t,n,r,i,o,a){var s,u,f,l;s=function(r,s){var c,h,d;if(h=f(r,s)){return h}if(t){c=document.getElementById(s);if(c&&c.tagName==="SCRIPT"){if(!o){throw new Error(e.missingParser)}u(o(a(c.text),r.parseOptions),s,i)}}h=i[s];if(!h){d='Could not find descriptor for partial "'+s+'"';if(r.debug){throw new Error(d)}else{n(d)}return[]}return l(h)};f=function(t,n){var r;if(t.partials[n]){if(typeof t.partials[n]==="string"){if(!o){throw new Error(e.missingParser)}r=o(t.partials[n],t.parseOptions);u(r,n,t.partials)}return l(t.partials[n])}};u=function(e,t,n){var i;if(r(e)){n[t]=e.main;for(i in e.partials){if(e.partials.hasOwnProperty(i)){n[i]=e.partials[i]}}}else{n[t]=e}};l=function(e){if(e.length===1&&typeof e[0]==="string"){return e[0]}return e};return s}(wr,u,Z,et,Er,bi,wi);var _i=function(e,t){var n;if(!t){return e}n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n");return n};var xi=function(e,t,n,r){var i,o;r.push(function(){o=r.DomFragment});i=function(n,r){var i=this.parentFragment=n.parentFragment,a;this.type=e.PARTIAL;this.name=n.descriptor.r;this.index=n.index;if(!n.descriptor.r){throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.")}a=t(i.root,n.descriptor.r);this.fragment=new o({descriptor:a,root:i.root,pNode:i.pNode,owner:this});if(r){r.appendChild(this.fragment.docFrag)}};i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},reassign:function(e,t,n,r){return this.fragment.reassign(e,t,n,r)},teardown:function(e){this.fragment.teardown(e)},toString:function(){var t,r,i,o;t=this.fragment.toString();r=this.parentFragment.items[this.index-1];if(!r||r.type!==e.TEXT){return t}i=r.descriptor.split("\n").pop();if(o=/^\s+$/.exec(i)){return n(t,o[0])}return t},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}};return i}(D,Ei,_i,w);var ki=function(e,t){var n=function(e,n,r){this.parentFragment=e.parentFragment;this.component=e;this.key=n;this.fragment=new t({descriptor:r,root:e.root,owner:this});this.selfUpdating=this.fragment.isSimple();this.value=this.fragment.getValue()};n.prototype={bubble:function(){if(this.selfUpdating){this.update()}else if(!this.deferred&&this.ready){e.addAttribute(this);this.deferred=true}},update:function(){var e=this.fragment.getValue();this.component.instance.set(this.key,e);this.value=e},teardown:function(){this.fragment.teardown()}};return n}(L,Pn);var Si=function(e,t,n,r,i){return function(e,t,n,r){var i,a,s;i={};e.complexParameters=[];for(a in n){if(n.hasOwnProperty(a)){s=o(e,a,n[a],r);if(s!==undefined||t[a]===undefined){i[a]=s}}}return i};function o(o,a,s,u){var f,l,c,h,d,p;c=o.root;h=o.parentFragment;if(typeof s==="string"){l=t(s);return l?l.value:s}if(s===null){return true}if(s.length===1&&s[0].t===e.INTERPOLATOR&&s[0].r){if(h.indexRefs&&h.indexRefs[p=s[0].r]!==undefined){o.indexRefBindings[p]=a;return h.indexRefs[p]}d=n(c,s[0].r,h)||s[0].r;u.push({childKeypath:a,parentKeypath:d});return r(c,d)}f=new i(o,a,s);o.complexParameters.push(f);return f.value}}(D,Rn,O,X,ki);var Oi=function(){return function(t,n,r,i,o){var a,s,u,f,l;s=t.parentFragment;f=t.root;u={content:o||[]};l=e(f,n.defaults.adapt,n.adaptors);a=new n({el:s.pNode,append:true,data:r,partials:u,magic:f.magic||n.defaults.magic,modifyArrays:f.modifyArrays,_parent:f,_component:t,adapt:l});if(i){a.insert(i);a.fragment.pNode=a.el=s.pNode}return a};function e(e,t){var n,r,i;if(e.adapt.length){n=e.adapt.map(function(t){if(typeof t==="object"){return t}return e.adaptors[t]||t})}else{n=[]}if(r=t.length){for(i=0;i<r;i+=1){if(n.indexOf(t[i])===-1){n.push(t[i])}}}return n}}();var Ti=function(e,t,n){return function r(i,o){o.forEach(function a(r){var o,a;e(i,i.root,r.parentKeypath,r.childKeypath);o=t(i.instance,r.childKeypath);a=t(i.root,r.parentKeypath);if(o!==undefined&&a===undefined){n(i.root,r.parentKeypath,o)}})}}(J,X,U);var Ai=function(e){var t="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,t){var r;for(r in t){if(t.hasOwnProperty(r)){n(e.instance,e.root,r,t[r])}}};function n(n,r,i,o){if(typeof o!=="string"){if(r.debug){throw new Error(t)}else{e(t);return}}n.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(o);r.fire.apply(r,e)})}}(Z);var Ni=function(e){var t,n;t=e.root;while(t){if(n=t._liveComponentQueries[e.name]){n.push(e.instance)}t=t._parent}};var Li=function(e,t,n,r,i,o,a){return function s(u,f,l){var c,h,d,p,v;c=u.parentFragment=f.parentFragment;h=c.root;u.root=h;u.type=e.COMPONENT;u.name=f.descriptor.e;u.index=f.index;u.indexRefBindings={};u.bindings=[];d=h.components[f.descriptor.e];if(!d){throw new Error('Component "'+f.descriptor.e+'" not found')}v=[];p=n(u,d.data||{},f.descriptor.a,v);r(u,d,p,l,f.descriptor.f);i(u,v);o(u,f.descriptor.v);if(f.descriptor.t1||f.descriptor.t2||f.descriptor.o){t('The "intro", "outro" and "decorator" directives have no effect on components')}a(u)}}(D,Z,Si,Oi,Ti,Ai,Ni);var Ri=function(e,t){var n=function(t,n){e(this,t,n)};n.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(e){while(this.complexParameters.length){this.complexParameters.pop().teardown()}while(this.bindings.length){this.bindings.pop().teardown()}r(this);this.shouldDestroy=e;this.instance.teardown()},reassign:function(e,n,r,i){var o=this.instance,a=o._parent,s,u;this.bindings.forEach(function(s){var u;if(s.root!==a){return}if(s.keypath===e){o.set(s.otherKeypath,n)}if(u=t(s.keypath,r,i)){s.reassign(u)}});if(s=this.indexRefBindings[e]){o.set(s,n)}if(u=this.root._liveComponentQueries[this.name]){u._makeDirty()}},toString:function(){return this.instance.fragment.toString()},find:function(e){return this.instance.fragment.find(e)},findAll:function(e,t){return this.instance.fragment.findAll(e,t)},findComponent:function(e){if(!e||e===this.name){return this.instance}if(this.instance.fragment){return this.instance.fragment.findComponent(e)}return null},findAllComponents:function(e,t){t._test(this,true);if(this.instance.fragment){this.instance.fragment.findAllComponents(e,t)}}};return n;function r(e){var t,n;t=e.root;do{if(n=t._liveComponentQueries[e.name]){n._remove(e)}}while(t=t._parent)}}(Li,Ft);var Ci=function(e,t){var n=function(t,n){this.type=e.COMMENT;this.descriptor=t.descriptor;if(n){this.node=document.createComment(t.descriptor.f);n.appendChild(this.node)}};n.prototype={detach:t,teardown:function(e){if(e){this.detach()}},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}};return n}(D,Vt);var ji=function(e,t,n,r,i,o,a,s,u,f,l,c,h){var d=function(e){if(e.pNode){this.docFrag=document.createDocumentFragment()}if(typeof e.descriptor==="string"){this.html=e.descriptor;if(this.docFrag){this.nodes=r(this.html,e.pNode.tagName,e.pNode.namespaceURI,this.docFrag)}}else{n.init(this,e)}};d.prototype={reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){if(this.nodes){e=this.nodes.length;for(t=0;t<e;t+=1){this.docFrag.appendChild(this.nodes[t])}}else if(this.items){e=this.items.length;for(t=0;t<e;t+=1){this.docFrag.appendChild(this.items[t].detach())}}return this.docFrag}},createItem:function(t){if(typeof t.descriptor==="string"){return new i(t,this.docFrag)}switch(t.descriptor.t){case e.INTERPOLATOR:return new o(t,this.docFrag);case e.SECTION:return new a(t,this.docFrag);case e.TRIPLE:return new s(t,this.docFrag);case e.ELEMENT:if(this.root.components[t.descriptor.e]){return new l(t,this.docFrag)}return new u(t,this.docFrag);case e.PARTIAL:return new f(t,this.docFrag);case e.COMMENT:return new c(t,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")
}},teardown:function(e){var t;if(this.nodes&&e){while(t=this.nodes.pop()){t.parentNode.removeChild(t)}}else if(this.items){while(this.items.length){this.items.pop().teardown(e)}}this.nodes=this.items=this.docFrag=null},firstNode:function(){if(this.items&&this.items[0]){return this.items[0].firstNode()}else if(this.nodes){return this.nodes[0]||null}return null},findNextNode:function(e){var t=e.index;if(this.items[t+1]){return this.items[t+1].firstNode()}if(this.owner===this.root){if(!this.owner.component){return null}return this.owner.component.findNextNode()}return this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html){return this.html}e="";if(!this.items){return e}n=this.items.length;for(t=0;t<n;t+=1){r=this.items[t];e+=r.toString()}return e},find:function(e){var n,r,i,o,a;if(this.nodes){r=this.nodes.length;for(n=0;n<r;n+=1){o=this.nodes[n];if(o.nodeType!==1){continue}if(t(o,e)){return o}if(a=o.querySelector(e)){return a}}return null}if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.find&&(a=i.find(e))){return a}}return null}},findAll:function(e,n){var r,i,o,a,s,u,f;if(this.nodes){i=this.nodes.length;for(r=0;r<i;r+=1){a=this.nodes[r];if(a.nodeType!==1){continue}if(t(a,e)){n.push(a)}if(s=a.querySelectorAll(e)){u=s.length;for(f=0;f<u;f+=1){n.push(s[f])}}}}else if(this.items){i=this.items.length;for(r=0;r<i;r+=1){o=this.items[r];if(o.findAll){o.findAll(e,n)}}}return n},findComponent:function(e){var t,n,r,i;if(this.items){t=this.items.length;for(n=0;n<t;n+=1){r=this.items[n];if(r.findComponent&&(i=r.findComponent(e))){return i}}return null}},findAllComponents:function(e,t){var n,r,i;if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.findAllComponents){i.findAllComponents(e,t)}}}return t}};h.DomFragment=d;return d}(D,st,Wt,qt,zt,rn,ln,cn,br,xi,Ri,Ci,w);var Ii=function(e,t,n){return function i(o,a){this._rendering=true;e.start(this,a);if(!this._initing){throw new Error("You cannot call ractive.render() directly!")}if(this.constructor.css){t.add(this.constructor)}this.fragment=new n({descriptor:this.template,root:this,owner:this,pNode:o});if(o){o.appendChild(this.fragment.docFrag)}if(!this._parent||!this._parent._rendering){r(this)}delete this._rendering;e.end()};function r(e){var t;while(t=e._childInitQueue.pop()){if(t.instance.init){t.instance.init(t.options)}r(t.instance)}}}(L,_,ji);var Mi=function(e){return function(){e("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead");return this.toHTML()}}(Z);var Pi=function(e,t,n,r){return function(i,o){var a,s,u;if(typeof i==="function"){o=i;i={}}else{i=i||{}}if(typeof i!=="object"){throw new Error("The reset method takes either no arguments, or an object containing new data")}a=new e(function(e){s=e});if(o){a.then(o)}t.start(this,s);if((u=this._wrapped[""])&&u.reset){if(u.reset(i)===false){this.data=i}}else{this.data=i}n(this,"");r(this,"");t.end();this.fire("reset",i);return a}}(v,L,F,A);var Di=function(e,t,n,r,i){return function o(a,s,u){var f,l,c;l=new r(function(e){c=e});e.start(this,c);if(t(a)){f=a;u=s;for(a in f){if(f.hasOwnProperty(a)){s=f[a];a=n(a);i(this,a,s)}}}else{a=n(a);i(this,a,s)}e.end();if(u){l.then(u.bind(this))}return l}}(L,et,g,v,U);var Fi=function(e){return function(t,n){return e(this,t,n===undefined?-1:-n)}}(h);var Bi=function(e,t,n,r,i){return function(o){var a,s,u,f,l,c,h,d;this.fire("teardown");f=!this.component||this.component.shouldDestroy;if(this.constructor.css){if(f){l=o;o=function(){if(l){l.call(this)}t.remove(this.constructor)}}else{c=this.component.parentFragment;do{if(c.owner.type!==e.ELEMENT){continue}if(c.owner.willDetach){h=c.owner}}while(!h&&(c=c.parent));if(!h){throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!")}h.cssDetachQueue.push(this.constructor)}}s=new r(function(e){u=e});n.start(this,u);this.fragment.teardown(f);while(this._animations[0]){this._animations[0].stop()}for(a in this._cache){i(this,a)}while(d=this._unresolvedImplicitDependencies.pop()){d.teardown()}n.end();if(o){s.then(o.bind(this))}return s}}(D,_,L,v,F);var Ui=function(){return this.fragment.toString()};var Wi=function(e,t){var n;if(typeof e!=="string"){if(this.debug){throw new Error("Bad arguments")}return}n=this.get(e);return this.set(e,!n,t)};var qi=function(e,t,n,r){return function(i,o){var a,s;if(typeof i==="function"){o=i;i=""}else{i=i||""}a=new t(function(e){s=e});e.start(this,s);n(this,i);r(this,i);e.end();this.fire("update",i);if(o){a.then(o.bind(this))}return a}}(L,v,F,A);var Vi=function(e,t,n){return function i(t,n){var i,o,a;if(typeof t!=="string"){t="";n=true}r(this,t,i={},o=[],n);if(a=o.length){while(a--){t=o[a];i[t]=e(this,t)}}this.set(i)};function r(e,i,o,a,s){var u,f,l,c,h,d;u=e._twowayBindings[i];if(u){l=u.length;while(l--){c=u[l];if(c.radioName&&!c.node.checked){continue}if(c.checkboxName){if(c.changed()&&a[i]!==true){a[i]=true;a.push(i)}continue}h=c.attr.value;d=c.value();if(t(h,d)){continue}if(!n(h,d)){o[i]=d}}}if(!s){return}f=e._depsMap[i];if(f){l=f.length;while(l--){r(e,f[l],o,a,s)}}}}(x,yn,p);var zi=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g,m,y,b,w,E,_,x){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:o,findComponent:a,fire:s,get:u,insert:f,merge:l,observe:c,off:h,on:d,render:p,renderHTML:v,reset:g,set:m,subtract:y,teardown:b,toHTML:w,toggle:E,update:_,updateModel:x}}(d,it,ot,at,gt,mt,yt,bt,Et,xt,Ot,Rt,Ct,jt,Ii,Mi,Pi,Di,Fi,Bi,Ui,Wi,qi,Vi);var Hi={};var Gi={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){if((e/=.5)<1){return.5*Math.pow(e,3)}return.5*(Math.pow(e-2,3)+2)}};var $i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;t=Math.random()*16|0;n=e=="x"?t:t&3|8;return n.toString(16)})};var Ki=function(e){var t,n,r=Array.prototype.slice.call(arguments,1);while(n=r.shift()){for(t in n){if(n.hasOwnProperty(t)){e[t]=n[t]}}}return e};var Ji=["adaptors","components","decorators","easing","events","interpolators","partials","transitions","data"];var Yi=function(){var e=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,t=/\/\*.*?\*\//g,n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g;return function o(a,s){var u,f;f=function(e){var t,r,o,a,u,f,l,c,h=[];t=[];while(r=n.exec(e)){t.push({str:r[0],base:r[1],modifiers:r[2]})}a='[data-rvcguid="'+s+'"]';u=t.map(i);c=t.length;while(c--){l=u.slice();o=t[c];l[c]=o.base+a+o.modifiers||"";f=u.slice();f[c]=a+" "+f[c];h.push(l.join(" "),f.join(" "))}return h.join(", ")};u=a.replace(t,"").replace(e,function(e,t){var n,i;n=t.split(",").map(r);i=n.map(f).join(", ")+" ";return e.replace(t,i)});return u};function r(e){if(e.trim){return e.trim()}return e.replace(/^\s+/,"").replace(/\s+$/,"")}function i(e){return e.str}}();var Qi=function(e,t,n,r){return function(i,o){e.forEach(function(e){if(o[e]){i[e]=t(o[e])}});n(i,"defaults",{value:t(o.defaults)});if(o.css){n(i,"css",{value:o.defaults.noCssTransform?o.css:r(o.css,i._guid)})}}}(Ji,It,f,Yi);var Xi=function(e,t){if(/_super/.test(e)){return function(){var n=this._super,r;this._super=t;r=e.apply(this,arguments);this._super=n;return r}}else{return e}};var Zi=function(e,t){var n;for(n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e};var eo=function(e,t,n,r,i,o){var a={};t.concat(e.keys).forEach(function(e){a[e]=true});return function(s,u){var f,l;t.forEach(function(e){var t=u[e];if(t){if(s[e]){i(s[e],t)}else{s[e]=t}}});e.keys.forEach(function(e){var t=u[e];if(t!==undefined){if(typeof t==="function"&&typeof s[e]==="function"){s.defaults[e]=r(t,s[e])}else{s.defaults[e]=u[e]}}});for(f in u){if(!a[f]&&u.hasOwnProperty(f)){l=u[f];if(typeof l==="function"&&typeof s.prototype[f]==="function"){s.prototype[f]=r(l,s.prototype[f])}else{s.prototype[f]=l}}}if(u.css){n(s,"css",{value:s.defaults.noCssTransform?u.css:o(u.css,s._guid)})}}}(i,Ji,f,Xi,Zi,Yi);var to=function(e,t){return function(n,r){if(e(n.defaults.template)){if(!n.partials){n.partials={}}t(n.partials,n.defaults.template.partials);if(r.partials){t(n.partials,r.partials)}n.defaults.template=n.defaults.template.main}}}(et,Zi);var no=function(e,t,n){return function(r){var i;if(typeof r.defaults.template==="string"){if(!n){throw new Error(e.missingParser)}if(r.defaults.template.charAt(0)==="#"&&t){i=document.getElementById(r.defaults.template.substring(1));if(i&&i.tagName==="SCRIPT"){r.defaults.template=n(i.innerHTML,r)}else{throw new Error("Could not find template element ("+r.defaults.template+")")}}else{r.defaults.template=n(r.defaults.template,r.defaults)}}}}(wr,u,bi);var ro=function(e,t){return function(n){var r;if(n.partials){for(r in n.partials){if(n.partials.hasOwnProperty(r)&&typeof n.partials[r]==="string"){if(!t){throw new Error(e.missingParser)}n.partials[r]=t(n.partials[r],n)}}}}}(wr,bi);var io=function(){var e=/\$\{([^\}]+)\}/g;return function(e){if(typeof e==="function"){return{get:e}}if(typeof e==="string"){return{get:t(e)}}if(typeof e==="object"&&typeof e.get==="string"){e={get:t(e.get),set:e.set}}return e};function t(t){var n="var __ractive=this;return("+t.replace(e,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}}();var oo=function(e,t,n){var r=function(e,n){this.root=e.ractive;this.keypath=n;this.priority=0;this.computation=e;t(this)};r.prototype={update:function(){var t;t=this.root.get(this.keypath);if(!e(t,this.value)){this.computation.bubble()}},teardown:function(){n(this)}};return r}(p,$,K);var ao=function(e,t,n,r){var i=function(e,t,n){this.ractive=e;this.key=t;this.getter=n.get;this.setter=n.set;this.watchers=[];this.update()};i.prototype={set:function(e){if(this.setting){this.value=e;return}if(!this.setter){throw new Error("Computed properties without setters are read-only in the current version")}this.setter.call(this.ractive,e)},update:function(){var t,r,i,a;t=this.ractive;r=t._captured;if(!r){t._captured=[]}try{i=this.getter.call(t)}catch(s){if(t.debug){e('Failed to compute "'+this.key+'": '+s.message||s)}a=true}o(this,this.watchers,t._captured);t._captured=r;if(!a){this.setting=true;this.value=i;n(t,this.key,i);this.setting=false}this.deferred=false},bubble:function(){if(this.watchers.length<=1){this.update()}else if(!this.deferred){t.addComputation(this);this.deferred=true}}};function o(e,t,n){var i,o,a;i=t.length;while(i--){o=t[i];if(!n[o.keypath]){t.splice(i,1);t[o.keypath]=null;o.teardown()}}i=n.length;while(i--){a=n[i];if(!t[a]){o=new r(e,a);t.push(t[a]=o)}}}return i}(Z,L,U,oo);var so=function(e,t){return function n(r,i){var o,a;for(o in i){a=e(i[o]);r._computations[o]=new t(r,o,a)}}}(io,ao);var uo=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g){var m=["adapt","modifyArrays","magic","twoway","lazy","debug","isolated"];return function y(b,w){var E,_,x,k,S,O,T;if(c(w.adaptors)){i("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`. See [TODO] for more information");w.adapt=w.adaptors;delete w.adaptors}E=b.constructor.defaults;n.keys.forEach(function(e){if(w[e]===undefined){w[e]=E[e]}});m.forEach(function(e){b[e]=w[e]});if(typeof b.adapt==="string"){b.adapt=[b.adapt]}if(b.magic&&!p){throw new Error("Getters and setters (magic mode) are not supported in this browser")}u(b,{_initing:{value:true,writable:true},_guid:{value:h()},_subs:{value:o(null),configurable:true},_cache:{value:{}},_cacheMap:{value:o(null)},_deps:{value:[]},_depsMap:{value:o(null)},_patternObservers:{value:[]},_evaluators:{value:o(null)},_computations:{value:o(null)},_twowayBindings:{value:{}},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:o(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},_changes:{value:[]},_unresolvedImplicitDependencies:{value:[]}});if(w._parent&&w._component){u(b,{_parent:{value:w._parent},component:{value:w._component}});w._component.instance=b}if(w.el){b.el=f(w.el);if(!b.el&&b.debug){throw new Error("Could not find container element")}}if(w.eventDefinitions){i("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions");w.events=w.eventDefinitions}r.forEach(function(e){if(b.constructor[e]){b[e]=a(o(b.constructor[e]),w[e])}else if(w[e]){b[e]=w[e]}});if(!b.data){b.data={}}T=E.computed?a(o(E.computed),w.computed):w.computed;if(T){g(b,T)}_=w.template;if(typeof _==="string"){if(!v){throw new Error(t.missingParser)}if(_.charAt(0)==="#"&&e){x=document.getElementById(_.substring(1));if(x){k=v(x.innerHTML,w)}else{throw new Error("Could not find template element ("+_+")")}}else{k=v(_,w)}}else{k=_}if(l(k)){s(b.partials,k.partials);k=k.main}if(k&&k.length===1&&typeof k[0]==="string"){k=k[0]}b.template=k;a(b.partials,w.partials);b.parseOptions={preserveWhitespace:w.preserveWhitespace,sanitize:w.sanitize,stripComments:w.stripComments};b.transitionsEnabled=w.noIntro?false:w.transitionsEnabled;if(e&&!b.el){b.el=document.createDocumentFragment()}if(b.el&&!w.append){b.el.innerHTML=""}S=new d(function(e){O=e});b.render(b.el,O);if(w.complete){S.then(w.complete.bind(b))}b.transitionsEnabled=w.transitionsEnabled;b._initing=false}}(u,wr,i,Ji,Z,It,Ki,ir,l,_t,et,C,$i,v,z,bi,so);var fo=function(e,t,n){return function r(i,o,a){e.keys.forEach(function(e){var n=a[e],r=o.defaults[e];if(typeof n==="function"&&typeof r==="function"){a[e]=t(n,r)}});if(i.beforeInit){i.beforeInit(a)}n(i,a);if(a._parent&&a._parent._rendering){a._parent._childInitQueue.push({instance:i,options:a})}else if(i.init){i.init(a)}}}(i,Xi,uo);var lo=function(e,t,n,r,i,o,a,s,u,f,l){var c;l.push(function(){c=l.Ractive});return function h(l){var h=this,d,p,v;if(l.prototype instanceof c){l=r({},l,l.prototype,l.defaults)}d=function(e){f(this,d,e||{})};d.prototype=e(h.prototype);d.prototype.constructor=d;t(d,{extend:{value:h.extend},_guid:{value:n()}});i(d,h);o(d,l);if(d.adaptors&&(v=d.defaults.adapt.length)){while(v--){p=d.defaults.adapt[v];if(typeof p==="string"){d.defaults.adapt[v]=d.adaptors[p]||p}}}if(l.template){s(d);a(d,l);u(d)}return d}}(It,l,$i,Ki,Qi,eo,to,no,ro,fo,w);var co=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d){var p=function(e){h(this,e)};p.prototype=r;n(p,{partials:{value:i},adaptors:{value:o},easing:{value:s},transitions:{value:{}},events:{value:{}},components:{value:a},decorators:{value:{}},interpolators:{value:u},defaults:{value:e.defaults},svg:{value:t},VERSION:{value:"0.4.0"}});p.eventDefinitions=p.events;p.prototype.constructor=p;p.Promise=f;p.extend=l;p.parse=c;d.Ractive=p;return p}(i,o,l,zi,Er,I,Hi,Gi,tt,v,lo,bi,uo,w);var ho=function(e,t){var n="function";while(t.length){t.pop()()}if(typeof Date.now!==n||typeof String.prototype.trim!==n||typeof Object.keys!==n||typeof Array.prototype.indexOf!==n||typeof Array.prototype.forEach!==n||typeof Array.prototype.map!==n||typeof Array.prototype.filter!==n||typeof window!=="undefined"&&typeof window.addEventListener!==n){throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.")}if(typeof window!=="undefined"&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains){window.Node.prototype.contains=window.HTMLElement.prototype.contains}return e}(co,w,r);if(typeof t!=="undefined"&&t.exports){t.exports=ho}else if(typeof define==="function"&&define.amd){define(function(){return ho})}e.Ractive=ho;ho.noConflict=function(){e.Ractive=n;return ho}})(typeof window!=="undefined"?window:this)},{}],71:[function(e,t,n){t.exports=function r(e,t){var n=0;var r=t.indexOf(e);while(r!==-1){n++;r=t.indexOf(e,r+1)}return n}},{}],72:[function(e,t,n){var r=e("./templateToolbox");var i=e("./numberOfOccurrances");var o=e("events").EventEmitter;function a(){return Object.create(new o)}function s(e,t){var n=Object.create(e);var r=0;t.forEach(function(e){var t=e.split("=");var i,o;if(t.length>1){i=t[0];o=t[1]}else{r++;i=r;o=t[0]}n[i]=o});return n}function u(e){var t=e.data;if(!t){t=e.ractive?e.ractive.get():{}}e.templateElements=[];e.html=e.html.replace(/::([^:]+)::/gm,function(n,o,u,f){var l=i("<code",f.substr(0,u));var c=i("</code",f.substr(0,u));if(l!==c){return n}else{var h=a();var d=o.split("|");h.postName=d.shift(0);h.elementId=r.generateId(h.postName);h.data=s(t,d);e.templateElements.push(h);return r.generatePostDiv(h.elementId)}});return e}t.exports=u},{"./numberOfOccurrances":71,"./templateToolbox":73,events:83}],73:[function(e,t,n){var r=e("pagedown").Converter;var i=new r;var o=/noddity_post_(.+)_[\da-z]{12}4[\da-z]{19}/;function a(e){return e.metadata.markdown!==false?i.makeHtml(e.content):e.content}function s(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function u(e){return"noddity_post_"+e+"_"+s()}function f(e){var t=o.exec(e);if(t!==null){return t[1]}}function l(e){return o.test(e)}function c(e){return'<span class="noddity-template" id="'+e+'"></span>'}function h(e,t){var n=Object.create(t);var r=0;e.forEach(function(e){var t=e.split("=");var i,o;if(t.length>1){i=t[0];o=t[1]}else{r++;i=r;o=t[0]}n[i]=o});return n}t.exports={generateId:u,getPostName:f,generatePostDiv:c,isAPostDiv:l,getTemplateDataObject:h,htmlify:a}},{pagedown:77}],74:[function(e,t,n){t.exports=function r(e){var t={};e.on("post changed",function(e,n,r){if(t[e]){t[e].forEach(function(e){e.emit("post changed",n)})}});return function n(e){if(typeof t[e.postName]==="undefined"){t[e.postName]=[]}t[e.postName].push(e);e.ractive.on("teardown",function(){t[e.postName]=t[e.postName].filter(function(t){return t!==e})})}}},{}],75:[function(e,t,n){var r;if(typeof n==="object"&&typeof e==="function")r=n;else r={};(function(){function e(e){return e}function t(e){return false}function n(){}n.prototype={chain:function(t,n){var r=this[t];if(!r)throw new Error("unknown hook "+t);if(r===e)this[t]=n;else this[t]=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=r.apply(null,t);return n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}};r.HookCollection=n;function i(){}i.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}};r.Converter=function(){var e=this.hooks=new n;e.addNoop("plainLinkText");e.addNoop("preConversion");e.addNoop("postNormalization");e.addNoop("preBlockGamut");e.addNoop("postBlockGamut");e.addNoop("preSpanGamut");e.addNoop("postSpanGamut");e.addNoop("postConversion");var t;var r;var o;var a;this.makeHtml=function(n){if(t)throw new Error("Recursive call to converter.makeHtml");t=new i;r=new i;o=[];a=0;n=e.preConversion(n);n=n.replace(/~/g,"~T");n=n.replace(/\$/g,"~D");n=n.replace(/\r\n/g,"\n");n=n.replace(/\r/g,"\n");n="\n\n"+n+"\n\n";n=P(n);n=n.replace(/^[ \t]+$/gm,"");n=e.postNormalization(n);n=u(n);n=s(n);n=c(n);n=I(n);n=n.replace(/~D/g,"$$");n=n.replace(/~T/g,"~");n=e.postConversion(n);o=r=t=null;return n};function s(e){e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,n,i,o,a,s){n=n.toLowerCase();t.set(n,L(i));if(a){return o}else if(s){r.set(n,s.replace(/"/g,"&quot;"))}return""});return e}function u(e){var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,f);e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,f);e=e.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,f);e=e.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,f);e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,f);return e}function f(e,t){var n=t;n=n.replace(/^\n+/,"");n=n.replace(/\n+$/g,"");n="\n\n~K"+(o.push(n)-1)+"K\n\n";return n}var l=function(e){return c(e)};function c(t,n){t=e.preBlockGamut(t,l);t=b(t);var r="<hr />\n";t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r);t=t.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,r);t=t.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r);t=w(t);t=x(t);t=A(t);t=e.postBlockGamut(t,l);t=u(t);t=N(t,n);return t}function h(t){t=e.preSpanGamut(t);t=S(t);t=d(t);t=R(t);t=g(t);t=p(t);t=j(t);t=t.replace(/~P/g,"://");t=L(t);t=T(t);t=t.replace(/  +\n/g," <br>\n");t=e.postSpanGamut(t);return t}function d(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");t=B(t,e.charAt(1)=="!"?"\\`*_/":"\\`*_");return t});return e}function p(e){e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v);e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v);e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,v);return e}function v(e,n,i,o,a,s,u,f){if(f==undefined)f="";var l=n;var c=i.replace(/:\/\//g,"~P");var h=o.toLowerCase();var d=a;var p=f;if(d==""){if(h==""){h=c.toLowerCase().replace(/ ?\n/g," ")}d="#"+h;if(t.get(h)!=undefined){d=t.get(h);if(r.get(h)!=undefined){p=r.get(h)}}else{if(l.search(/\(\s*\)$/m)>-1){d=""}else{return l}}}d=F(d);d=B(d,"*_");var v='<a href="'+d+'"';if(p!=""){p=m(p);p=B(p,"*_");v+=' title="'+p+'"'}v+=">"+c+"</a>";return v}function g(e){e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y);e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y);return e}function m(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function y(e,n,i,o,a,s,u,f){var l=n;var c=i;var h=o.toLowerCase();var d=a;var p=f;if(!p)p="";if(d==""){if(h==""){h=c.toLowerCase().replace(/ ?\n/g," ")}d="#"+h;if(t.get(h)!=undefined){d=t.get(h);if(r.get(h)!=undefined){p=r.get(h)}}else{return l}}c=B(m(c),"*_[]()");d=B(d,"*_");var v='<img src="'+d+'" alt="'+c+'"';p=m(p);p=B(p,"*_");v+=' title="'+p+'"';v+=" />";return v}function b(e){e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,t){return"<h1>"+h(t)+"</h1>\n\n"});e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,t){return"<h2>"+h(t)+"</h2>\n\n"});e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,t,n){var r=t.length;return"<h"+r+">"+h(n)+"</h"+r+">\n\n"});return e}function w(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(a){e=e.replace(t,function(e,t,n){var r=t;var i=n.search(/[*+-]/g)>-1?"ul":"ol";var o=_(r,i);o=o.replace(/\s+$/,"");o="<"+i+">"+o+"</"+i+">\n";return o})}else{t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;e=e.replace(t,function(e,t,n,r){var i=t;var o=n;var a=r.search(/[*+-]/g)>-1?"ul":"ol";var s=_(o,a);s=i+"<"+a+">\n"+s+"</"+a+">\n";return s})}e=e.replace(/~0/,"");return e}var E={ol:"\\d+[.]",ul:"[*+-]"};function _(e,t){a++;e=e.replace(/\n{2,}$/,"\n");e+="~0";var n=E[t];var r=new RegExp("(^[ \\t]*)("+n+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+n+")[ \\t]+))","gm");var i=false;e=e.replace(r,function(e,t,n,r){var o=r;var a=t;var s=/\n\n$/.test(o);var u=s||o.search(/\n{2,}/)>-1;if(u||i){o=c(M(o),true)}else{o=w(M(o));o=o.replace(/\n$/,"");o=h(o)}i=s;return"<li>"+o+"</li>\n"});e=e.replace(/~0/g,"");a--;return e}function x(e){e+="~0";e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t;var i=n;r=O(M(r));r=P(r);r=r.replace(/^\n+/g,"");r=r.replace(/\n+$/g,"");r="<pre><code>"+r+"\n</code></pre>";return"\n\n"+r+"\n\n"+i});e=e.replace(/~0/,"");return e}function k(e){e=e.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(o.push(e)-1)+"K\n\n"}function S(e){e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var o=r;o=o.replace(/^([ \t]*)/g,"");o=o.replace(/[ \t]*$/g,"");o=O(o);o=o.replace(/:\/\//g,"~P");return t+"<code>"+o+"</code>"});return e}function O(e){e=e.replace(/&/g,"&amp;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");e=B(e,"*_{}[]\\",false);return e}function T(e){e=e.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");e=e.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return e}function A(e){e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;n=n.replace(/^[ \t]*>[ \t]?/gm,"~0");n=n.replace(/~0/g,"");n=n.replace(/^[ \t]+$/gm,"");n=c(n);n=n.replace(/(^|\n)/g,"$1  ");n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;n=n.replace(/^  /gm,"~0");n=n.replace(/~0/g,"");return n});return k("<blockquote>\n"+n+"\n</blockquote>")});return e}function N(e,t){e=e.replace(/^\n+/g,"");e=e.replace(/\n+$/g,"");var n=e.split(/\n{2,}/g);var r=[];var i=/~K(\d+)K/;var a=n.length;for(var s=0;s<a;s++){var u=n[s];if(i.test(u)){r.push(u)}else if(/\S/.test(u)){u=h(u);u=u.replace(/^([ \t]*)/g,"<p>");u+="</p>";r.push(u)}}if(!t){a=r.length;for(var s=0;s<a;s++){var f=true;while(f){f=false;r[s]=r[s].replace(/~K(\d+)K/g,function(e,t){f=true;return o[t]})}}}return r.join("\n\n")}function L(e){e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");e=e.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;");return e}function R(e){e=e.replace(/\\(\\)/g,U);e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,U);return e}function C(e,t,n,r){if(t)return e;if(r.charAt(r.length-1)!==")")return"<"+n+r+">";var i=r.match(/[()]/g);var o=0;for(var a=0;a<i.length;a++){if(i[a]==="("){if(o<=0)o=1;else o++}else{o--}}var s="";if(o<0){var u=new RegExp("\\){1,"+-o+"}$");r=r.replace(u,function(e){s=e;return""})}return"<"+n+r+">"+s}function j(t){t=t.replace(/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\])])(?=$|\W)/gi,C);var n=function(t,n){return'<a href="'+n+'">'+e.plainLinkText(n)+"</a>"};t=t.replace(/<((https?|ftp):[^'">\s]+)>/gi,n);return t}function I(e){e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)});return e}function M(e){e=e.replace(/^(\t|[ ]{1,4})/gm,"~0");e=e.replace(/~0/g,"");return e}function P(e){if(!/\t/.test(e))return e;var t=["    ","   ","  "," "],n=0,r;return e.replace(/[\n\t]/g,function(e,i){if(e==="\n"){n=i+1;return e}r=(i-n)%4;n=i+1;return t[r]})}var D=/(?:["'*()[\]:]|~D)/g;function F(e){if(!e)return"";var t=e.length;return e.replace(D,function(n,r){if(n=="~D")return"%24";if(n==":"){if(r==t-1||/[0-9\/]/.test(e.charAt(r+1)))return":"}return"%"+n.charCodeAt(0).toString(16)})}function B(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";if(n){r="\\\\"+r}var i=new RegExp(r,"g");e=e.replace(i,U);return e}function U(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}}})()},{}],76:[function(e,t,n){(function(){var t,r;if(typeof n==="object"&&typeof e==="function"){t=n;r=e("./Markdown.Converter").Converter}else{t=window.Markdown;r=t.Converter}t.getSanitizingConverter=function(){var e=new r;e.hooks.chain("postConversion",i);e.hooks.chain("postConversion",f);return e};function i(e){return e.replace(/<[^>]*>?/gi,u)}var o=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i;var a=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i;var s=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function u(e){if(e.match(o)||e.match(a)||e.match(s))return e;else return""}function f(e){if(e=="")return"";var t=/<\/?\w+[^>]*(\s|$|>)/g;var n=e.toLowerCase().match(t);var r=(n||[]).length;if(r==0)return e;var i,o;var a="<p><img><br><li><hr>";var s;var u=[];var f=[];var l=false;for(var c=0;c<r;c++){i=n[c].replace(/<\/?(\w+).*/,"$1");if(u[c]||a.search("<"+i+">")>-1)continue;o=n[c];s=-1;if(!/^<\//.test(o)){for(var h=c+1;h<r;h++){if(!u[h]&&n[h]=="</"+i+">"){s=h;break}}}if(s==-1)l=f[c]=true;else u[s]=true}if(!l)return e;var c=0;e=e.replace(t,function(e){var t=f[c]?"":e;c++;return t});return e}})()},{"./Markdown.Converter":75}],77:[function(e,t,n){n.Converter=e("./Markdown.Converter").Converter;n.getSanitizingConverter=e("./Markdown.Sanitizer").getSanitizingConverter},{"./Markdown.Converter":75,"./Markdown.Sanitizer":76}],78:[function(e,t,n){(function(e){"use strict";var n=e.Ractive;var r=function(){var e={el:void 0,append:false,template:{v:1,t:[]},"yield":null,preserveWhitespace:false,sanitize:false,stripComments:true,data:{},computed:{},magic:false,modifyArrays:true,adapt:[],isolated:false,twoway:true,lazy:false,noIntro:false,transitionsEnabled:true,complete:void 0,noCssTransform:false,debug:false};return e}();var i={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){if((e/=.5)<1){return.5*Math.pow(e,3)}return.5*(Math.pow(e-2,3)+2)}};var o=[];var a=Object.prototype.hasOwnProperty;var s=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}();var u=function(){var e=Object.prototype.toString;return function(t){return t&&e.call(t)==="[object Object]"}}();var f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};var l=function(e,t,n,r,i){var o,a,s;e.push(function(){a=e.interpolate});s=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/;o={number:function(e,t){var n;if(!i(e)||!i(t)){return null}e=+e;t=+t;n=t-e;if(!n){return function(){return e}}return function(t){return e+t*n}},array:function(e,t){var r,i,o,s;if(!n(e)||!n(t)){return null}r=[];i=[];s=o=Math.min(e.length,t.length);while(s--){i[s]=a(e[s],t[s])}for(s=o;s<e.length;s+=1){r[s]=e[s]}for(s=o;s<t.length;s+=1){r[s]=t[s]}return function(e){var t=o;while(t--){r[t]=i[t](e)}return r}},object:function(e,n){var i,o,s,u,f;if(!r(e)||!r(n)){return null}i=[];u={};s={};for(f in e){if(t.call(e,f)){if(t.call(n,f)){i.push(f);s[f]=a(e[f],n[f])}else{u[f]=e[f]}}}for(f in n){if(t.call(n,f)&&!t.call(e,f)){u[f]=n[f]}}o=i.length;return function(e){var t=o,n;while(t--){n=i[t];u[n]=s[n](e)}return u}}};return o}(o,a,s,u,f);var c=function(){var e;if(typeof document==="undefined"){e=false}else{e=document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}return e}();var h=function(){var e;var t={};e=function r(e){var r,i,o,a,s,u;r=e.split(".");if(!(i=t[r.length])){i=n(r.length)}s=[];o=function(e,t){return e?"*":r[t]};a=i.length;while(a--){u=i[a].map(o).join(".");if(!s.hasOwnProperty(u)){s.push(u);s[u]=true}}return s};function n(e){var n="",r,i,o,a,s;if(!t[e]){o=[];while(n.length<e){n+=1}r=parseInt(n,2);a=function(e){return e==="1"};for(s=0;s<=r;s+=1){i=s.toString(2);while(i.length<e){i="0"+i}o[s]=Array.prototype.map.call(i,a)}t[e]=o}return t[e]}return e}();var d=function(e){var t;t=function i(t,r){var i=arguments[2];if(i===void 0)i={};if(!r){return}var o=e(r);n(t,o,i.event,i.args,true)};function n(t,i,o,a){var s=arguments[4];if(s===void 0)s=false;var u,f,l=true;for(f=i.length;f>=0;f--){u=t._subs[i[f]];if(u){l=r(t,u,o,a)&&l}}if(t._parent&&l){if(s&&t.component){var c=t.component.name+"."+i[i.length-1];i=e(c);if(o){o.component=t}}n(t._parent,i,o,a)}}function r(e,t,n,r){var i=null,o=false;if(n){r=[n].concat(r)}for(var a=0,s=t.length;a<s;a+=1){if(t[a].apply(e,r)===false){o=true}}if(n&&o&&(i=n.original)){i.preventDefault&&i.preventDefault();i.stopPropagation&&i.stopPropagation()}return!o}return t}(h);var p=function(e,t){var n=e.indexOf(t);if(n!==-1){e.splice(n,1)}};var v=function(){var e;var t,n={},r={},i={};if(typeof v==="function"){t=v}else{t=function(e){var u=[],f=[],l=n,c,h,d,p,v,g;d=function(e){return function(t){if(l!==n){return}c=t;l=e;h=a(l===r?u:f,c);o(h)}};p=d(r);v=d(i);try{e(p,v)}catch(m){v(m)}g={then:function(e,r){var i=new t(function(t,a){var c=function(e,n,r){if(typeof e==="function"){n.push(function(n){var r;
try{r=e(n);s(i,r,t,a)}catch(o){a(o)}})}else{n.push(r)}};c(e,u,t);c(r,f,a);if(l!==n){o(h)}});return i}};g["catch"]=function(e){return this.then(null,e)};return g};t.all=function(e){return new t(function(t,n){var r=[],i,o,a;if(!e.length){t(r);return}a=function(o){e[o].then(function(e){r[o]=e;if(!--i){t(r)}},n)};i=o=e.length;while(o--){a(o)}})};t.resolve=function(e){return new t(function(t){t(e)})};t.reject=function(e){return new t(function(t,n){n(e)})}}e=t;function o(e){setTimeout(e,0)}function a(e,t){return function(){var n;while(n=e.shift()){n(t)}}}function s(e,n,r,i){var o;if(n===e){throw new TypeError("A promise's fulfillment handler cannot return the same promise")}if(n instanceof t){n.then(r,i)}else if(n&&(typeof n==="object"||typeof n==="function")){try{o=n.then}catch(a){i(a);return}if(typeof o==="function"){var u,f,l;f=function(t){if(u){return}u=true;s(e,t,r,i)};l=function(e){if(u){return}u=true;i(e)};try{o.call(n,f,l)}catch(a){if(!u){i(a);u=true;return}}}else{r(n)}}else{r(n)}}return e}();var g=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function t(n){return(n||"").replace(e,".$1")}}();var m=function(e){do{if(e.context!==undefined){return e.context}}while(e=e.parent);return""};var y=function(e,t){if(e===null&&t===null){return true}if(typeof e==="object"||typeof t==="object"){return false}return e===t};var b=function(e,t,n){var r;e.push(function(){return r=e.runloop});var i=function(e,t,n,r,i){this.root=e;this.keypath=t;this.priority=i;this.otherInstance=n;this.otherKeypath=r;this.bind();this.value=this.root.viewmodel.get(this.keypath)};i.prototype={setValue:function(e){var i=this;if(this.updating||this.counterpart&&this.counterpart.updating){this.value=e;return}if(t(e)&&e._ractive&&e._ractive.setting){return}if(!n(e,this.value)){this.updating=true;r.addViewmodel(this.otherInstance.viewmodel);this.otherInstance.viewmodel.set(this.otherKeypath,e);this.value=e;r.scheduleTask(function(){return i.updating=false})}},bind:function(){this.root.viewmodel.register(this.keypath,this)},rebind:function(e){this.unbind();this.keypath=e;this.counterpart.otherKeypath=e;this.bind()},unbind:function(){this.root.viewmodel.unregister(this.keypath,this)}};return function o(e,t,n,r){var o,a,s,u,f,l;o=n+"="+r;s=e.bindings;if(s[o]){return}a=e.instance;u=e.parentFragment.priority;f=new i(t,n,a,r,u);s.push(f);if(a.twoway){l=new i(a,r,t,n,1);s.push(l);f.counterpart=l;l.counterpart=f}s[o]=f}}(o,s,y);var w=function(e,t,n){var r;var i,o;i='Could not resolve reference - too many "../" prefixes';o={evaluateWrapped:true};r=function s(r,i,u){var f,l,c,h,d,p,v,g,m,y;i=e(i);if(i.substr(0,2)==="~/"){return i.substring(2)}if(i.charAt(0)==="."){return a(t(u),i)}l=i.split(".")[0];do{f=u.context;if(!f){continue}p=true;d=r.viewmodel.get(f,o);if(d&&(typeof d==="object"||typeof d==="function")&&l in d){return f+"."+i}}while(u=u.parent);if(l in r.data||l in r.viewmodel.computations){return i}if(r._parent&&!r.isolated){u=r.component.parentFragment;if(u.indexRefs&&(c=u.indexRefs[i])!==undefined){r.component.indexRefBindings[i]=i;r.viewmodel.set(i,c,true);return}h=s(r._parent,i,u);if(h){v=h.split(".");g=i.split(".");while(v.length>1&&g.length>1&&v[v.length-1]===g[g.length-1]){v.pop();g.pop()}m=v.join(".");y=g.join(".");r.viewmodel.set(y,r._parent.viewmodel.get(m),true);n(r.component,r._parent,m,y);return i}}if(!p){return i}if(r.viewmodel.get(i)!==undefined){return i}};function a(e,t){var n;if(t===".")return e;n=e?e.split("."):[];if(t.substr(0,3)==="../"){while(t.substr(0,3)==="../"){if(!n.length){throw new Error(i)}n.pop();t=t.substring(3)}n.push(t);return n.join(".")}if(!e){return t.replace(/^\.\/?/,"")}return e+t.replace(/^\.\//,".")}return r}(g,m,b);var E=function(e){var t=function(e,t){this.callback=e;this.parent=t;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.outrosComplete=false;if(t){t.addChild(this)}};t.prototype={addChild:function(e){this.children.push(e);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1;i(this)},decrementTotal:function(){this.totalChildren-=1;i(this)},add:function(e){var t=e.isIntro?this.intros:this.outros;t.push(e)},remove:function(t){var n=t.isIntro?this.intros:this.outros;e(n,t);i(this)},init:function(){this.ready=true;i(this)},detachNodes:function(){this.detachQueue.forEach(n);this.children.forEach(r)}};function n(e){e.detach()}function r(e){e.detachNodes()}function i(e){if(!e.ready||e.outros.length||e.outroChildren)return;if(!e.outrosComplete){if(e.parent){e.parent.decrementOutros(e)}else{e.detachNodes()}e.outrosComplete=true}if(!e.intros.length&&!e.totalChildren){if(typeof e.callback==="function"){e.callback()}if(e.parent){e.parent.decrementTotal()}}}return t}(p);var _=function(e,t,n,r,i,o){var a;var s,u,f=[];u={start:function(e,t){var n,i;if(t){n=new r(function(e){return i=e})}s={previousBatch:s,transitionManager:new o(i,s&&s.transitionManager),views:[],tasks:[],viewmodels:[]};if(e){s.viewmodels.push(e.viewmodel)}return n},end:function(){l();s.transitionManager.init();s=s.previousBatch},addViewmodel:function(e){if(s){if(s.viewmodels.indexOf(e)===-1){s.viewmodels.push(e)}}else{e.applyChanges()}},registerTransition:function(e){e._manager=s.transitionManager;s.transitionManager.add(e)},addView:function(e){s.views.push(e)},addUnresolved:function(e){f.push(e)},removeUnresolved:function(e){n(f,e)},detachWhenReady:function(e){s.transitionManager.detachQueue.push(e)},scheduleTask:function(e){if(!s){e()}else{s.tasks.push(e)}}};e.runloop=u;a=u;function l(){var e,n,r;for(e=0;e<s.viewmodels.length;e+=1){n=s.viewmodels[e];r=n.applyChanges();if(r){t(n.ractive,"change",{args:[r]})}}s.viewmodels.length=0;c();for(e=0;e<s.views.length;e+=1){s.views[e].update()}s.views.length=0;for(e=0;e<s.tasks.length;e+=1){s.tasks[e]()}s.tasks.length=0;if(s.viewmodels.length)return l()}function c(){var e,t,n,r;e=f.length;while(e--){t=f[e];if(t.keypath){f.splice(e,1)}if(n=i(t.root,t.ref,t.parentFragment)){(r||(r=[])).push({item:t,keypath:n});f.splice(e,1)}}if(r){r.forEach(h)}}function h(e){e.item.resolve(e.keypath)}return a}(o,d,p,v,w,E);var x=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}();var k=function(e,t,n){var r;var i,o;try{Object.defineProperty({},"test",{value:0});i={filter:function(e,t,r){var i,o,a,s,u;if(!t){return false}i=t.split(".");o=i.pop();a=i.join(".");if((s=r.viewmodel.wrapped[a])&&!s.magic){return false}u=r.get(a);if(n(u)&&/^[0-9]+$/.test(o)){return false}return u&&(typeof u==="object"||typeof u==="function")},wrap:function(e,t,n){return new o(e,t,n)}};o=function(e,t,n){var r,i,o,a;this.magic=true;this.ractive=e;this.keypath=n;this.value=t;r=n.split(".");this.prop=r.pop();i=r.join(".");this.obj=i?e.get(i):e.data;o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(o&&o.set&&(a=o.set._ractiveWrappers)){if(a.indexOf(this)===-1){a.push(this)}return}s(this,t,o)};o.prototype={get:function(){return this.value},reset:function(t){if(this.updating){return}this.updating=true;this.obj[this.prop]=t;e.addViewmodel(this.ractive.viewmodel);this.ractive.viewmodel.mark(this.keypath);this.updating=false},set:function(e,n){if(this.updating){return}if(!this.obj[this.prop]){this.updating=true;this.obj[this.prop]=t(e);this.updating=false}this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating){return false}e=Object.getOwnPropertyDescriptor(this.obj,this.prop);t=e&&e.set;if(!t){return}r=t._ractiveWrappers;i=r.indexOf(this);if(i!==-1){r.splice(i,1)}if(!r.length){n=this.obj[this.prop];Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:true,enumerable:true,configurable:true});this.obj[this.prop]=n}}}}catch(a){i=false}r=i;function s(t,n,r){var i,o,a,s,u,f;i=t.obj;o=t.prop;if(r&&!r.configurable){if(o==="length"){return}throw new Error('Cannot use magic mode with property "'+o+'" - object is not configurable')}if(r){a=r.get;s=r.set}u=a||function(){return n};f=function(e){if(s){s(e)}n=a?a():e;f._ractiveWrappers.forEach(l)};function l(t){var r,i;t.value=n;if(t.updating){return}i=t.ractive;r=t.keypath;t.updating=true;e.start(i);i.viewmodel.mark(r);e.end();t.updating=false}f._ractiveWrappers=[t];Object.defineProperty(i,o,{get:u,set:f,enumerable:true,configurable:true})}return r}(_,x,s);var S=function(e){return!!e}(k);var O={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var T=function(e,t){var n;if(!e){n=function(e,n){if(n&&n!==t.html){throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information"}return document.createElement(e)}}else{n=function(e,n){if(!n||n===t.html){return document.createElement(e)}return document.createElementNS(n,e)}}return n}(c,O);var A=function(){var e=typeof document==="object";return e}();var N=function(e){var t;try{Object.defineProperty({},"test",{value:0});if(e){Object.defineProperty(document.createElement("div"),"test",{value:0})}t=Object.defineProperty}catch(n){t=function(e,t,n){e[t]=n.value}}return t}(A);var L=function(e,t,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}if(n){Object.defineProperties(e("div"),{test:{value:0}})}r=Object.defineProperties}catch(i){r=function(e,n){var r;for(r in n){if(n.hasOwnProperty(r)){t(e,r,n[r])}}}}return r}(T,N,A);var R=function(e){return function t(n,r,i){var o;if(typeof r!=="string"||!e(i)){throw new Error("Bad arguments")}o=+n.get(r)||0;if(!e(o)){throw new Error("Cannot add to a non-numeric value")}return n.set(r,o+i)}}(f);var C=function(e){return function t(n,r){return e(this,n,r===undefined?1:+r)}}(R);var j=function(e){var t=/^\.+/;return function n(r){return e(r).replace(t,"")}}(g);var I=["o","ms","moz","webkit"];var M=function(e){var t;if(typeof window==="undefined"){t=null}else{(function(e,t,n){var r,i;if(n.requestAnimationFrame){return}for(r=0;r<e.length&&!n.requestAnimationFrame;++r){n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"]}if(!n.requestAnimationFrame){i=n.setTimeout;n.requestAnimationFrame=function(e){var n,r,o;n=Date.now();r=Math.max(0,16-(n-t));o=i(function(){e(n+r)},r);t=n+r;return o}}})(e,0,window);t=window.requestAnimationFrame}return t}(I);var P=function(){var e;if(typeof window!=="undefined"&&window.performance&&typeof window.performance.now==="function"){e=function(){return window.performance.now()}}else{e=function(){return Date.now()}}return e}();var D=function(e,t,n){var r=[];var i={tick:function(){var o,a,s;s=t();n.start();for(o=0;o<r.length;o+=1){a=r[o];if(!a.tick(s)){r.splice(o--,1)}}n.end();if(r.length){e(i.tick)}else{i.running=false}},add:function(t){r.push(t);if(!i.running){i.running=true;e(i.tick)}},abort:function(e,t){var n=r.length,i;while(n--){i=r[n];if(i.root===t&&i.keypath===e){i.stop()}}}};return i}(M,P,_);var F=function(){var e,t={};if(typeof console!=="undefined"&&typeof console.warn==="function"&&typeof console.warn.apply==="function"){e=function(e,n){if(!n){if(t[e]){return}t[e]=true}console.warn(e)}}else{e=function(){}}return e}();var B=function(){var e;var t=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,n=/\/\*.*?\*\//g,r=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,i=/^@media/,o=/\[data-rvcguid="[a-z0-9-]+"]/g;e=function u(e,f){var l,c;c=function(e){var t,n,i,o,a,u,l,c,h=[];t=[];while(n=r.exec(e)){t.push({str:n[0],base:n[1],modifiers:n[2]})}o='[data-rvcguid="'+f+'"]';a=t.map(s);c=t.length;while(c--){l=a.slice();i=t[c];l[c]=i.base+o+i.modifiers||"";u=a.slice();u[c]=o+" "+u[c];h.push(l.join(" "),u.join(" "))}return h.join(", ")};if(o.test(e)){l=e.replace(o,'[data-rvcguid="'+f+'"]')}else{l=e.replace(n,"").replace(t,function(e,t){var n,r;if(i.test(t))return e;n=t.split(",").map(a);r=n.map(c).join(", ")+" ";return e.replace(t,r)})}return l};function a(e){if(e.trim){return e.trim()}return e.replace(/^\s+/,"").replace(/\s+$/,"")}function s(e){return e.str}return e}();var U=function(e){var t={name:"css",extend:n,init:function(){}};function n(e,t,n){var i=t.constructor._guid,o;if(o=r(n.css,n,i)||r(e.css,e,i)){t.constructor.css=o}}function r(t,n,r){if(!t){return}return n.noCssTransform?t:e(t,r)}return t}(B);var W=function(){var e;e=function(e,n,r){if(r||t(e,n)){return function(){var t="_super"in this,r=this._super,i;this._super=n;i=e.apply(this,arguments);if(t){this._super=r}return i}}else{return e}};function t(e,t){return typeof t==="function"&&/_super/.test(e)}return e}();var q=function(e){var t;var n={name:"data",extend:i,init:o,reset:a};t=n;function r(e,t,n){var r=n.data||{},i=s(e.prototype.data);return u(i,r)}function i(e,t,n){t.data=r(e,t,n)}function o(e,t,n){var i=n.data,o=r(e,t,n);if(typeof o==="function"){o=o.call(t,i)||i}return t.data=o||{}}function a(e){var t=this.init(e.constructor,e,e);if(t){e.data=t;return true}}function s(e){if(typeof e!=="function"||!Object.keys(e).length){return e}var t={};f(e,t);return u(e,t)}function u(e,t){if(typeof t==="function"){return h(t,e)}else if(typeof e==="function"){return c(t,e)}else{return l(t,e)}}function f(e,t,n){for(var r in e){if(n&&r in t){continue}t[r]=e[r]}}function l(e,t){e=e||{};if(!t){return e}f(t,e,true);return e}function c(e,t){return function(n){var r;if(e){r=[];for(var i in e){if(!n||!(i in n)){r.push(i)}}}n=t.call(this,n)||n;if(r&&r.length){n=n||{};r.forEach(function(t){n[t]=e[t]})}return n}}function h(t,n){var r;if(typeof n!=="function"){r=function(e){l(e,n)}}else{r=function(t){n=e(n,function(){},true);return n.call(this,t)||t}}return e(t,r)}return t}(W);var V={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.'};var z={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53};var H=function(){var e;try{Object.create(null);e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;if(t===null){return{}}e.prototype=t;r=new e;if(n){Object.defineProperties(r,n)}return r}}()}return e}();var G={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"};var $=function(e){var t=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;if(r=n.matchPattern(t)){return{t:e.NUMBER_LITERAL,v:r}}return null}}(z);var K=function(e){return function(t){var n=t.remaining();if(n.substr(0,4)==="true"){t.pos+=4;return{t:e.BOOLEAN_LITERAL,v:"true"}}if(n.substr(0,5)==="false"){t.pos+=5;return{t:e.BOOLEAN_LITERAL,v:"false"}}return null}}(z);var J=function(){var e,t,n;e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;t=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;return function(r){return function(i){var o,a,s,u;o=i.pos;a='"';s=false;while(!s){u=i.matchPattern(e)||i.matchPattern(t)||i.matchString(r);if(u){if(u==='"'){a+='\\"'}else if(u==="\\'"){a+="'"}else{a+=u}}else{u=i.matchPattern(n);if(u){a+="\\u"+("000"+u.charCodeAt(1).toString(16)).slice(-4)}else{s=true}}}a+='"';return JSON.parse(a)}}}();var Y=function(e){return e('"')}(J);var Q=function(e){return e("'")}(J);var X=function(e,t,n){return function(r){var i,o;i=r.pos;if(r.matchString('"')){o=n(r);if(!r.matchString('"')){r.pos=i;return null}return{t:e.STRING_LITERAL,v:o}}if(r.matchString("'")){o=t(r);if(!r.matchString("'")){r.pos=i;return null}return{t:e.STRING_LITERAL,v:o}}return null}}(z,Y,Q);var Z={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/};var et=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var o;if(o=e(i)){return r.test(o.v)?o.v:'"'+o.v.replace(/"/g,'\\"')+'"'}if(o=t(i)){return o.v}if(o=i.matchPattern(n.name)){return o}}}(X,$,Z);var tt=function(e,t){return function(n){var r,i,o;r=n.pos;n.allowWhitespace();i=t(n);if(i===null){n.pos=r;return null}n.allowWhitespace();if(!n.matchString(":")){n.pos=r;return null}n.allowWhitespace();o=n.readExpression();if(o===null){n.pos=r;return null}return{t:e.KEY_VALUE_PAIR,k:i,v:o}}}(z,et);var nt=function(e){return function t(n){var r,i,o,a;r=n.pos;o=e(n);if(o===null){return null}i=[o];if(n.matchString(",")){a=t(n);if(!a){n.pos=r;return null}return i.concat(a)}return i}}(tt);var rt=function(e,t){return function(n){var r,i;r=n.pos;n.allowWhitespace();if(!n.matchString("{")){n.pos=r;return null}i=t(n);n.allowWhitespace();if(!n.matchString("}")){n.pos=r;return null}return{t:e.OBJECT_LITERAL,m:i}}}(z,nt);var it=function(e){return function t(n){var r,i,o,a;r=n.pos;n.allowWhitespace();o=n.readExpression();if(o===null){return null}i=[o];n.allowWhitespace();if(n.matchString(",")){a=t(n);if(a===null){n.error(e.expectedExpression)}a.forEach(s)}function s(e){i.push(e)}return i}}(G);var ot=function(e,t){return function(n){var r,i;r=n.pos;n.allowWhitespace();if(!n.matchString("[")){n.pos=r;return null}i=t(n);if(!n.matchString("]")){n.pos=r;return null}return{t:e.ARRAY_LITERAL,m:i}}}(z,it);var at=function(e,t,n,r,i){return function(o){var a=e(o)||t(o)||n(o)||r(o)||i(o);return a}}($,K,X,rt,ot);var st=function(e,t){var n,r,i,o,a;n=/^\.[a-zA-Z_$0-9]+/;i=function(e){var t=e.matchPattern(r);if(t){return"."+t}return null};r=/^\[(0|[1-9][0-9]*)\]/;o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/;a=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;return function(r){var s,u,f,l,c,h,d;s=r.pos;if(r.matchString("~/")){u="~/"}else{u="";while(r.matchString("../")){u+="../"}}if(!u){l=r.matchString(".")||""}f=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(t.name)||"";if(a.test(f)){r.pos=s;return null}if(!u&&!l&&o.test(f)){return{t:e.GLOBAL,v:f}}c=(u||l)+f;if(!c){return null}while(h=r.matchPattern(n)||i(r)){c+=h}if(r.matchString("(")){d=c.lastIndexOf(".");if(d!==-1){c=c.substr(0,d);r.pos=s+c.length}else{r.pos-=1}}return{t:e.REFERENCE,n:c.replace(/^this\./,"./").replace(/^this$/,".")}}}(z,Z);var ut=function(e,t){return function(n){var r,i;r=n.pos;if(!n.matchString("(")){return null}n.allowWhitespace();i=n.readExpression();if(!i){n.error(t.expectedExpression)}n.allowWhitespace();if(!n.matchString(")")){n.error(t.expectedParen)}return{t:e.BRACKETED,x:i}}}(z,G);var ft=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(at,st,ut);var lt=function(e,t,n){return function r(i){var o,a,s;o=i.pos;i.allowWhitespace();if(i.matchString(".")){i.allowWhitespace();if(a=i.matchPattern(n.name)){return{t:e.REFINEMENT,n:a}}i.error("Expected a property name")}if(i.matchString("[")){i.allowWhitespace();s=i.readExpression();if(!s){i.error(t.expectedExpression)}i.allowWhitespace();if(!i.matchString("]")){i.error("Expected ']'")}return{t:e.REFINEMENT,x:s}}return null}}(z,G,Z);var ct=function(e,t,n,r,i){return function(o){var a,s,u,f;s=t(o);if(!s){return null}while(s){a=o.pos;if(u=r(o)){s={t:e.MEMBER,x:s,r:u}}else if(o.matchString("(")){o.allowWhitespace();f=n(o);o.allowWhitespace();if(!o.matchString(")")){o.error(i.expectedParen)}s={t:e.INVOCATION,x:s};if(f){s.o=f}}else{break}}return s}}(z,ft,it,lt,G);var ht=function(e,t,n){var r,i;i=function(n,r){return function(i){var o;if(o=r(i)){return o}if(!i.matchString(n)){return null}i.allowWhitespace();o=i.readExpression();if(!o){i.error(t.expectedExpression)}return{s:n,o:o,t:e.PREFIX_OPERATOR}}};(function(){var e,t,o,a,s;a="! ~ + - typeof".split(" ");s=n;for(e=0,t=a.length;e<t;e+=1){o=i(a[e],s);s=o}r=s})();return r}(z,G,ct);var dt=function(e,t){var n,r;r=function(t,n){return function(r){var i,o,a;o=n(r);if(!o){return null}while(true){i=r.pos;r.allowWhitespace();if(!r.matchString(t)){r.pos=i;return o}if(t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0))){r.pos=i;return o}r.allowWhitespace();a=n(r);if(!a){r.pos=i;return o}o={t:e.INFIX_OPERATOR,s:t,o:[o,a]}}}};(function(){var e,i,o,a,s;a="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");s=t;for(e=0,i=a.length;e<i;e+=1){o=r(a[e],s);s=o}n=s})();return n}(z,ht);var pt=function(e,t,n){return function(r){var i,o,a,s;o=t(r);if(!o){return null}i=r.pos;r.allowWhitespace();if(!r.matchString("?")){r.pos=i;return o}r.allowWhitespace();a=r.readExpression();if(!a){r.error(n.expectedExpression)}r.allowWhitespace();if(!r.matchString(":")){r.error('Expected ":"')}r.allowWhitespace();s=r.readExpression();if(!s){r.error(n.expectedExpression)}return{t:e.CONDITIONAL,o:[o,a,s]}}}(z,dt,G);var vt=function(e,t){var n;n=function(e){var t=[],n;i(e,t);n={r:t,s:o(this,e,t)};return n};function r(e){return JSON.stringify(String(e))}function i(n,r){var o,a;if(n.t===e.REFERENCE){if(r.indexOf(n.n)===-1){r.unshift(n.n)}}a=n.o||n.m;if(a){if(t(a)){i(a,r)}else{o=a.length;while(o--){i(a[o],r)}}}if(n.x){i(n.x,r)}if(n.r){i(n.r,r)}if(n.v){i(n.v,r)}}function o(t,n,i){var a=function(e){return o(t,e,i)};switch(n.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return n.v;case e.STRING_LITERAL:return r(n.v);case e.ARRAY_LITERAL:return"["+(n.m?n.m.map(a).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(n.m?n.m.map(a).join(","):"")+"}";case e.KEY_VALUE_PAIR:return n.k+":"+o(t,n.v,i);case e.PREFIX_OPERATOR:return(n.s==="typeof"?"typeof ":n.s)+o(t,n.o,i);case e.INFIX_OPERATOR:return o(t,n.o[0],i)+(n.s.substr(0,2)==="in"?" "+n.s+" ":n.s)+o(t,n.o[1],i);case e.INVOCATION:return o(t,n.x,i)+"("+(n.o?n.o.map(a).join(","):"")+")";case e.BRACKETED:return"("+o(t,n.x,i)+")";case e.MEMBER:return o(t,n.x,i)+o(t,n.r,i);case e.REFINEMENT:return n.n?"."+n.n:"["+o(t,n.x,i)+"]";case e.CONDITIONAL:return o(t,n.o[0],i)+"?"+o(t,n.o[1],i)+":"+o(t,n.o[2],i);case e.REFERENCE:return"_"+i.indexOf(n.n);default:t.error("Expected legal JavaScript")}}return n}(z,u);var gt=function(e,t,n,r,i){var o,a,s=/^\s+/;a=function(e){this.name="ParseError";this.message=e;try{throw new Error(e)}catch(t){this.stack=t.stack}};a.prototype=Error.prototype;o=function(e,t){var n,r,i=0;this.str=e;this.options=t||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(e){var t=i+e.length+1;i=t;return t},0);if(this.init)this.init(e,t);n=[];while(this.pos<this.str.length&&(r=this.read())){n.push(r)}this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(n,t):n};o.prototype={read:function(e){var t,n,r,i;if(!e)e=this.converters;t=this.pos;r=e.length;for(n=0;n<r;n+=1){this.pos=t;if(i=e[n](this)){return i}}return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(e){var t=0,n=0,r;while(e>=this.lineEnds[t]){n=this.lineEnds[t];t+=1}r=e-n;return[t+1,r+1]},error:function(e){var t,n,r,i,o,s;t=this.getLinePos(this.pos);n=t[0];r=t[1];i=this.lines[t[0]-1];o=i+"\n"+new Array(t[1]).join(" ")+"^----";s=new a(e+" at line "+n+" character "+r+":\n"+o);s.line=t[0];s.character=t[1];s.shortMessage=e;throw s},matchString:function(e){if(this.str.substr(this.pos,e.length)===e){this.pos+=e.length;return e}},matchPattern:function(e){var t;if(t=e.exec(this.remaining())){this.pos+=t[0].length;return t[1]||t[0]}},allowWhitespace:function(){this.matchPattern(s)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};o.extend=function(e){var r=this,i,a;i=function(e,t){o.call(this,e,t)};i.prototype=t(r.prototype);for(a in e){if(n.call(e,a)){i.prototype[a]=e[a]}}i.extend=o.extend;return i};e.Parser=o;return o}(o,H,a,pt,vt);var mt=function(){var e=/^[^\s=]+/,t=/^\s+/;return function(n){var r,i,o;if(!n.matchString("=")){return null}r=n.pos;n.allowWhitespace();i=n.matchPattern(e);if(!i){n.pos=r;return null}if(!n.matchPattern(t)){return null}o=n.matchPattern(e);if(!o){n.pos=r;return null}n.allowWhitespace();if(!n.matchString("=")){n.pos=r;return null}return[i,o]}}();var yt=[{delimiters:"delimiters",isTriple:false,isStatic:false},{delimiters:"tripleDelimiters",isTriple:true,isStatic:false},{delimiters:"staticDelimiters",isTriple:false,isStatic:true},{delimiters:"staticTripleDelimiters",isTriple:true,isStatic:true}];var bt=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];if(!n){return null}e.pos+=1;return n}}(z);var wt=function(e){return{"if":e.SECTION_IF,unless:e.SECTION_UNLESS,"with":e.SECTION_WITH,each:e.SECTION_EACH}}(z);var Et=null;var _t=function(e,t,n){var r;var i=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,o=/^[0-9][1-9]*$/,a=new RegExp("^("+Object.keys(n).join("|")+")\\b"),s;s=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/;r=function(n,r){var o,f,l,c,h,d,p,v,g,m;o=n.pos;l={};m=n[r.delimiters];if(r.isStatic){l.s=true}if(r.isTriple){l.t=e.TRIPLE}else{if(n.remaining()[0]==="!"){try{d=n.readExpression();n.allowWhitespace();if(n.remaining().indexOf(m[1])){d=null}else{l.t=e.INTERPOLATOR}}catch(y){}if(!d){g=n.remaining().indexOf(m[1]);if(~g){n.pos+=g}else{n.error("Expected closing delimiter ('"+m[1]+"')")}return{t:e.COMMENT}}}if(!d){c=t(n);l.t=c||e.INTERPOLATOR;if(c===e.SECTION){if(h=n.matchPattern(a)){l.n=h}n.allowWhitespace()}else if(c===e.COMMENT||c===e.CLOSING){v=n.remaining();g=v.indexOf(m[1]);if(g!==-1){l.r=v.substr(0,g).split(" ")[0];n.pos+=g;return l}}}}if(!d){n.allowWhitespace();d=n.readExpression();var b;if(l.t===e.PARTIAL&&d&&(b=n.readExpression())){l={contextPartialExpression:d};d=b}v=n.remaining();if(v.substr(0,m[1].length)!==m[1]&&v.charAt(0)!==":"){f=n.pos;n.pos=o;v=n.remaining();g=v.indexOf(m[1]);if(g!==-1){l.r=v.substr(0,g).trim();if(!s.test(l.r)){n.error("Expected a legal Mustache reference")}n.pos+=g;return l}n.pos=f}}u(n,d,l);if(l.contextPartialExpression){l.contextPartialExpression=[u(n,l.contextPartialExpression,{t:e.PARTIAL})]}if(p=n.matchPattern(i)){l.i=p}return l};function u(t,n,r){var i;if(n){while(n.t===e.BRACKETED&&n.x){n=n.x}if(n.t===e.REFERENCE){r.r=n.n}else{if(n.t===e.NUMBER_LITERAL&&o.test(n.v)){r.r=n.v}else if(i=f(t,n)){r.rx=i}else{r.x=t.flattenExpression(n)}}return r}}function f(t,n){var r=[],i;while(n.t===e.MEMBER&&n.r.t===e.REFINEMENT){i=n.r;if(i.x){if(i.x.t===e.REFERENCE){r.unshift(i.x)}else{r.unshift(t.flattenExpression(i.x))}}else{r.unshift(i.n)}n=n.x}if(n.t!==e.REFERENCE){return null}return{r:n.n,m:r}}return r}(z,bt,wt,Et);var xt=function(e,t,n,r,i){var o;var a={t:e.DELIMCHANGE,exclude:true},s=/^@(?:index|key)$/;o=u;function u(e){var t;if(e.interpolate[e.inside]===false){return null}t=n.slice().sort(function r(t,n){return e[n.delimiters][0].length-e[t.delimiters][0].length});return function i(n){if(!n){return null}else{return f(e,n)||i(t.shift())}}(t.shift())}function f(n,o){var s,u,f,c,h,p,v,g,m;s=n.pos;f=n[o.delimiters];if(!n.matchString(f[0])){return null}if(u=t(n)){if(!n.matchString(f[1])){return null}n[o.delimiters]=u;return a}n.allowWhitespace();u=r(n,o);if(u===null){n.pos=s;return null}n.allowWhitespace();if(!n.matchString(f[1])){n.error("Expected closing delimiter '"+f[1]+"' after reference")}if(u.t===e.COMMENT){u.exclude=true}if(u.t===e.CLOSING){n.sectionDepth-=1;if(n.sectionDepth<0){n.pos=s;n.error("Attempted to close a section that wasn't open")}}if(u.contextPartialExpression){u.f=u.contextPartialExpression;u.t=e.SECTION;u.n="with";delete u.contextPartialExpression}else if(d(u)){n.sectionDepth+=1;c=[];v=c;h=u.n;while(g=n.read()){if(g.t===e.CLOSING){if(h&&g.r!==h){n.error("Expected {{/"+h+"}}")}break}if(g.t===e.INTERPOLATOR&&g.r==="else"){switch(u.n){case"unless":n.error("{{else}} not allowed in {{#unless}}");break;case"with":n.error("{{else}} not allowed in {{#with}}");break;default:v=p=[];continue}}v.push(g)}if(c.length){u.f=c;if(!u.i&&u.n==="each"&&(m=l(u.f))){u.i=m}}if(p&&p.length){u.l=p}}if(n.includeLinePositions){u.p=n.getLinePos(s)}if(u.n){u.n=i[u.n]}else if(u.t===e.INVERTED){u.t=e.SECTION;u.n=e.SECTION_UNLESS}return u}function l(t){var n,r,i,o;if(!t){return}n=t.length;while(n--){r=t[n];if(r.t===e.ELEMENT){if(i=l(r.o&&r.o.d)||l(r.t0&&r.t0.d)||l(r.t1&&r.t1.d)||l(r.t2&&r.t2.d)||l(r.f)){return i}for(o in r.v){if(r.v.hasOwnProperty(o)&&r.v[o].d&&(i=l(r.v[o].d))){return i}}for(o in r.a){if(r.a.hasOwnProperty(o)&&(i=l(r.a[o]))){return i}}}if(r.t===e.INTERPOLATOR||r.t===e.TRIPLE||r.t===e.SECTION){if(r.r&&s.test(r.r)){return r.r}if(r.x&&(i=c(r.x))){return i}if(r.rx&&(i=h(r.rx))){return i}}}}function c(e){var t;t=e.r.length;while(t--){if(s.test(e.r[t])){return e.r[t]}}}function h(t){var n,r,i;n=t.m.length;while(n--){i=t.m[n];if(i.r&&(r=c(i))){return r}if(i.t===e.REFERENCE&&s.test(i.n)){return i.n}}}function d(t){return t.t===e.SECTION||t.t===e.INVERTED}return o}(z,mt,yt,_t,wt);var kt=function(e){var t="<!--",n="-->";return function(r){var i,o,a,s,u;i=r.pos;if(!r.matchString(t)){return null}a=r.remaining();s=a.indexOf(n);if(s===-1){r.error("Illegal HTML - expected closing comment sequence ('-->')")}o=a.substr(0,s);r.pos+=s+3;u={t:e.COMMENT,c:o};if(r.includeLinePositions){u.p=r.getLinePos(i)}return u}}(z);var St=function(){var e=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return e}();var Ot=function(e,t){var n,r,i;n=t.length;while(n--){r=e.indexOf(t[n]);if(!r){return 0}if(r===-1){continue}if(!i||r<i){i=r}}return i||-1};var Tt=function(e){return function(t){var n,r,i,o;r=t.remaining();o=t.inside?"</"+t.inside:"<";if(t.inside&&!t.interpolate[t.inside]){n=r.indexOf(o)}else{i=[o,t.delimiters[0],t.tripleDelimiters[0],t.staticDelimiters[0],t.staticTripleDelimiters[0]];if(t.inAttribute===true){i.push('"',"'","=",">","`")}else if(t.inAttribute){i.push(t.inAttribute)}n=e(r,i)}if(!n){return null}if(n===-1){n=r.length}t.pos+=n;return r.substr(0,n)}}(Ot);var At=function(e){var t=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;if(!n.matchString("</")){return null}if(r=n.matchPattern(t)){return{t:e.CLOSING_TAG,e:r}}n.pos-=2;n.error("Illegal closing tag")}}(z);var Nt=function(){var e;var t,n,r;t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};
n=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];r=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(t).join("|")+"));?","g");e=function o(e){return e.replace(r,function(e,n){var r;if(n[0]!=="#"){r=t[n]}else if(n[1]==="x"){r=parseInt(n.substring(2),16)}else{r=parseInt(n.substring(1),10)}if(!r){return e}return String.fromCharCode(i(r))})};function i(e){if(!e){return 65533}if(e===10){return 32}if(e<128){return e}if(e<=159){return n[e-128]}if(e<55296){return e}if(e<=57343){return 65533}if(e<=65535){return e}return 65533}return e}(Et);var Lt=function(e,t,n){var r;var i=/^[^\s"'>\/=]+/,o=/^[^\s"'=<>`]+/;r=a;function a(e){var t,n,r;e.allowWhitespace();n=e.matchPattern(i);if(!n){return null}t={name:n};r=s(e);if(r){t.value=r}return t}function s(e){var t,r,i,o;t=e.pos;e.allowWhitespace();if(!e.matchString("=")){e.pos=t;return null}e.allowWhitespace();r=e.pos;i=e.sectionDepth;o=l(e,"'")||l(e,'"')||f(e);if(e.sectionDepth!==i){e.pos=r;e.error("An attribute value must contain as many opening section tags as closing section tags")}if(o===null){e.pos=t;return null}if(!o.length){return null}if(o.length===1&&typeof o[0]==="string"){return n(o[0])}return o}function u(t){var n,r,i,a,s;n=t.pos;r=t.matchPattern(o);if(!r){return null}i=r;a=[t.delimiters[0],t.tripleDelimiters[0],t.staticDelimiters[0],t.staticTripleDelimiters[0]];if((s=e(i,a))!==-1){r=r.substr(0,s);t.pos=n+r.length}return r}function f(e){var n,r;e.inAttribute=true;n=[];r=t(e)||u(e);while(r!==null){n.push(r);r=t(e)||u(e)}if(!n.length){return null}e.inAttribute=false;return n}function l(e,n){var r,i,o;r=e.pos;if(!e.matchString(n)){return null}e.inAttribute=n;i=[];o=t(e)||c(e,n);while(o!==null){i.push(o);o=t(e)||c(e,n)}if(!e.matchString(n)){e.pos=r;return null}e.inAttribute=false;return i}function c(t,n){var r,i,o,a;r=t.pos;o=t.remaining();a=[n,t.delimiters[0],t.tripleDelimiters[0],t.staticDelimiters[0],t.staticTripleDelimiters[0]];i=e(o,a);if(i===-1){t.error("Quoted attribute value must have a closing quote")}if(!i){return null}t.pos+=i;return o.substr(0,i)}return r}(Ot,xt,Nt);var Rt=function(e,t,n){var r,i,o,a,s,u,f;i={"true":true,"false":false,undefined:undefined,"null":null};o=new RegExp("^(?:"+Object.keys(i).join("|")+")");a=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;s=/\$\{([^\}]+)\}/g;u=/^\$\{([^\}]+)\}/;f=/^\s*$/;r=e.extend({init:function(e,t){this.values=t.values;this.allowWhitespace()},postProcess:function(e){if(e.length!==1||!f.test(this.leftover)){return null}return{value:e[0].v}},converters:[function c(e){var t;if(!e.values){return null}t=e.matchPattern(u);if(t&&e.values.hasOwnProperty(t)){return{v:e.values[t]}}},function h(e){var t;if(t=e.matchPattern(o)){return{v:i[t]}}},function d(e){var t;if(t=e.matchPattern(a)){return{v:+t}}},function p(e){var n=t(e),r;if(n&&(r=e.values)){return{v:n.v.replace(s,function(e,t){return t in r?r[t]:t})}}return n},function v(e){var t,n;if(!e.matchString("{")){return null}t={};e.allowWhitespace();if(e.matchString("}")){return{v:t}}while(n=l(e)){t[n.key]=n.value;e.allowWhitespace();if(e.matchString("}")){return{v:t}}if(!e.matchString(",")){return null}}return null},function g(e){var t,n;if(!e.matchString("[")){return null}t=[];e.allowWhitespace();if(e.matchString("]")){return{v:t}}while(n=e.read()){t.push(n.v);e.allowWhitespace();if(e.matchString("]")){return{v:t}}if(!e.matchString(",")){return null}e.allowWhitespace()}return null}]});function l(e){var t,r,i;e.allowWhitespace();t=n(e);if(!t){return null}i={key:t};e.allowWhitespace();if(!e.matchString(":")){return null}e.allowWhitespace();r=e.read();if(!r){return null}i.value=r.v;return i}return function(e,t){var n=new r(e,{values:t});return n.result}}(gt,X,et);var Ct=function(e,t,n,r){var i=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,o;o=e.extend({converters:[t]});return function(e){var t,a,s,u,f,l,c,h,d;if(typeof e==="string"){if(a=i.exec(e)){t={m:a[1]};u="["+e.slice(t.m.length+1,-1)+"]";s=new o(u);t.a=n(s.result[0]);return t}if(e.indexOf(":")===-1){return e.trim()}e=[e]}t={};c=[];h=[];while(e.length){f=e.shift();if(typeof f==="string"){l=f.indexOf(":");if(l===-1){c.push(f)}else{if(l){c.push(f.substr(0,l))}if(f.length>l+1){h[0]=f.substring(l+1)}break}}else{c.push(f)}}h=h.concat(e);if(h.length||typeof c!=="string"){t={n:c.length===1&&typeof c[0]==="string"?c[0]:c};if(h.length===1&&typeof h[0]==="string"){d=r("["+h[0]+"]");t.a=d?d.value:h[0].trim()}else{t.d=h}}else{t=c}return t}}(gt,pt,vt,Rt);var jt=function(e,t,n,r,i,o,a,s){var u;var f=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,l=/^[\s\n\/>]/,c=/^on/,h=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,d=/^(?:change|reset|teardown|update)$/,p={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},v={exclude:true},g,m;g=[n,r,y,i,o];m={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};u=y;function y(n){var r,i,o,u,m,y,w,E,_,x,k;r=n.pos;if(n.inside){return null}if(!n.matchString("<")){return null}if(n.nextChar()==="/"){return null}i={t:e.ELEMENT};if(n.includeLinePositions){i.p=n.getLinePos(r)}if(n.matchString("!")){i.y=1}i.e=n.matchPattern(f);if(!i.e){return null}if(!l.test(n.nextChar())){n.error("Illegal tag name")}y=function(e,t){var r=t.n||t;if(d.test(r)){n.pos-=r.length;n.error("Cannot use reserved event names (change, reset, teardown, update)")}i.v[e]=t};while(w=a(n)){if(u=p[w.name]){i[u]=s(w.value)}else if(m=h.exec(w.name)){if(!i.v)i.v={};E=s(w.value);y(m[1],E)}else{if(!n.sanitizeEventAttributes||!c.test(w.name)){if(!i.a)i.a={};i.a[w.name]=w.value||0}}}n.allowWhitespace();if(n.matchString("/")){_=true}if(!n.matchString(">")){return null}o=i.e.toLowerCase();if(!_&&!t.test(i.e)){if(o==="script"||o==="style"){n.inside=o}x=[];while(b(o,n.remaining())&&(k=n.read(g))){if(k.t===e.CLOSING){break}if(k.t===e.CLOSING_TAG){break}x.push(k)}if(x.length){i.f=x}}n.inside=null;if(n.sanitizeElements&&n.sanitizeElements.indexOf(o)!==-1){return v}return i}function b(e,t){var n,r;n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(t);r=m[e];if(!n||!r){return true}return!~r.indexOf(n[1].toLowerCase())}return u}(z,St,xt,kt,Tt,At,Lt,Ct);var It=function(){var e=/^[ \t\f\r\n]+/,t=/[ \t\f\r\n]+$/;return function(n,r,i){var o;if(r){o=n[0];if(typeof o==="string"){o=o.replace(e,"");if(!o){n.shift()}else{n[0]=o}}}if(i){o=n[n.length-1];if(typeof o==="string"){o=o.replace(t,"");if(!o){n.pop()}else{n[n.length-1]=o}}}}}();var Mt=function(e){var t;var n=/^\s*\r?\n/,r=/\r?\n\s*$/;t=function(e){var t,s,u,f,l;for(t=1;t<e.length;t+=1){s=e[t];u=e[t-1];f=e[t-2];if(i(s)&&o(u)&&i(f)){if(r.test(f)&&n.test(s)){e[t-2]=f.replace(r,"\n");e[t]=s.replace(n,"")}}if(a(s)&&i(u)){if(r.test(u)&&i(s.f[0])&&n.test(s.f[0])){e[t-1]=u.replace(r,"\n");s.f[0]=s.f[0].replace(n,"")}}if(i(s)&&a(u)){l=u.f[u.f.length-1];if(i(l)&&r.test(l)&&n.test(s)){u.f[u.f.length-1]=l.replace(r,"\n");e[t]=s.replace(n,"")}}}return e};function i(e){return typeof e==="string"}function o(t){return t.t===e.COMMENT||t.t===e.DELIMCHANGE}function a(t){return(t.t===e.SECTION||t.t===e.INVERTED)&&t.f}return t}(z);var Pt=function(){var e=/[-/\\^$*+?.()|[\]{}]/g;return function t(n){return n.replace(e,"\\$&")}}();var Dt=function(e,t,n,r,i,o,a,s,u){var f;var l,c,h=/[ \t\f\r\n]+/g,d=/^(?:pre|script|style|textarea)$/i,p=/^\s+/,v=/\s+$/;l=t.extend({init:function(e,t){m(t,this);this.sectionDepth=0;this.interpolate={script:!t.interpolate||t.interpolate.script!==false,style:!t.interpolate||t.interpolate.style!==false};if(t.sanitize===true){t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:true}}this.sanitizeElements=t.sanitize&&t.sanitize.elements;this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes;this.includeLinePositions=t.includeLinePositions},postProcess:function(e,t){if(this.sectionDepth>0){this.error("A section was left open")}g(e,t.stripComments!==false,t.preserveWhitespace,!t.preserveWhitespace,!t.preserveWhitespace,t.rewriteElse!==false);return e},converters:[n,r,i,o]});c=function(e){var t=arguments[1];if(t===void 0)t={};var n,r,i,o,a,s,f,c;m(t);f=new RegExp("<!--\\s*"+u(t.delimiters[0])+"\\s*>\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*"+u(t.delimiters[1])+"\\s*-->");c=new RegExp("<!--\\s*"+u(t.delimiters[0])+"\\s*\\/\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*"+u(t.delimiters[1])+"\\s*-->");n={v:1};if(f.test(e)){r=e;e="";while(a=f.exec(r)){o=a[1];e+=r.substr(0,a.index);r=r.substring(a.index+a[0].length);s=c.exec(r);if(!s||s[1]!==o){throw new Error('Inline partials must have a closing delimiter, and cannot be nested. Expected closing for "'+o+'", but '+(s?'instead found "'+s[1]+'"':" no closing found"))}(i||(i={}))[o]=new l(r.substr(0,s.index),t).result;r=r.substring(s.index+s[0].length)}e+=r;n.p=i}n.t=new l(e,t).result;return n};f=c;function g(t,n,r,i,o,u){var f,l,c,m,y,b,w,E,_;s(t);f=t.length;while(f--){l=t[f];if(l.exclude){t.splice(f,1)}else if(n&&l.t===e.COMMENT){t.splice(f,1)}}a(t,i,o);f=t.length;while(f--){l=t[f];if(l.f){y=r||l.t===e.ELEMENT&&d.test(l.e);if(!y){c=t[f-1];m=t[f+1];if(!c||typeof c==="string"&&v.test(c)){b=true}if(!m||typeof m==="string"&&p.test(m)){w=true}}g(l.f,n,y,b,w,u)}if(l.l){g(l.l,n,r,b,w,u);if(u){E={t:4,n:e.SECTION_UNLESS,f:l.l};if(l.r){E.r=l.r}if(l.x){E.x=l.x}if(l.rx){E.rx=l.rx}t.splice(f+1,0,E);delete l.l}}if(l.a){for(_ in l.a){if(l.a.hasOwnProperty(_)&&typeof l.a[_]!=="string"){g(l.a[_],n,r,b,w,u)}}}}f=t.length;while(f--){if(typeof t[f]==="string"){if(typeof t[f+1]==="string"){t[f]=t[f]+t[f+1];t.splice(f+1,1)}if(!r){t[f]=t[f].replace(h," ")}if(t[f]===""){t.splice(f,1)}}}}function m(e){var t=arguments[1];if(t===void 0)t=e;t.delimiters=e.delimiters||["{{","}}"];t.tripleDelimiters=e.tripleDelimiters||["{{{","}}}"];t.staticDelimiters=e.staticDelimiters||["[[","]]"];t.staticTripleDelimiters=e.staticTripleDelimiters||["[[[","]]]"]}return f}(z,gt,xt,kt,jt,Tt,It,Mt,Pt);var Ft=function(){return function e(t,n){var r=t.map(n);t.forEach(function(e,t){r[e]=r[t]});return r}}(Et);var Bt=function(e){var t,n;t=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"];n=e(t,function(e){return e});return n}(Ft);var Ut=function(e,t,n,r,i){var o={parse:s,fromId:u,isHashedId:f,isParsed:l,getParseOptions:c,createHelper:a};function a(e){var t=r(o);t.parse=function(t,n){return s(t,n||e)};return t}function s(t,r){if(!n){throw new Error(e.missingParser)}return n(t,r||this.options)}function u(e,n){var r;if(!t){if(n&&n.noThrow){return}throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}if(f(e)){e=e.substring(1)}if(!(r=document.getElementById(e))){if(n&&n.noThrow){return}throw new Error("Could not find template element with id #"+e)}if(r.tagName.toUpperCase()!=="SCRIPT"){if(n&&n.noThrow){return}throw new Error("Template element with id #"+e+", must be a <script> element")}return r.innerHTML}function f(e){return e.charAt(0)==="#"}function l(e){return!(typeof e==="string")}function c(e){if(e.defaults){e=e.defaults}return i.reduce(function(t,n){t[n]=e[n];return t},{})}return o}(V,A,Dt,H,Bt);var Wt=function(e,t){var n={name:"template",extend:function s(e,t,n){var r;if("template"in n){r=n.template;if(typeof r==="function"){t.template=r}else{t.template=o(r,t)}}},init:function u(e,t,n){var r,s;r="template"in n?n.template:e.prototype.template;if(typeof r==="function"){s=r;r=i(t,s);t._config.template={fn:s,result:r}}r=o(r,t);t.template=r.t;if(r.p){a(t.partials,r.p)}},reset:function(e){var t=r(e),n;if(t){n=o(t,e);e.template=n.t;a(e.partials,n.p,true);return true}}};function r(e){var t=e._config.template,n;if(!t||!t.fn){return}n=i(e,t.fn);if(n!==t.result){t.result=n;n=o(n,e);return n}}function i(t,n){var r=e.createHelper(e.getParseOptions(t));return n.call(t,t.data,r)}function o(n,r){if(typeof n==="string"){if(n[0]==="#"){n=e.fromId(n)}n=t(n,e.getParseOptions(r))}else if(n.v!==1){throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return n}function a(e,t,n){if(!t)return;for(var r in t){if(n||!e.hasOwnProperty(r)){e[r]=t[r]}}}return n}(Ut,Dt);var qt=function(e){function t(e,t){this.name=e;this.useDefaults=t}t.prototype={constructor:t,extend:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,this.useDefaults?t:t.constructor,n)},init:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,t,n)},configure:function(t,n,r){var i=this.name,o=r[i],a;a=e(t[i]);for(var s in o){a[s]=o[s]}n[i]=a},reset:function(e){var t=e[this.name];var n=false;Object.keys(t).forEach(function(e){var r=t[e];if(r._fn){if(r._fn.isOwner){t[e]=r._fn}else{delete t[e]}n=true}});return n},findOwner:function(e,t){return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e.constructor,t)},findConstructor:function(e,t){if(!e){return}return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e._parent,t)},find:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]})},findInstance:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]?e:void 0})}};function n(e,t){var r,i;if(r=t(e)){return r}if(!e.isolated&&(i=e._parent)){return n(i,t)}}return t}(H,Et);var Vt=function(e,t){var n=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],r=e(n,function(e){return new t(e,e==="computed")});return r}(Ft,qt);var zt=function(){};var Ht=function(e){var t;t=function r(e,t,i){if(!/_super/.test(i)){return i}var o=function a(){var e=n(o._parent,t),r="_super"in this,a=this._super,s;this._super=e;s=i.apply(this,arguments);if(r){this._super=a}else{delete this._super}return s};o._parent=e;o._method=i;return o};function n(t,n){var r;if(n in t){var i=t[n];if(typeof i==="function"){r=i}else{r=function o(){return i}}}else{r=e}return r}return t}(zt);var Gt=function(e,t){function n(t,n,i){if(n in t){if(!(i in t)){e(r(n,i));t[i]=t[n]}else{throw new Error(r(n,i,true))}}}function r(e,t,n){return"options."+e+" has been deprecated in favour of options."+t+"."+(n?" You cannot specify both options, please use options."+t+".":"")}function i(e){n(e,"eventDefinitions","events")}function o(e){if(t(e.adaptors)){n(e,"adaptors","adapt")}}return function a(e){i(e);o(e)}}(F,s);var $t=function(e,t,n,r,i,o,a,s){var u,f,l;u={data:t,template:r,css:e};f=Object.keys(n).filter(function(e){return!o[e]&&!u[e]&&!i[e]});l=[].concat(u.data,i,f,o,u.template,u.css);for(var c in u){l[c]=u[c]}l.keys=Object.keys(n).concat(o.map(function(e){return e.name})).concat(["css"]);l.parseOptions=i;l.registries=o;function h(e,t,n,r,i){u[t][e](n,r,i)}l.extend=function(e,t,n){d("extend",e,t,n)};l.init=function(e,t,n){d("init",e,t,n);if(t._config){t._config.options=n}};function d(e,t,r,i){s(i);h(e,"data",t,r,i);l.parseOptions.forEach(function(e){if(e in i){r[e]=i[e]}});for(var o in i){if(o in n&&!(o in l.parseOptions)&&!(o in u)){var f=i[o];r[o]=typeof f==="function"?a(t.prototype,o,f):f}}l.registries.forEach(function(n){n[e](t,r,i)});h(e,"template",t,r,i);h(e,"css",t,r,i)}l.reset=function(e){return l.filter(function(t){return t.reset&&t.reset(e)}).map(function(e){return e.name})};return l}(U,q,r,Wt,Bt,Vt,Ht,Gt);var Kt=function(e,t,n,r){var i;var o=function(e,i,o,s){if(e===i){return a(i)}if(s){var u=r.registries.interpolators.find(o,s);if(u){return u(e,i)||a(i)}t('Missing "'+s+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,i)||n.array(e,i)||n.object(e,i)||a(i)};e.interpolate=o;i=o;function a(e){return function(){return e}}return i}(o,F,l,$t);var Jt=function(e,t,n){var r=function(e){var t;this.startTime=Date.now();for(t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}this.interpolator=n(this.from,this.to,this.root,this.interpolator);this.running=true;this.tick()};r.prototype={tick:function(){var n,r,i,o,a,s;s=this.keypath;if(this.running){o=Date.now();n=o-this.startTime;if(n>=this.duration){if(s!==null){t.start(this.root);this.root.viewmodel.set(s,this.to);t.end()}if(this.step){this.step(1,this.to)}this.complete(this.to);a=this.root._animations.indexOf(this);if(a===-1){e("Animation was not found")}this.root._animations.splice(a,1);this.running=false;return false}r=this.easing?this.easing(n/this.duration):n/this.duration;if(s!==null){i=this.interpolator(r);t.start(this.root);this.root.viewmodel.set(s,i);t.end()}if(this.step){this.step(r,i)}return true}return false},stop:function(){var t;this.running=false;t=this.root._animations.indexOf(this);if(t===-1){e("Animation was not found")}this.root._animations.splice(t,1)}};return r}(F,_,Kt);var Yt=function(e,t,n,r,i){var o;var a=function(){},s={stop:a};o=function f(e,n,r){var i,o,s,f,l,c,h,d,p,v,g,m,y,b;i=new t(function(e){o=e});if(typeof e==="object"){r=n||{};c=r.easing;h=r.duration;l=[];d=r.step;p=r.complete;if(d||p){g={};r.step=null;r.complete=null;v=function(e){return function(t,n){g[e]=n}}}for(s in e){if(e.hasOwnProperty(s)){if(d||p){m=v(s);r={easing:c,duration:h};if(d){r.step=m}}r.complete=p?m:a;l.push(u(this,s,e[s],r))}}b={easing:c,duration:h};if(d){b.step=function(e){d(e,g)}}if(p){i.then(function(e){p(e,g)})}b.complete=o;y=u(this,null,null,b);l.push(y);i.stop=function(){var e;while(e=l.pop()){e.stop()}if(y){y.stop()}};return i}r=r||{};if(r.complete){i.then(r.complete)}r.complete=o;f=u(this,e,n,r);i.stop=function(){f.stop()};return i};function u(t,o,a,u){var f,l,c,h;if(o){o=n(o)}if(o!==null){h=t.viewmodel.get(o)}r.abort(o,t);if(e(h,a)){if(u.complete){u.complete(u.to)}return s}if(u.easing){if(typeof u.easing==="function"){f=u.easing}else{f=t.easing[u.easing]}if(typeof f!=="function"){f=null}}l=u.duration===undefined?400:u.duration;c=new i({keypath:o,from:h,to:a,root:t,duration:l,easing:f,interpolator:u.interpolator,step:u.step,complete:u.complete});r.add(c);t._animations.push(c);return c}return o}(y,v,j,D,Jt);var Qt=function(e){return function t(){if(this.detached){return this.detached}if(this.el){e(this.el.__ractive_instances__,this)}this.detached=this.fragment.detach();return this.detached}}(p);var Xt=function fs(e){if(!this.el){return null}return this.fragment.find(e)};var Zt=function(e,t,n){var r,i,o,a,s,u,f,l;if(!e){r=null}else{i=n("div");o=["matches","matchesSelector"];l=function(e){return function(t,n){return t[e](n)}};u=o.length;while(u--&&!r){a=o[u];if(i[a]){r=l(a)}else{f=t.length;while(f--){s=t[u]+a.substr(0,1).toUpperCase()+a.substring(1);if(i[s]){r=l(s);break}}}}if(!r){r=function(e,t){var n,r,o;r=e.parentNode;if(!r){i.innerHTML="";r=i;e=e.cloneNode();i.appendChild(e)}n=r.querySelectorAll(t);o=n.length;while(o--){if(n[o]===e){return true}}return false}}}return r}(A,I,T);var en=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r){this.push(t.node||t.instance);if(!n){this._makeDirty()}return true}}}(Zt);var tn=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];t=this.selector;n=e.indexOf(t);if(n!==-1){e.splice(n,1);e[t]=null}};var nn=function(){var e;e=function(e,t){var r,i,o,a,s,u,f,l,c,h;r=n(e.component||e._ractive.proxy);i=n(t.component||t._ractive.proxy);o=r[r.length-1];a=i[i.length-1];while(o&&o===a){r.pop();i.pop();s=o;o=r[r.length-1];a=i[i.length-1]}o=o.component||o;a=a.component||a;c=o.parentFragment;h=a.parentFragment;if(c===h){u=c.items.indexOf(o);f=h.items.indexOf(a);return u-f||r.length-i.length}if(l=s.fragments){u=l.indexOf(c);f=l.indexOf(h);return u-f||r.length-i.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")};function t(e){var t;if(t=e.parentFragment){return t.owner}if(e.component&&(t=e.component.parentFragment)){return t.owner}}function n(e){var n,r;n=[e];r=t(e);while(r){n.push(r);r=t(r)}return n}return e}();var rn=function(e){return function(t,n){var r;if(t.compareDocumentPosition){r=t.compareDocumentPosition(n);return r&2?1:-1}return e(t,n)}}(nn);var on=function(e,t){return function(){this.sort(this._isComponentQuery?t:e);this._dirty=false}}(rn,nn);var an=function(e){return function(){var t=this;if(!this._dirty){this._dirty=true;e.scheduleTask(function(){t._sort()})}}}(_);var sn=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);if(t!==-1){this.splice(t,1)}};var un=function(e,t,n,r,i,o){return function a(s,u,f,l){var c=[];e(c,{selector:{value:u},live:{value:f},_isComponentQuery:{value:l},_test:{value:t}});if(!f){return c}e(c,{cancel:{value:n},_root:{value:s},_sort:{value:r},_makeDirty:{value:i},_remove:{value:o},_dirty:{value:false,writable:true}});return c}}(L,en,tn,on,an,sn);var fn=function(e){return function t(n,r){var i,o;if(!this.el){return[]}r=r||{};i=this._liveQueries;if(o=i[n]){return r&&r.live?o:o.slice()}o=e(this,n,!!r.live,false);if(o.live){i.push(n);i["_"+n]=o}this.fragment.findAll(n,o);return o}}(un);var ln=function(e){return function t(n,r){var i,o;r=r||{};i=this._liveComponentQueries;if(o=i[n]){return r&&r.live?o:o.slice()}o=e(this,n,!!r.live,true);if(o.live){i.push(n);i["_"+n]=o}this.fragment.findAllComponents(n,o);return o}}(un);var cn=function ls(e){return this.fragment.findComponent(e)};var hn=function(e){return function t(n){var r={args:Array.prototype.slice.call(arguments,1)};e(this,n,r)}}(d);var dn=function(e){var t={capture:true};return function n(r){r=e(r);return this.viewmodel.get(r,t)}}(j);var pn=function cs(e){var t;if(!e||typeof e==="boolean"){return}if(typeof window==="undefined"||!document||!e){return null}if(e.nodeType){return e}if(typeof e==="string"){t=document.getElementById(e);if(!t&&document.querySelector){t=document.querySelector(e)}if(t&&t.nodeType){return t}}if(e[0]&&e[0].nodeType){return e[0]}return null};var vn=function(e){return function t(n,r){if(!this.rendered){throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.")}n=e(n);r=e(r)||null;if(!n){throw new Error("You must specify a valid target to insert into")}n.insertBefore(this.detach(),r);this.el=n;(n.__ractive_instances__||(n.__ractive_instances__=[])).push(this);this.detached=null}}(pn);var gn=function(e,t,n){return function r(i,o,a){var s,u;i=n(i);s=this.viewmodel.get(i);if(!t(s)||!t(o)){return this.set(i,o,a&&a.complete)}u=e.start(this,true);this.viewmodel.merge(i,s,o,a);e.end();if(a&&a.complete){u.then(a.complete)}return u}}(_,s,j);var mn=function(e,t){var n=function(e,t,n,r){this.root=e;this.keypath=t;this.callback=n;this.defer=r.defer;this.priority=0;this.context=r&&r.context?r.context:e};n.prototype={init:function(e){this.value=this.root.viewmodel.get(this.keypath);if(e!==false){this.update()}else{this.oldValue=this.value}},setValue:function(n){var r=this;if(!t(n,this.value)){this.value=n;if(this.defer&&this.ready){e.scheduleTask(function(){return r.update()})}else{this.update()}}},update:function(){if(this.updating){return}this.updating=true;this.callback.call(this.context,this.value,this.oldValue,this.keypath);this.oldValue=this.value;this.updating=false}};return n}(_,y);var yn=function(e){return function t(n,r){var i,o,a;i=r.split(".");a=[""];while(o=i.shift()){if(o==="*"){a=a.reduce(s,[])}else{if(a[0]===""){a[0]=o}else{a=a.map(u(o))}}}return a;function s(t,r){var i,o,a;i=n.viewmodel.wrapped[r]?n.viewmodel.wrapped[r].get():n.get(r);for(o in i){if(i.hasOwnProperty(o)&&(o!=="_ractive"||!e(i))){a=r?r+"."+o:o;t.push(a)}}return t}function u(e){return function(t){return t?t+"."+e:e}}}}(s);var bn=function(e){return function t(n,r){var i,o;i=e(n,r);o={};i.forEach(function(e){o[e]=n.get(e)});return o}}(yn);var wn=function(e,t,n){var r,i=/\*/,o=Array.prototype.slice;r=function(e,t,n,r){this.root=e;this.callback=n;this.defer=r.defer;this.keypath=t;this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};if(this.defer){this.proxies=[]}this.priority="pattern";this.context=r&&r.context?r.context:e};r.prototype={init:function(e){var t,r;t=n(this.root,this.keypath);if(e!==false){for(r in t){if(t.hasOwnProperty(r)){this.update(r)}}}else{this.values=t}},update:function(t){var r=this;var o;if(i.test(t)){o=n(this.root,t);for(t in o){if(o.hasOwnProperty(t)){this.update(t)}}return}if(this.root.viewmodel.implicitChanges[t]){return}if(this.defer&&this.ready){e.scheduleTask(function(){return r.getProxy(t).update()});return}this.reallyUpdate(t)},reallyUpdate:function(e){var n,r,i;n=this.root.viewmodel.get(e);if(this.updating){this.values[e]=n;return}this.updating=true;if(!t(n,this.values[e])||!this.ready){r=o.call(this.regex.exec(e),1);i=[n,this.values[e],e].concat(r);this.callback.apply(this.context,i);this.values[e]=n}this.updating=false},getProxy:function(e){var t=this;if(!this.proxies[e]){this.proxies[e]={update:function(){t.reallyUpdate(e)}}}return this.proxies[e]}};return r}(_,y,bn);var En=function(e,t,n){var r=/\*/,i={};return function o(a,s,u,f){var l,c,h;s=e(s);f=f||i;if(r.test(s)){l=new n(a,s,u,f);a.viewmodel.patternObservers.push(l);c=true}else{l=new t(a,s,u,f)}a.viewmodel.register(s,l,c?"patternObservers":"observers");l.init(f.init);l.ready=true;return{cancel:function(){var e;if(h){return}if(c){e=a.viewmodel.patternObservers.indexOf(l);a.viewmodel.patternObservers.splice(e,1);a.viewmodel.unregister(s,l,"patternObservers")}else{a.viewmodel.unregister(s,l,"observers")}h=true}}}}(j,mn,wn);var _n=function(e,t){return function n(r,i,o){var a,s,u,f;if(e(r)){o=i;s=r;a=[];for(r in s){if(s.hasOwnProperty(r)){i=s[r];a.push(this.observe(r,i,o))}}return{cancel:function(){while(a.length){a.pop().cancel()}}}}if(typeof r==="function"){o=i;i=r;r="";return t(this,r,i,o)}u=r.split(" ");if(u.length===1){return t(this,r,i,o)}a=[];f=u.length;while(f--){r=u[f];if(r){a.push(t(this,r,i,o))}}return{cancel:function(){while(a.length){a.pop().cancel()}}}}}(u,En);var xn=function(e){return e.trim()};var kn=function(e){return e!==""};var Sn=function(e,t){return function n(r,i){var o=this;var a;if(!r){for(r in this._subs){delete this._subs[r]}}else{a=r.split(" ").map(e).filter(t);a.forEach(function(e){var t,n;if(t=o._subs[e]){if(i){n=t.indexOf(i);if(n!==-1){t.splice(n,1)}}else{o._subs[e]=[]}}})}return this}}(xn,kn);var On=function(e,t){return function n(r,i){var o=this;var a=this,s,u,f;if(typeof r==="object"){s=[];for(u in r){if(r.hasOwnProperty(u)){s.push(this.on(u,r[u]))}}return{cancel:function(){var e;while(e=s.pop()){e.cancel()}}}}f=r.split(" ").map(e).filter(t);f.forEach(function(e){(o._subs[e]||(o._subs[e]=[])).push(i)});return{cancel:function(){a.off(r,i)}}}}(xn,kn);var Tn=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length){return[-1]}return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}};var An=function(e,t){var n,r,i,o,a,s;if(!t){return null}n=+(t[0]<0?e.length+t[0]:t[0]);if(n<0){n=0}else if(n>e.length){n=e.length}o=Math.max(0,t.length-2);a=t[1]!==undefined?t[1]:e.length-n;a=Math.min(a,e.length-n);s=o-a;i=e.length+s;if(!s){r=n+o}else{r=Math.max(e.length,i)}return{rangeStart:n,rangeEnd:r,balance:s,added:o,removed:a}};var Nn=function(e,t,n,r){var i=Array.prototype;return function(o){return function(a){var s=Array.prototype.slice;var u=s.call(arguments,1);var f,l,c,h,d;f=this.get(a);if(!e(f)){throw new Error("Called ractive."+o+"('"+a+"'), but '"+a+"' does not refer to an array")}l=n(f,o,u);c=r(f,l);if(c){d=i.splice.apply(f,l)}else{d=i[o].apply(f,u)}h=t.start(this,true);if(c){this.viewmodel.splice(a,c)}else{this.viewmodel.mark(a)}t.end();if(o==="splice"||o==="pop"||o==="shift"){h=h.then(function(){return d})}return h}}}(s,_,Tn,An);var Ln=function(e){return e("pop")}(Nn);var Rn=function(e){return e("push")}(Nn);var Cn=function(e,t,n){var r,i,o,a,s,u,f,l="/* Ractive.js component styles */\n",c={},h=[];if(!t){r=null}else{e.push(function(){o=e.runloop});a=document.createElement("style");a.type="text/css";s=document.getElementsByTagName("head")[0];f=false;u=a.styleSheet;i=function(){var e;if(h.length){e=l+h.join(" ");if(u){u.cssText=e}else{a.innerHTML=e}if(!f){s.appendChild(a);f=true}}else if(f){s.removeChild(a);f=false}};r={add:function(e){if(!e.css){return}if(!c[e._guid]){c[e._guid]=0;h.push(e.css);o.scheduleTask(i)}c[e._guid]+=1},remove:function(e){if(!e.css){return}c[e._guid]-=1;if(!c[e._guid]){n(h,e.css);o.scheduleTask(i)}}}}return r}(o,A,p);var jn=function(e,t,n){var r;var i={},o={};r=function u(r,i){var u=this;var f,l,c;o[this._guid]=true;c=this.transitionsEnabled;if(this.noIntro){this.transitionsEnabled=false}f=e.start(this,true);if(this.rendered){throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first")}r=n(r)||this.el;i=n(i)||this.anchor;this.el=r;this.anchor=i;if(this.constructor.css){t.add(this.constructor)}if(r){if(!(l=r.__ractive_instances__)){r.__ractive_instances__=[this]}else{l.push(this)}if(i){r.insertBefore(this.fragment.render(),i)}else{r.appendChild(this.fragment.render())}}if(!this._hasInited){this._hasInited=true;if(!this._parent||!o[this._parent._guid]){a(this)}else{s(this._parent).push(this)}}o[this._guid]=false;e.end();this.rendered=true;this.transitionsEnabled=c;if(this.complete){f.then(function(){return u.complete()})}return f};function a(e){var t=s(e);if(e.init){e.init(e._config.options)}while(t.length){a(t.shift())}i[e._guid]=null}function s(e){return i[e._guid]||(i[e._guid]=[])}return r}(_,Cn,pn);var In=function hs(){this.dirtyValue=this.dirtyArgs=true;if(this.bound&&typeof this.owner.bubble==="function"){this.owner.bubble()}};var Mn=function ds(){var e;if(this.items.length===1){return this.items[0].detach()}e=document.createDocumentFragment();this.items.forEach(function(t){e.appendChild(t.detach())});return e};var Pn=function ps(e){var t,n,r,i;if(this.items){n=this.items.length;for(t=0;t<n;t+=1){r=this.items[t];if(r.find&&(i=r.find(e))){return i}}return null}};var Dn=function vs(e,t){var n,r,i;if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.findAll){i.findAll(e,t)}}}return t};var Fn=function gs(e,t){var n,r,i;if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.findAllComponents){i.findAllComponents(e,t)}}}return t};var Bn=function ms(e){var t,n,r,i;if(this.items){t=this.items.length;for(n=0;n<t;n+=1){r=this.items[n];if(r.findComponent&&(i=r.findComponent(e))){return i}}return null}};var Un=function ys(e){var t=e.index,n;if(this.items[t+1]){n=this.items[t+1].firstNode()}else if(this.owner===this.root){if(!this.owner.component){n=null}else{n=this.owner.component.findNextNode()}}else{n=this.owner.findNextNode(this)}return n};var Wn=function bs(){if(this.items&&this.items[0]){return this.items[0].firstNode()}return null};var qn=function ws(){var e=this;do{if(e.pElement){return e.pElement.node}}while(e=e.parent);return this.root.detached||this.root.el};var Vn=function(e){var t;var n={};t=function i(){var t=arguments[0];if(t===void 0)t=n;var i,o,a,s,u,f,l;i=t.args;u=i?"argsList":"value";f=i?"dirtyArgs":"dirtyValue";if(this[f]){a=r(this.items,o={},this.root._guid);s=e(i?"["+a+"]":a,o);if(!s){l=i?[this.toString()]:this.toString()}else{l=s.value}this[u]=l;this[f]=false}return this[u]};function r(e,t,n,i){i=i||0;return e.map(function(e){var o,a,s;if(e.text){return e.text}if(e.fragments){return e.fragments.map(function(e){return r(e.items,t,n,i)}).join("")}o=n+"-"+i++;if(a=e.root.viewmodel.wrapped[e.keypath]){s=a.value}else{s=e.getValue()}t[o]=s;return"${"+o+"}"}).join("")}return t}(Rt);var zn=function(){var e=/</g,t=/>/g;return function n(r){return r.replace(e,"&lt;").replace(t,"&gt;")}}();var Hn=function Es(e){if(e&&e.parentNode){e.parentNode.removeChild(e)
}return e};var Gn=function(e){return function(){return e(this.node)}}(Hn);var $n=function(e,t,n,r){var i=function(t){this.type=e.TEXT;this.text=t.template};i.prototype={detach:n,firstNode:function(){return this.node},render:function(){if(!this.node){this.node=document.createTextNode(r(this.text))}return this.node},toString:function(e){return e?t(this.text):this.text},unrender:function(e){if(e){return this.detach()}}};return i}(z,zn,Gn,Nt);var Kn=function(e){return function t(){if(!this.keypath){e.removeUnresolved(this)}else{this.root.viewmodel.unregister(this.keypath,this)}if(this.resolver){this.resolver.unbind()}}}(_);var Jn=function _s(){return this.value};var Yn=function(e){var t=function(t,n,r,i){this.root=t;this.ref=n;this.parentFragment=r;this.resolve=i;e.addUnresolved(this)};t.prototype={unbind:function(){e.removeUnresolved(this)}};return t}(_);var Qn=function xs(e,t){return e&&t&&e.substr(0,t.length+1)===t+"."};var Xn=function(e){return function t(n,r,i){if(n===r){return i!==undefined?i:null}if(e(n,r)){return i===null?i:n.replace(r+".",i+".")}}}(Qn);var Zn=function(e,t){var n={warn:function(e,t){if(!e.debug&&!t){return}this.logger(r(e),e.allowDuplicates)},error:function(e){this.errorOnly(e);if(!e.debug){this.warn(e,true)}},errorOnly:function(e){if(e.debug){this.critical(e)}},critical:function(e){var t=e.err||new Error(r(e));this.thrower(t)},logger:e,thrower:function(e){throw e}};function r(e){var n=t[e.message]||e.message||"";return i(n,e.args)}function i(e,t){return e.replace(/{([^{}]*)}/g,function(e,n){return t[n]})}return n}(F,V);var er=function(){var e={};return function t(n,r){var i,o;if(e[n]){return e[n]}o=[];while(r--){o[r]="_"+r}i=new Function(o.join(","),"return("+n+")");e[n]=i;return i}}();var tr=function ks(e,t,n){var r,i;r=t.length;while(r--){i=t[r];if(n.indexOf(i)===-1){e.viewmodel.unregister(i,e,"computed")}}r=n.length;while(r--){i=n[r];if(t.indexOf(i)===-1){e.viewmodel.register(i,e,"computed")}}e.dependencies=n.slice()};var nr=function(e,t,n,r,i){var o;var a,s=Function.prototype.bind;a=function(e,t,n,i,o,a){var s=this,f=e.viewmodel;s.root=e;s.viewmodel=f;s.uniqueString=n;s.keypath=t;s.priority=a;s.fn=r(i,o.length);s.explicitDependencies=[];s.dependencies=[];s.argumentGetters=o.map(function(t){var n,r;if(!t){return void 0}if(t.indexRef){r=t.value;return r}n=t.keypath;s.explicitDependencies.push(n);f.register(n,s,"computed");return function(){var t=f.get(n);return typeof t==="function"?u(t,e):t}})};a.prototype={wake:function(){this.awake=true},sleep:function(){this.awake=false},getValue:function(){var t,n,r;t=this.argumentGetters.map(f);if(this.updating){return}this.updating=true;this.viewmodel.capture();try{n=this.fn.apply(null,t)}catch(o){if(this.root.debug){e.warn({debug:this.root.debug,message:"evaluationError",args:{uniqueString:this.uniqueString,err:o.message||o}})}n=undefined}r=this.viewmodel.release();i(this,this.dependencies,r);this.updating=false;return n},update:function(){var e=this.getValue();if(!t(e,this.value)){this.value=e;this.root.viewmodel.mark(this.keypath)}return this},teardown:function(){var e=this;this.explicitDependencies.concat(this.dependencies).forEach(function(t){return e.viewmodel.unregister(t,e,"computed")});this.root.viewmodel.evaluators[this.keypath]=null}};o=a;function u(e,t){var r,i,o;if(e._noWrap){return e}i="__ractive_"+t._guid;r=e[i];if(r){return r}else if(/this/.test(e.toString())){n(e,i,{value:s.call(e,t)});for(o in e){if(e.hasOwnProperty(o)){e[i][o]=e[o]}}return e[i]}n(e,"__ractive_nowrap",{value:e});return e.__ractive_nowrap}function f(e){return typeof e==="function"?e():e}return o}(Zn,y,N,er,tr,Et);var rr=function(e,t,n,r,i){var o;var a=function(r,i,o,a){var s=this,u,f,l;u=r.root;this.root=u;this.callback=a;this.owner=r;this.str=o.s;this.args=l=[];this.unresolved=[];this.pending=0;f=i.indexRefs;if(!o.r||!o.r.length){this.resolved=this.ready=true;this.bubble();return}o.r.forEach(function(r,o){var a,c,h;if(f&&(a=f[r])!==undefined){l[o]={indexRef:r,value:a};return}if(c=t(u,r,i)){l[o]={keypath:c};return}else if(r==="."){l[o]={"":""};return}l[o]=null;s.pending+=1;h=new n(u,r,i,function(t){s.resolve(o,t);e(s.unresolved,h)});s.unresolved.push(h)});this.ready=true;this.bubble()};a.prototype={bubble:function(){if(!this.ready){return}this.uniqueString=s(this.str,this.args);this.keypath=u(this.uniqueString);this.createEvaluator();this.callback(this.keypath)},unbind:function(){var e;while(e=this.unresolved.pop()){e.unbind()}},resolve:function(e,t){this.args[e]={keypath:t};this.bubble();this.resolved=!--this.pending},createEvaluator:function(){var e=this.root.viewmodel.evaluators[this.keypath];if(!e){e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority);this.root.viewmodel.evaluators[this.keypath]=e}e.update()},rebind:function(e,t,n,r){var o;this.args.forEach(function(a){var s;if(!a)return;if(a.keypath&&(s=i(a.keypath,n,r))){a.keypath=s;o=true}else if(a.indexRef&&a.indexRef===e){a.value=t;o=true}});if(o){this.bubble()}}};o=a;function s(e,t){return e.replace(/_([0-9]+)/g,function(e,n){var r=t[n];if(!r)return"undefined";if(r.indexRef)return r.value;return r.keypath})}function u(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}return o}(p,w,Yn,nr,Xn);var ir=function(e,t,n,r,i){var o=function(r,o,a){var s=this,u,f,l,c,h;s.resolver=o;s.root=o.root;s.viewmodel=o.root.viewmodel;if(typeof r==="string"){s.value=r}else if(r.t===e.REFERENCE){u=s.ref=r.n;if((f=a.indexRefs)&&(l=f[u])!==undefined){s.indexRef=u;s.value=l}else{c=o.root;if(h=t(c,u,a)){s.resolve(h)}else{s.unresolved=new n(c,u,a,function(e){s.unresolved=null;s.resolve(e)})}}}else{new i(o,a,r,function(e){s.resolve(e)})}};o.prototype={resolve:function(e){this.keypath=e;this.value=this.viewmodel.get(e);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(e,t,n,i){var o;if(e&&this.indexRef===e){if(t!==this.value){this.value=t;return true}}else if(this.keypath&&(o=r(this.keypath,n,i))){this.unbind();this.keypath=o;this.value=this.root.viewmodel.get(o);this.bind();return true}},setValue:function(e){this.value=e;this.resolver.bubble()},unbind:function(){if(this.keypath){this.root.viewmodel.unregister(this.keypath,this)}if(this.unresolved){this.unresolved.unbind()}},forceResolution:function(){if(this.unresolved){this.unresolved.unbind();this.unresolved=null;this.keypath=this.ref;this.value=this.viewmodel.get(this.ref);this.bind()}}};return o}(z,w,Yn,Xn,rr);var or=function(e,t,n){var r=function(r,i,o){var a=this;var s=this,u,f,l,c;c=r.parentFragment;s.root=u=r.root;s.mustache=r;s.priority=r.priority;s.ref=f=i.r;s.callback=o;s.unresolved=[];if(l=e(u,f,c)){s.base=l}else{s.baseResolver=new t(u,f,c,function(e){s.base=e;s.baseResolver=null;s.bubble()})}s.members=i.m.map(function(e){return new n(e,a,c)});s.ready=true;s.bubble()};r.prototype={getKeypath:function(){var e=this.members.map(i);if(!e.every(o)||this.baseResolver){return null}return this.base+"."+e.join(".")},bubble:function(){if(!this.ready||this.baseResolver){return}this.callback(this.getKeypath())},unbind:function(){this.members.forEach(a)},rebind:function(e,t,n,r){var i;this.members.forEach(function(o){if(o.rebind(e,t,n,r)){i=true}});if(i){this.bubble()}},forceResolution:function(){if(this.baseResolver){this.base=this.ref;this.baseResolver.unbind();this.baseResolver=null}this.members.forEach(function(e){return e.forceResolution()});this.bubble()}};function i(e){return e.value}function o(e){return e!=undefined}function a(e){e.unbind()}return r}(w,Yn,ir);var ar=function(e,t,n,r,i){return function o(a,s){var u,f,l,c,h,d;h=s.parentFragment;d=s.template;a.root=h.root;a.parentFragment=h;a.pElement=h.pElement;a.template=s.template;a.index=s.index||0;a.priority=h.priority;a.isStatic=s.template.s;a.type=s.template.t;if(u=d.r){l=h.indexRefs;if(l&&(c=l[u])!==undefined){a.indexRef=u;a.setValue(c);return}f=n(a.root,u,a.parentFragment);if(f!==undefined){a.resolve(f)}else{a.ref=u;t.addUnresolved(a)}}if(s.template.x){a.resolver=new i(a,h,s.template.x,p)}if(s.template.rx){a.resolver=new r(a,s.template.rx,p)}if(a.template.n===e.SECTION_UNLESS&&!a.hasOwnProperty("value")){a.setValue(undefined)}function p(e){var t=a.keypath;if(e!==t){a.resolve(e);if(t!==undefined){a.fragments&&a.fragments.forEach(function(n){n.rebind(null,null,t,e)})}}}}}(z,_,w,or,rr);var sr=function Ss(e){var t,n,r;if(this.keypath!=undefined){this.root.viewmodel.unregister(this.keypath,this);t=true}this.keypath=e;if(e!=undefined){n=this.root.viewmodel.get(e);this.root.viewmodel.register(e,this)}this.setValue(n);if(t&&(r=this.twowayBinding)){r.rebound()}};var ur=function(e){return function t(n,r,i,o){var a;if(this.fragments){this.fragments.forEach(function(e){return e.rebind(n,r,i,o)})}if(this.resolver){this.resolver.rebind(n,r,i,o)}if(this.keypath!==undefined){a=e(this.keypath,i,o);if(a!==undefined){this.resolve(a)}}else if(n!==undefined&&this.indexRef===n){this.setValue(r)}}}(Xn);var fr=function(e,t,n,r){return{getValue:e,init:t,resolve:n,rebind:r}}(Jn,ar,sr,ur);var lr=function(e,t,n,r,i,o,a,s){var u=function(t){this.type=e.INTERPOLATOR;a.init(this,t)};u.prototype={update:function(){this.node.data=this.value==undefined?"":this.value},resolve:a.resolve,rebind:a.rebind,detach:s,unbind:o,render:function(){if(!this.node){this.node=document.createTextNode(this.value!=undefined?this.value:"")}return this.node},unrender:function(e){if(e){r(this.node)}},getValue:a.getValue,setValue:function(e){var n;if(n=this.root.viewmodel.wrapped[this.keypath]){e=n.get()}if(!i(e,this.value)){this.value=e;this.parentFragment.bubble();if(this.node){t.addView(this)}}},firstNode:function(){return this.node},toString:function(e){var t=this.value!=undefined?""+this.value:"";return e?n(t):t}};return u}(z,_,zn,Hn,y,Kn,fr,Gn);var cr=function Os(){this.parentFragment.bubble()};var hr=function Ts(){var e;if(this.fragments.length===1){return this.fragments[0].detach()}e=document.createDocumentFragment();this.fragments.forEach(function(t){e.appendChild(t.detach())});return e};var dr=function As(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1){if(r=this.fragments[t].find(e)){return r}}return null};var pr=function Ns(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1){this.fragments[n].findAll(e,t)}};var vr=function Ls(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1){this.fragments[n].findAllComponents(e,t)}};var gr=function Rs(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1){if(r=this.fragments[t].findComponent(e)){return r}}return null};var mr=function Cs(e){if(this.fragments[e.index+1]){return this.fragments[e.index+1].firstNode()}return this.parentFragment.findNextNode(this)};var yr=function js(){var e,t,n;if(e=this.fragments.length){for(t=0;t<e;t+=1){if(n=this.fragments[t].firstNode()){return n}}}return this.parentFragment.findNextNode(this)};var br=function(e,t){var n;t.push(function(){n=t.Fragment});return function r(t){var n=this,r,i,o,a,s,u,f,l;if(this.unbound){return}r=this.parentFragment;s=[];t.forEach(function c(e,t){var r,o,a,u;if(e===t){s[e]=n.fragments[t];return}r=n.fragments[t];if(i===undefined){i=t}if(e===-1){n.fragmentsToUnrender.push(r);r.unbind();return}o=e-t;a=n.keypath+"."+t;u=n.keypath+"."+e;r.rebind(n.template.i,e,a,u);s[e]=r});a=this.root.get(this.keypath).length;if(i===undefined){if(this.length===a){return}i=this.length}this.length=this.fragments.length=a;e.addView(this);u={template:this.template.f,root:this.root,owner:this};if(this.template.i){u.indexRef=this.template.i}for(o=i;o<a;o+=1){if(f=s[o]){this.docFrag.appendChild(f.detach(false))}else{this.fragmentsToCreate.push(o)}this.fragments[o]=f}l=r.findNextNode(this);this.parentFragment.getNode().insertBefore(this.docFrag,l)}}(_,o);var wr=function Is(){var e;e=this.docFrag=document.createDocumentFragment();this.update();this.rendered=true;return e};var Er=function(e,t,n,r,i){var o;var a;i.push(function(){a=i.Fragment});o=function p(e){var t=this;var n,i;if(this.updating){return}this.updating=true;if(n=this.root.viewmodel.wrapped[this.keypath]){e=n.get()}if(this.fragmentsToCreate.length){i={template:this.template.f,root:this.root,pElement:this.pElement,owner:this,indexRef:this.template.i};this.fragmentsToCreate.forEach(function(e){var n;i.context=t.keypath+"."+e;i.index=e;n=new a(i);t.fragmentsToRender.push(t.fragments[e]=n)});this.fragmentsToCreate.length=0}else if(s(this,e)){this.bubble();if(this.rendered){r.addView(this)}}this.value=e;this.updating=false};function s(r,i){var o={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.subtype){switch(r.subtype){case e.SECTION_IF:return c(r,i,false,o);case e.SECTION_UNLESS:return c(r,i,true,o);case e.SECTION_WITH:return l(r,o);case e.SECTION_EACH:if(n(i)){return f(r,i,o)}}}r.ordered=!!t(i);if(r.ordered){return u(r,i,o)}if(n(i)||typeof i==="function"){if(r.template.i){return f(r,i,o)}return l(r,o)}return c(r,i,false,o)}function u(e,t,n){var r,i,o;i=t.length;if(i===e.length){return false}if(i<e.length){e.fragmentsToUnrender=e.fragments.splice(i,e.length-i);e.fragmentsToUnrender.forEach(h)}else{if(i>e.length){for(r=e.length;r<i;r+=1){n.context=e.keypath+"."+r;n.index=r;if(e.template.i){n.indexRef=e.template.i}o=new a(n);e.fragmentsToRender.push(e.fragments[r]=o)}}}e.length=i;return true}function f(e,t,n){var r,i,o,s,u;o=e.hasKey||(e.hasKey={});i=e.fragments.length;while(i--){s=e.fragments[i];if(!(s.index in t)){u=true;s.unbind();e.fragmentsToUnrender.push(s);e.fragments.splice(i,1);o[s.index]=false}}for(r in t){if(!o[r]){u=true;n.context=e.keypath+"."+r;n.index=r;if(e.template.i){n.indexRef=e.template.i}s=new a(n);e.fragmentsToRender.push(s);e.fragments.push(s);o[r]=true}}e.length=e.fragments.length;return u}function l(e,t){var n;if(!e.length){t.context=e.keypath;t.index=0;n=new a(t);e.fragmentsToRender.push(e.fragments[0]=n);e.length=1;return true}}function c(e,n,r,i){var o,s,u;s=t(n)&&n.length===0;if(r){o=s||!n}else{o=n&&!s}if(o){if(!e.length){i.index=0;u=new a(i);e.fragmentsToRender.push(e.fragments[0]=u);e.length=1;return true}if(e.length>1){e.fragmentsToUnrender=e.fragments.splice(1);e.fragmentsToUnrender.forEach(h);return true}}else if(e.length){e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length).filter(d);e.fragmentsToUnrender.forEach(h);e.length=e.fragmentsToRender.length=0;return true}}function h(e){e.unbind()}function d(e){return e.rendered}return o}(z,s,u,_,o);var _r=function(e,t){var n;var r;t.push(function(){r=t.Fragment});n=function s(t){var n=this,r,s,u,f,l;if(this.unbound){return}r=t.balance;if(!r){return}e.addView(n);s=t.rangeStart;n.length+=r;if(r<0){n.fragmentsToUnrender=n.fragments.splice(s,-r);n.fragmentsToUnrender.forEach(i);a(n,s,n.length,r);return}u=s+t.removed;f=s+t.added;l=[u,0];l.length+=r;n.fragments.splice.apply(n.fragments,l);a(n,f,n.length,r);n.fragmentsToCreate=o(u,f)};function i(e){e.unbind()}function o(e,t){var n=[],r;for(r=e;r<t;r+=1){n.push(r)}return n}function a(e,t,n,r){var i,o,a,s,u;a=e.template.i;for(i=t;i<n;i+=1){o=e.fragments[i];s=e.keypath+"."+(i-r);u=e.keypath+"."+i;o.index=i;o.rebind(a,i,s,u)}}return n}(_,o);var xr=function Ms(e){var t,n,r;t="";n=0;r=this.length;for(n=0;n<r;n+=1){t+=this.fragments[n].toString(e)}return t};var kr=function(e){var t;t=function r(){this.fragments.forEach(n);e.call(this);this.length=0;this.unbound=true};function n(e){e.unbind()}return t}(Kn);var Sr=function(){var e;e=function r(e){this.fragments.forEach(e?t:n)};function t(e){e.unrender(true)}function n(e){e.unrender(false)}return e}();var Or=function Ps(){var e,t,n,r,i;while(e=this.fragmentsToUnrender.pop()){e.unrender(true)}if(!this.fragmentsToRender.length){return}if(this.rendered){i=this.parentFragment.getNode()}while(e=this.fragmentsToRender.shift()){t=e.render();this.docFrag.appendChild(t);if(this.rendered&&this.ordered){n=this.fragments[e.index+1];if(n&&n.rendered){i.insertBefore(this.docFrag,n.firstNode()||null)}}}if(this.rendered&&this.docFrag.childNodes.length){r=this.parentFragment.findNextNode(this);i.insertBefore(this.docFrag,r)}};var Tr=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g,m){var y=function(n){this.type=e.SECTION;this.subtype=n.template.n;this.inverted=this.subtype===e.SECTION_UNLESS;this.pElement=n.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];this.length=0;t.init(this,n)};y.prototype={bubble:n,detach:r,find:i,findAll:o,findAllComponents:a,findComponent:s,findNextNode:u,firstNode:f,getValue:t.getValue,merge:l,rebind:t.rebind,render:c,resolve:t.resolve,setValue:h,splice:d,toString:p,unbind:v,unrender:g,update:m};return y}(z,fr,cr,hr,dr,pr,vr,gr,mr,yr,br,wr,Er,_r,xr,kr,Sr,Or);var Ar=function Ds(){var e,t;if(this.docFrag){e=this.nodes.length;for(t=0;t<e;t+=1){this.docFrag.appendChild(this.nodes[t])}return this.docFrag}};var Nr=function(e){return function t(n){var r,i,o,a;i=this.nodes.length;for(r=0;r<i;r+=1){o=this.nodes[r];if(o.nodeType!==1){continue}if(e(o,n)){return o}if(a=o.querySelector(n)){return a}}return null}}(Zt);var Lr=function(e){return function t(n,r){var i,o,a,s,u,f;o=this.nodes.length;for(i=0;i<o;i+=1){a=this.nodes[i];if(a.nodeType!==1){continue}if(e(a,n)){r.push(a)}if(s=a.querySelectorAll(n)){u=s.length;for(f=0;f<u;f+=1){r.push(s[f])}}}}}(Zt);var Rr=function Fs(){if(this.rendered&&this.nodes[0]){return this.nodes[0]}return this.parentFragment.findNextNode(this)};var Cr=function(e,t){var n;var r={},i,o;try{t("table").innerHTML="foo"}catch(a){i=true;o={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}n=function(t,n,r){var a,u=[],f,l,c,h;if(t!=null&&t!==""){if(i&&(f=o[n.tagName])){a=s("DIV");a.innerHTML=f[0]+t+f[1];a=a.querySelector(".x");if(a.tagName==="SELECT"){l=a.options[a.selectedIndex]}}else if(n.namespaceURI===e.svg){a=s("DIV");a.innerHTML='<svg class="x">'+t+"</svg>";a=a.querySelector(".x")}else{a=s(n.tagName);a.innerHTML=t}while(c=a.firstChild){u.push(c);r.appendChild(c)}if(i&&n.tagName==="SELECT"){h=u.length;while(h--){if(u[h]!==l){u[h].selected=false}}}}return u};function s(e){return r[e]||(r[e]=t(e))}return n}(O,T);var jr=function Bs(e){var t=[],n=e.length;while(n--){t[n]=e[n]}return t};var Ir=function(e){var t;t=function r(t){var r,i,o;if(!t||t.name!=="select"||!t.binding){return}r=e(t.node.options).filter(n);if(t.getAttribute("multiple")){o=r.map(function(e){return e.value})}else if(i=r[0]){o=i.value}if(o!==undefined){t.binding.setValue(o)}t.bubble()};function n(e){return e.selected}return t}(jr);var Mr=function(e,t){return function n(){if(this.rendered){throw new Error("Attempted to render an item that was already rendered")}this.docFrag=document.createDocumentFragment();this.nodes=e(this.value,this.parentFragment.getNode(),this.docFrag);t(this.pElement);this.rendered=true;return this.docFrag}}(Cr,Ir);var Pr=function(e){return function t(n){var r;if(r=this.root.viewmodel.wrapped[this.keypath]){n=r.get()}if(n!==this.value){this.value=n;this.parentFragment.bubble();if(this.rendered){e.addView(this)}}}}(_);var Dr=function(e){return function t(){return this.value!=undefined?e(""+this.value):""}}(Nt);var Fr=function(e){return function t(n){if(this.rendered&&n){this.nodes.forEach(e);this.rendered=false}}}(Hn);var Br=function(e,t){return function n(){var n,r;if(!this.rendered){return}while(this.nodes&&this.nodes.length){n=this.nodes.pop();n.parentNode.removeChild(n)}r=this.parentFragment.getNode();this.nodes=e(this.value,r,this.docFrag);r.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));t(this.pElement)}}(Cr,Ir);var Ur=function(e,t,n,r,i,o,a,s,u,f,l,c){var h=function(n){this.type=e.TRIPLE;t.init(this,n)};h.prototype={detach:n,find:r,findAll:i,firstNode:o,getValue:t.getValue,rebind:t.rebind,render:a,resolve:t.resolve,setValue:s,toString:u,unbind:c,unrender:f,update:l};return h}(z,fr,Ar,Nr,Lr,Rr,Mr,Pr,Dr,Fr,Br,Kn);var Wr=function(){this.parentFragment.bubble()};var qr=function Us(){var e=this.node,t;if(e){if(t=e.parentNode){t.removeChild(e)}return e}};var Vr=function(e){return function(t){if(e(this.node,t)){return this.node}if(this.fragment&&this.fragment.find){return this.fragment.find(t)}}}(Zt);var zr=function(e,t){if(t._test(this,true)&&t.live){(this.liveQueries||(this.liveQueries=[])).push(t)}if(this.fragment){this.fragment.findAll(e,t)}};var Hr=function(e,t){if(this.fragment){this.fragment.findAllComponents(e,t)}};var Gr=function(e){if(this.fragment){return this.fragment.findComponent(e)}};var $r=function Ws(){return null};var Kr=function qs(){return this.node};var Jr=function Vs(e){if(!this.attributes||!this.attributes[e]){return}return this.attributes[e].value};var Yr=function(){var e,t,n,r;e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ");t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ");n=function(e){var t={},n=e.length;while(n--){t[e[n].toLowerCase()]=e[n]}return t};r=n(e.concat(t));return function(e){var t=e.toLowerCase();return r[t]||t}}();var Qr=function(e){return function t(){var t=this.fragment.getValue();if(t!==this.value){if(this.name==="id"&&this.value){delete this.root.nodes[this.value]}this.value=t;if(this.name==="value"&&this.node){this.node._ractive.value=t}if(this.rendered){e.addView(this)}}}}(_);var Xr=function(){var e=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;return e}();var Zr=function(e,t){return function(n,r){var i,o;i=r.indexOf(":");if(i!==-1){o=r.substr(0,i);if(o!=="xmlns"){r=r.substring(i+1);n.name=t(r);n.namespace=e[o.toLowerCase()];if(!n.namespace){throw'Unknown namespace ("'+o+'")'}return}}n.name=n.element.namespace!==e.html?t(r):r}}(O,Yr);var ei=function(e){return function t(n){var r=n.fragment.items;if(r.length!==1){return}if(r[0].type===e.INTERPOLATOR){return r[0]}}}(z);var ti=function(e,t){var n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r,i){var o;if(r.pNode&&!r.namespace&&(!i.pNode.namespaceURI||i.pNode.namespaceURI===e.html)){o=n[r.name]||r.name;if(i.pNode[o]!==undefined){r.propertyName=o}if(t.test(o)||o==="value"){r.useProperty=true}}}}(O,Xr);var ni=function(e,t,n,r,i,o){var a;o.push(function(){a=o.Fragment});return function s(o){this.type=e.ATTRIBUTE;this.element=o.element;this.root=o.root;n(this,o.name);if(!o.value||typeof o.value==="string"){this.value=t.test(this.name)?true:o.value||"";return}this.parentFragment=this.element.parentFragment;this.fragment=new a({template:o.value,root:this.root,owner:this});this.value=this.fragment.getValue();this.interpolator=r(this);this.isBindable=!!this.interpolator&&!this.interpolator.isStatic;i(this,o);this.ready=true}}(z,Xr,Zr,ei,ti,o);var ri=function zs(e,t,n,r){if(this.fragment){this.fragment.rebind(e,t,n,r)}};var ii=function(e,t){var n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function r(i){var o;this.node=i;if(!i.namespaceURI||i.namespaceURI===e.html){o=n[this.name]||this.name;if(i[o]!==undefined){this.propertyName=o}if(t.test(o)||o==="value"){this.useProperty=true}if(o==="value"){this.useProperty=true;i._ractive.value=this.value}}this.rendered=true;this.update()}}(O,Xr);var oi=function(e){var t;t=function r(){var t=(o=this).name,r=o.value,i=o.interpolator,o=o.fragment;if(t==="value"&&(this.element.name==="select"||this.element.name==="textarea")){return}if(t==="value"&&this.element.getAttribute("contenteditable")!==undefined){return}if(t==="name"&&this.element.name==="input"&&i){return"name={{"+(i.keypath||i.ref)+"}}"}if(e.test(t)){return r?t:""}if(o){r=o.toString()}return r?t+'="'+n(r)+'"':t};function n(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return t}(Xr);var ai=function Hs(){if(this.fragment){this.fragment.unbind()}};var si=function Gs(){var e=this.value,t,n,r,i;if(!this.locked){this.node._ractive.value=e;t=this.node.options;i=t.length;while(i--){n=t[i];r=n._ractive?n._ractive.value:n.value;if(r==e){n.selected=true;break}}}};var ui=function $s(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]==t){return true}}return false};var fi=function(e,t){return function n(){var n=this.value,r,i,o,a;if(!t(n)){n=[n]}r=this.node.options;i=r.length;while(i--){o=r[i];a=o._ractive?o._ractive.value:o.value;o.selected=e(n,a)}}}(ui,s);var li=function Ks(){var e=(t=this).node,t=t.value;e.checked=t==e._ractive.value};var ci=function(e){return function t(){var t,n=this.node,r,i,o;t=n.checked;n.value=this.element.getAttribute("value");n.checked=this.element.getAttribute("value")===this.element.getAttribute("name");if(t&&!n.checked&&this.element.binding){i=this.element.binding.siblings;if(o=i.length){while(o--){r=i[o];if(!r.element.node){return}if(r.element.node.checked){e.addViewmodel(r.root.viewmodel);return r.handleChange()}}e.addViewmodel(r.root.viewmodel);this.root.viewmodel.set(r.keypath,undefined)}}}}(_);var hi=function(e){return function t(){var t,n;t=this.node;n=this.value;if(!e(n)){t.checked=n==t._ractive.value}else{t.checked=n.indexOf(t._ractive.value)!==-1}}}(s);var di=function Js(){var e,t;e=this.node;t=this.value;if(t===undefined){t=""}e.className=t};var pi=function Ys(){var e,t;e=this.node;t=this.value;if(t!==undefined){this.root.nodes[t]=undefined}this.root.nodes[t]=e;e.id=t};var vi=function Qs(){var e,t;e=this.node;t=this.value;if(t===undefined){t=""}e.style.setAttribute("cssText",t)};var gi=function Xs(){var e=this.value;if(e===undefined){e=""}if(!this.locked){this.node.innerHTML=e}};var mi=function Zs(){var e=(t=this).node,t=t.value;e._ractive.value=t;if(!this.locked){e.value=t==undefined?"":t}};var yi=function eu(){if(!this.locked){this.node[this.propertyName]=this.value}};var bi=function(e){return function t(){var t=(o=this).node,n=o.namespace,r=o.name,i=o.value,o=o.fragment;if(n){t.setAttributeNS(n,r,(o||i).toString())}else if(!e.test(r)){t.setAttribute(r,(o||i).toString())}else{if(i){t.setAttribute(r,"")}else{t.removeAttribute(r)}}}}(Xr);var wi=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d){return function p(){var p=(g=this).name,v=g.element,g=g.node,m,y;if(p==="id"){y=u}else if(p==="value"){if(v.name==="select"&&p==="value"){y=v.getAttribute("multiple")?r:n}else if(v.name==="textarea"){y=c}else if(v.getAttribute("contenteditable")!=null){y=l}else if(v.name==="input"){m=v.getAttribute("type");if(m==="file"){y=t}else if(m==="radio"&&v.binding&&v.binding.name==="name"){y=o}else{y=c}}}else if(this.twoway&&p==="name"){if(g.type==="radio"){y=i}else if(g.type==="checkbox"){y=a}}else if(p==="style"&&g.style.setAttribute){y=f}else if(p==="class"&&(!g.namespaceURI||g.namespaceURI===e.html)){y=s}else if(this.useProperty){y=h}if(!y){y=d}this.update=y;this.update()}}(O,zt,si,fi,li,ci,hi,di,pi,vi,gi,mi,yi,bi);var Ei=function(e,t,n,r,i,o,a){var s=function(e){this.init(e)};s.prototype={bubble:e,init:t,rebind:n,render:r,toString:i,unbind:o,update:a};return s}(Qr,ni,ri,ii,oi,ai,wi);var _i=function(e){return function(t,n){var r,i,o=[];for(r in n){if(n.hasOwnProperty(r)){i=new e({element:t,name:r,value:n[r],root:t.root});o.push(o[r]=i)}}return o}}(Ei);var xi=function(e){var t=Array.prototype.slice;var n=t.call(arguments,1);var r,i;while(i=n.shift()){for(r in i){if(i.hasOwnProperty(r)){e[r]=i[r]}}}return e};var ki=function(e,t,n,r,i){var o=function(e){var n,r,i;this.element=e;this.root=e.root;this.attribute=e.attributes[this.name||"value"];n=this.attribute.interpolator;n.twowayBinding=this;if(n.keypath&&n.keypath.substr==="${"){t("Two-way binding does not work with expressions: "+n.keypath);return false}if(!n.keypath){if(n.ref){n.resolve(n.ref)}if(n.resolver){n.resolver.forceResolution()}}this.keypath=r=n.keypath;if(this.root.viewmodel.get(r)===undefined&&this.getInitialValue){i=this.getInitialValue();if(i!==undefined){this.root.viewmodel.set(r,i)}}};o.prototype={handleChange:function(){var t=this;e.start(this.root);this.attribute.locked=true;this.root.viewmodel.set(this.keypath,this.getValue());e.scheduleTask(function(){return t.attribute.locked=false});e.end()},rebound:function(){var e,t,n;t=this.keypath;n=this.attribute.interpolator.keypath;if(t===n){return}i(this.root._twowayBindings[t],this);this.keypath=n;e=this.root._twowayBindings[n]||(this.root._twowayBindings[n]=[]);e.push(this)},unbind:function(){}};o.extend=function(e){var t=this,i;i=function(e){o.call(this,e);if(this.init){this.init()}};i.prototype=n(t.prototype);r(i.prototype,e);i.extend=o.extend;return i};return o}(_,F,H,xi,p);var Si=function tu(){this._ractive.binding.handleChange()};var Oi=function(e,t){var n=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var e=this.element.node;e.addEventListener("change",t,false);if(!this.root.lazy){e.addEventListener("input",t,false);if(e.attachEvent){e.addEventListener("keyup",t,false)}}},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,false);e.removeEventListener("input",t,false);e.removeEventListener("keyup",t,false)},getValue:function(){return this.element.node.innerHTML}});return n}(ki,Si);var Ti=function(){var e={};return function t(n,r,i){var o=n+r+i;return e[o]||(e[o]=[])}}();var Ai=function(e,t,n,r,i){var o=n.extend({name:"checked",init:function(){this.siblings=r(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var e=this.element.node;e.addEventListener("change",i,false);if(e.attachEvent){e.addEventListener("click",i,false)}},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,false);e.removeEventListener("click",i,false)},handleChange:function(){e.start(this.root);this.siblings.forEach(function(e){e.root.viewmodel.set(e.keypath,e.getValue())});e.end()},getValue:function(){return this.element.node.checked},unbind:function(){t(this.siblings,this)}});return o}(_,p,ki,Ti,Si);var Ni=function(e,t,n,r){var i=t.extend({name:"name",init:function(){this.siblings=r(this.root._guid,"radioname",this.keypath);
this.siblings.push(this);this.radioName=true;this.attribute.twoway=true},getInitialValue:function(){if(this.element.getAttribute("checked")){return this.element.getAttribute("value")}},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}";e.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");e.addEventListener("change",n,false);if(e.attachEvent){e.addEventListener("click",n,false)}},unrender:function(){var e=this.element.node;e.removeEventListener("change",n,false);e.removeEventListener("click",n,false)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){if(this.element.node.checked){t.prototype.handleChange.call(this)}},rebound:function(e,n,r,i){var o;t.prototype.rebound.call(this,e,n,r,i);if(o=this.element.node){o.name="{{"+this.keypath+"}}"}},unbind:function(){e(this.siblings,this)}});return i}(p,ki,Si,Ti);var Li=function(e,t,n,r,i){var o=n.extend({name:"name",getInitialValue:function(){this.noInitialValue=true;return[]},init:function(){var t,n,i;this.checkboxName=true;this.siblings=r(this.root._guid,"checkboxes",this.keypath);this.siblings.push(this);if(this.noInitialValue){this.siblings.noInitialValue=true}i=this.siblings.noInitialValue;t=this.root.viewmodel.get(this.keypath);n=this.element.getAttribute("value");if(i){this.isChecked=this.element.getAttribute("checked");if(this.isChecked){t.push(n)}}else{this.isChecked=e(t)?t.indexOf(n)!==-1:t===n}},unbind:function(){t(this.siblings,this)},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}";e.checked=this.isChecked;e.addEventListener("change",i,false);if(e.attachEvent){e.addEventListener("click",i,false)}},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,false);e.removeEventListener("click",i,false)},changed:function(){var e=!!this.isChecked;this.isChecked=this.element.node.checked;return this.isChecked===e},handleChange:function(){this.isChecked=this.element.node.checked;n.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(a).map(s)}});function a(e){return e.isChecked}function s(e){return e.element.getAttribute("value")}return o}(s,p,ki,Ti,Si);var Ri=function(e,t){var n=e.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",t,false);if(e.attachEvent){e.addEventListener("click",t,false)}},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,false);e.removeEventListener("click",t,false)},getValue:function(){return this.element.node.checked}});return n}(ki,Si);var Ci=function(e,t,n){var r=t.extend({getInitialValue:function(){var e=this.element.options,t,n,r,i;if(this.element.getAttribute("value")!==undefined){return}n=t=e.length;if(!t){return}while(n--){if(e[n].getAttribute("selected")){r=e[n].getAttribute("value");i=true;break}}if(!i){while(++n<t){if(!e[n].getAttribute("disabled")){r=e[n].getAttribute("value");break}}}if(r!==undefined){this.element.attributes.value.value=r}return r},render:function(){this.element.node.addEventListener("change",n,false)},unrender:function(){this.element.node.removeEventListener("change",n,false)},setValue:function(t){e.addViewmodel(this.root.viewmodel);this.root.viewmodel.set(this.keypath,t)},getValue:function(){var e,t,n,r,i;e=this.element.node.options;n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected){i=r._ractive?r._ractive.value:r.value;return i}}},forceUpdate:function(){var t=this;var n=this.getValue();if(n!==undefined){this.attribute.locked=true;e.addViewmodel(this.root.viewmodel);e.scheduleTask(function(){return t.attribute.locked=false});this.root.viewmodel.set(this.keypath,n)}}});return r}(_,ki,Si);var ji=function(e){return function(t,n){var r;if(!e(t)||!e(n)){return false}if(t.length!==n.length){return false}r=t.length;while(r--){if(t[r]!==n[r]){return false}}return true}}(s);var Ii=function(e,t,n,r){var i=n.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",r,false);e=this.root.viewmodel.get(this.keypath);if(e===undefined){this.handleChange()}},unrender:function(){this.element.node.removeEventListener("change",r,false)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,r,i,o;e=[];t=this.element.node.options;r=t.length;for(n=0;n<r;n+=1){i=t[n];if(i.selected){o=i._ractive?i._ractive.value:i.value;e.push(o)}}return e},handleChange:function(){var e,r,i;e=this.attribute;r=e.value;i=this.getValue();if(r===undefined||!t(i,r)){n.prototype.handleChange.call(this)}return this},forceUpdate:function(){var t=this;var n=this.getValue();if(n!==undefined){this.attribute.locked=true;e.addViewmodel(this.root.viewmodel);e.scheduleTask(function(){return t.attribute.locked=false});this.root.viewmodel.set(this.keypath,n)}},updateModel:function(){if(this.attribute.value===undefined||!this.attribute.value.length){this.root.viewmodel.set(this.keypath,this.initialValue)}}});return i}(_,ji,Ci,Si);var Mi=function(e,t){var n=e.extend({render:function(){this.element.node.addEventListener("change",t,false)},unrender:function(){this.element.node.removeEventListener("change",t,false)},getValue:function(){return this.element.node.files}});return n}(ki,Si);var Pi=function(e,t){var n;var r,i;i={evaluateWrapped:true};r=e.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var e=this.element.node;e.addEventListener("change",t,false);if(!this.root.lazy){e.addEventListener("input",t,false);if(e.attachEvent){e.addEventListener("keyup",t,false)}}e.addEventListener("blur",o,false)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,false);e.removeEventListener("input",t,false);e.removeEventListener("keyup",t,false);e.removeEventListener("blur",o,false)}});n=r;function o(){var e;t.call(this);e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,i);this.value=e==undefined?"":e}return n}(ki,Si);var Di=function(e){return e.extend({getInitialValue:function(){return undefined},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?undefined:e}})}(Pi);var Fi=function(e,t,n,r,i,o,a,s,u,f,l){var c;c=function d(c){var d=c.attributes,p,v,g,m;if(c.binding){c.binding.teardown();c.binding=null}if(c.getAttribute("contenteditable")&&h(d.value)){v=t}else if(c.name==="input"){p=c.getAttribute("type");if(p==="radio"||p==="checkbox"){g=h(d.name);m=h(d.checked);if(g&&m){e.error({message:"badRadioInputBinding"})}if(g){v=p==="radio"?r:i}else if(m){v=p==="radio"?n:o}}else if(p==="file"&&h(d.value)){v=u}else if(h(d.value)){v=p==="number"||p==="range"?f:l}}else if(c.name==="select"&&h(d.value)){v=c.getAttribute("multiple")?s:a}else if(c.name==="textarea"&&h(d.value)){v=l}if(v){return new v(c)}};function h(e){return e&&e.isBindable}return c}(Zn,Oi,Ai,Ni,Li,Ri,Ci,Ii,Mi,Di,Pi);var Bi=function nu(){var e=this.getAction();if(e&&!this.hasListener){this.listen()}else if(!e&&this.hasListener){this.unrender()}};var Ui=function(e){return function t(n){e(this.root,this.getAction(),{event:n})}}(d);var Wi=function ru(){return this.action.toString().trim()};var qi=function(e,t,n,r,i,o,a){var s;var u,f={args:true},l=/^event(?:\.(.+))?/;i.push(function(){u=i.Fragment});s=function p(i,o,s){var f=this,p,v,g,m,y;f.element=i;f.root=i.root;f.name=o;if(o.indexOf("*")!==-1){a.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:i.tagName,event:o}});this.invalid=true}if(s.m){f.method=s.m;f.args=v=[];f.unresolved=[];f.refs=s.a.r;f.fn=t(s.a.s,f.refs.length);y=i.parentFragment;g=y.indexRefs;m=f.root;s.a.r.forEach(function(t,i){var o,a,s,u;if(g&&(o=g[t])!==undefined){v[i]={indexRef:t,value:o};return}if(s=l.exec(t)){v[i]={eventObject:true,refinements:s[1]?s[1].split("."):[]};return}if(a=n(m,t,y)){v[i]={keypath:a};return}v[i]=null;u=new r(m,t,y,function(t){f.resolve(i,t);e(f.unresolved,u)});f.unresolved.push(u)});this.fire=c}else{p=s.n||s;if(typeof p!=="string"){p=new u({template:p,root:this.root,owner:this})}this.action=p;if(s.d){this.dynamicParams=new u({template:s.d,root:this.root,owner:this.element});this.fire=d}else if(s.a){this.params=s.a;this.fire=h}}};function c(e){var t,n,r;t=this.root;if(typeof t[this.method]!=="function"){throw new Error('Attempted to call a non-existent method ("'+this.method+'")')}n=this.args.map(function(n){var r,i,o;if(!n){return undefined}if(n.indexRef){return n.value}if(n.eventObject){r=e;if(i=n.refinements.length){for(o=0;o<i;o+=1){r=r[n.refinements[o]]}}}else{r=t.get(n.keypath)}return r});r=this.fn.apply(null,n);t[this.method].apply(t,r)}function h(e){o(this.root,this.getAction(),{event:e,args:this.params})}function d(e){var t=this.dynamicParams.getValue(f);if(typeof t==="string"){t=t.substr(1,t.length-2)}o(this.root,this.getAction(),{event:e,args:t})}return s}(p,er,w,Yn,o,d,Zn);var Vi=function iu(e){var t,n;t=this._ractive;n=t.events[e.type];n.fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})};var zi=function(e,t,n){var r;var i={};r=function a(){var r,i=this.name;if(this.invalid){return}if(r=e.registries.events.find(this.root,i)){this.custom=r(this.node,o(i))}else{if(!("on"+i in this.node)&&!(window&&"on"+i in window)){n.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:i}})}this.node.addEventListener(i,t,false)}this.hasListener=true};function o(e){if(!i[e]){i[e]=function(t){var n=t.node._ractive;t.index=n.index;t.keypath=n.keypath;t.context=n.root.get(n.keypath);n.events[e].fire(t)}}return i[e]}return r}($t,Vi,Zn);var Hi=function(e){return function t(n,r,i,o){if(this.method){this.args.forEach(function(t){if(t.indexRef&&t.indexRef===n){t.value=r}if(t.keypath&&(o=e(t.keypath,i,o))){t.keypath=o}});return}if(typeof this.action!=="string"){this.action.rebind(n,r,i,o)}if(this.dynamicParams){this.dynamicParams.rebind(n,r,i,o)}}}(Xn);var Gi=function ou(){this.node=this.element.node;this.node._ractive.events[this.name]=this;if(this.method||this.getAction()){this.listen()}};var $i=function au(e,t){this.args[e]={keypath:t}};var Ki=function(){var e;e=function n(){if(this.method){this.unresolved.forEach(t);return}if(typeof this.action!=="string"){this.action.unbind()}if(this.dynamicParams){this.dynamicParams.unbind()}};function t(e){e.teardown()}return e}();var Ji=function(e){return function t(){if(this.custom){this.custom.teardown()}else{this.node.removeEventListener(this.name,e,false)}this.hasListener=false}}(Vi);var Yi=function(e,t,n,r,i,o,a,s,u,f){var l=function(e,t,n){this.init(e,t,n)};l.prototype={bubble:e,fire:t,getAction:n,init:r,listen:i,rebind:o,render:a,resolve:s,unbind:u,unrender:f};return l}(Bi,Ui,Wi,qi,zi,Hi,Gi,$i,Ki,Ji);var Qi=function(e){return function(t,n){var r,i,o,a,s=[];for(i in n){if(n.hasOwnProperty(i)){o=i.split("-");r=o.length;while(r--){a=new e(t,o[r],n[i]);s.push(a)}}}return s}}(Yi);var Xi=function(e,t,n){var r,i,o;t.push(function(){r=t.Fragment});i={args:true};o=function(t,o){var a=this,s,u,f;a.element=t;a.root=s=t.root;u=o.n||o;if(typeof u!=="string"){f=new r({template:u,root:s,owner:t});u=f.toString();f.unbind()}if(o.a){a.params=o.a}else if(o.d){a.fragment=new r({template:o.d,root:s,owner:t});a.params=a.fragment.getValue(i);a.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=true;a.params=this.getValue(i);if(a.ready){a.update()}}}a.fn=n.registries.decorators.find(s,u);if(!a.fn){e.error({debug:s.debug,message:"missingPlugin",args:{plugin:"decorator",name:u}})}};o.prototype={init:function(){var e=this,t,n,r;t=e.element.node;if(e.params){r=[t].concat(e.params);n=e.fn.apply(e.root,r)}else{n=e.fn.call(e.root,t)}if(!n||!n.teardown){throw new Error("Decorator definition must return an object with a teardown method")}e.actual=n;e.ready=true},update:function(){if(this.actual.update){this.actual.update.apply(this.root,this.params)}else{this.actual.teardown(true);this.init()}},rebind:function(e,t,n,r){if(this.fragment){this.fragment.rebind(e,t,n,r)}},teardown:function(e){this.actual.teardown();if(!e&&this.fragment){this.fragment.unbind()}}};return o}(Zn,o,$t);var Zi=function(e){var t;t=function r(t){var r,i,o,a,s;r=t.node;if(!r){return}a=e(r.options);i=t.getAttribute("value");o=t.getAttribute("multiple");if(i!==undefined){a.forEach(function(e){var t,r;t=e._ractive?e._ractive.value:e.value;r=o?n(i,t):i==t;if(r){s=true}e.selected=r});if(!s){if(a[0]){a[0].selected=true}if(t.binding){t.binding.forceUpdate()}}}else if(t.binding){t.binding.forceUpdate()}};function n(e,t){var n=e.length;while(n--){if(e[n]==t){return true}}}return t}(jr);var eo=function(e,t){return function n(){var n=this;if(!this.dirty){this.dirty=true;e.scheduleTask(function(){t(n);n.dirty=false})}this.parentFragment.bubble()}}(_,Zi);var to=function su(e){do{if(e.name==="select"){return e}}while(e=e.parent)};var no=function(e){return function t(n,r){n.select=e(n.parent);if(!n.select){return}n.select.options.push(n);if(!r.a){r.a={}}if(!r.a.value&&!r.a.hasOwnProperty("disabled")){r.a.value=r.f}if("selected"in r.a&&n.select.getAttribute("value")!==undefined){delete r.a.selected}}}(to);var ro=function(e,t,n,r,i,o,a,s,u){var f;u.push(function(){f=u.Fragment});return function l(u){var l,c,h,d,p;this.type=e.ELEMENT;l=this.parentFragment=u.parentFragment;c=this.template=u.template;this.parent=u.pElement||l.pElement;this.root=h=l.root;this.index=u.index;this.name=t(c.e);if(this.name==="option"){s(this,c)}if(this.name==="select"){this.options=[];this.bubble=a}this.attributes=n(this,c.a);if(c.f){this.fragment=new f({template:c.f,root:h,owner:this,pElement:this})}if(h.twoway&&(d=r(this,c.a))){this.binding=d;p=this.root._twowayBindings[d.keypath]||(this.root._twowayBindings[d.keypath]=[]);p.push(d)}if(c.v){this.eventHandlers=i(this,c.v)}if(c.o){this.decorator=new o(this,c.o)}this.intro=c.t0||c.t1;this.outro=c.t0||c.t2}}(z,Yr,_i,Fi,Qi,Xi,eo,no,o);var io=function(e){return function t(n,r){return n===r||e(n,r)}}(Qn);var oo=function(e,t){return function n(r,i,o,a){var s=r[i];if(!s||e(s,a)||!e(s,o)){return}r[i]=t(s,o,a)}}(io,Xn);var ao=function(e){return function t(n,r,i,o){var a,s,u,f;if(this.attributes){this.attributes.forEach(l)}if(this.eventHandlers){this.eventHandlers.forEach(l)}if(this.decorator){l(this.decorator)}if(this.fragment){l(this.fragment)}if(u=this.liveQueries){f=this.root;a=u.length;while(a--){u[a]._makeDirty()}}if(this.node&&(s=this.node._ractive)){e(s,"keypath",i,o);if(n!=undefined){s.index[n]=r}}function l(e){e.rebind(n,r,i,o)}}}(oo);var so=function uu(e){var t;if(e.attributes.width||e.attributes.height){e.node.addEventListener("load",t=function(){var n=e.getAttribute("width"),r=e.getAttribute("height");if(n!==undefined){e.node.setAttribute("width",n)}if(r!==undefined){e.node.setAttribute("height",r)}e.node.removeEventListener("load",t,false)},false)}};var uo=function(e,t,n){var r,i={};n.push(function(){r=n.Fragment});return function o(n,a,s){var u=this,f,l,c;u.element=n;u.root=f=n.root;u.isIntro=s;l=a.n||a;if(typeof l!=="string"){c=new r({template:l,root:f,owner:n});l=c.toString();c.unbind()}u.name=l;if(a.a){u.params=a.a}else if(a.d){c=new r({template:a.d,root:f,owner:n});u.params=c.getValue(i);c.unbind()}u._fn=t.registries.transitions.find(f,l);if(!u._fn){e.error({debug:f.debug,message:"missingPlugin",args:{plugin:"transition",name:l}});return}}}(Zn,$t,o);var fo=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var lo=function(e,t,n,r){var i,o,a;if(!e){i=null}else{o={};a=n("div").style;i=function(e){var n,i,s;e=r(e);if(!o[e]){if(a[e]!==undefined){o[e]=e}else{s=e.charAt(0).toUpperCase()+e.substring(1);n=t.length;while(n--){i=t[n];if(a[i+s]!==undefined){o[e]=i+s;break}}}}return o[e]}}return i}(A,I,T,fo);var co=function(e,t,n,r){var i,o;if(!t){i=null}else{o=window.getComputedStyle||e.getComputedStyle;i=function(e){var t,i,a,s,u;t=o(this.node);if(typeof e==="string"){u=t[r(e)];if(u==="0px"){u=0}return u}if(!n(e)){throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties")}i={};a=e.length;while(a--){s=e[a];u=t[r(s)];if(u==="0px"){u=0}i[s]=u}return i}}return i}(Et,A,s,lo);var ho=function(e){return function(t,n){var r;if(typeof t==="string"){this.node.style[e(t)]=n}else{for(r in t){if(t.hasOwnProperty(r)){this.node.style[e(r)]=t[r]}}}return this}}(lo);var po=function(e,t,n){var r;var i=function(r){var i;this.duration=r.duration;this.step=r.step;this.complete=r.complete;if(typeof r.easing==="string"){i=r.root.easing[r.easing];if(!i){e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]');i=o}}else if(typeof r.easing==="function"){i=r.easing}else{i=o}this.easing=i;this.start=t();this.end=this.start+this.duration;this.running=true;n.add(this)};i.prototype={tick:function(e){var t,n;if(!this.running){return false}if(e>this.end){if(this.step){this.step(1)}if(this.complete){this.complete(1)}return false}t=e-this.start;n=this.easing(t/this.duration);if(this.step){this.step(n)}return true},stop:function(){if(this.abort){this.abort()}this.running=false}};r=i;function o(e){return e}return r}(F,P,D);var vo=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(I);var go=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;if(!e){return""}if(t.test(e)){e="-"+e}n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return n}}(I);var mo=function(e,t,n,r,i,o,a,s,u){var f,l,c,h,d,p,v,g,m={},y={};if(!e){f=null}else{l=n("div").style;(function(){if(l.transition!==undefined){c="transition";h="transitionend";d=true}else if(l.webkitTransition!==undefined){c="webkitTransition";h="webkitTransitionEnd";d=true}else{d=false}})();if(c){p=c+"Duration";v=c+"Property";g=c+"TimingFunction"}f=function(e,n,f,l,c){setTimeout(function(){var b,w,E,_,x;_=function(){if(w&&E){e.root.fire(e.name+":end",e.node,e.isIntro);c()}};b=(e.node.namespaceURI||"")+e.node.tagName;e.node.style[v]=l.map(a).map(u).join(",");e.node.style[g]=u(f.easing||"linear");e.node.style[p]=f.duration/1e3+"s";x=function(t){var n;n=l.indexOf(r(s(t.propertyName)));if(n!==-1){l.splice(n,1)}if(l.length){return}e.node.removeEventListener(h,x,false);E=true;_()};e.node.addEventListener(h,x,false);setTimeout(function(){var s=l.length,u,c,p,v=[],g,k;while(s--){g=l[s];u=b+g;if(d&&!y[u]){e.node.style[a(g)]=n[g];if(!m[u]){c=e.getStyle(g);m[u]=e.getStyle(g)!=n[g];y[u]=!m[u];if(y[u]){e.node.style[a(g)]=c}}}if(!d||y[u]){if(c===undefined){c=e.getStyle(g)}p=l.indexOf(g);if(p===-1){t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!")}else{l.splice(p,1)}k=/[^\d]*$/.exec(n[g])[0];v.push({name:a(g),interpolator:i(parseFloat(c),parseFloat(n[g])),suffix:k})}}if(v.length){new o({root:e.root,duration:f.duration,easing:r(f.easing||""),step:function(t){var n,r;r=v.length;while(r--){n=v[r];e.node.style[n.name]=n.interpolator(t)+n.suffix}},complete:function(){w=true;_()}})}else{w=true}if(!l.length){e.node.removeEventListener(h,x,false);E=true;_()}},0)},f.delay||0)}}return f}(A,F,T,fo,Kt,po,lo,vo,go);var yo=function(e){var t,n,r,i,o;if(typeof document!=="undefined"){t="hidden";o={};if(t in document){r=""}else{i=e.length;while(i--){n=e[i];t=n+"Hidden";if(t in document){r=n}}}if(r!==undefined){document.addEventListener(r+"visibilitychange",a);a()}else{if("onfocusout"in document){document.addEventListener("focusout",s);document.addEventListener("focusin",u)}else{window.addEventListener("pagehide",s);window.addEventListener("blur",s);window.addEventListener("pageshow",u);window.addEventListener("focus",u)}o.hidden=false}}function a(){o.hidden=document[t]}function s(){o.hidden=true}function u(){o.hidden=false}return o}(I);var bo=function(e,t,n,r,i,o,a){var s,u,f;if(!t){s=null}else{u=window.getComputedStyle||e.getComputedStyle;s=function(e,t,s,l){var c=this,h;if(a.hidden){this.setStyle(e,t);return f||(f=r.resolve())}if(typeof e==="string"){h={};h[e]=t}else{h=e;l=s;s=t}if(!s){n('The "'+c.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340');s=c;l=c.complete}var d=new r(function(e){var t,n,r,a,f,l,d;if(!s.duration){c.setStyle(h);e();return}t=Object.keys(h);n=[];r=u(c.node);f={};l=t.length;while(l--){d=t[l];a=r[i(d)];if(a==="0px"){a=0}if(a!=h[d]){n.push(d);c.node.style[i(d)]=a}}if(!n.length){e();return}o(c,h,s,n,e)});if(l){n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)");d.then(l)}return d}}return s}(Et,A,F,v,lo,mo,yo);var wo=function(e,t){var n;for(n in t){if(t.hasOwnProperty(n)&&!(n in e)){e[n]=t[n]}}return e};var Eo=function(e){return function(t,n){if(typeof t==="number"){t={duration:t}}else if(typeof t==="string"){if(t==="slow"){t={duration:600}}else if(t==="fast"){t={duration:200}}else{t={duration:400}}}else if(!t){t={}}return e(t,n)}}(wo);var _o=function(){var e;e=function n(){var e=this,n,r;n=e.node=e.element.node;r=n.getAttribute("style");e.complete=function(i){if(!i&&e.isIntro){t(n,r)}n._ractive.transition=null;e._manager.remove(e)};if(!e._fn){e.complete();return}e._fn.apply(e.root,[e].concat(e.params))};function t(e,t){if(t){e.setAttribute("style",t)}else{e.getAttribute("style");e.removeAttribute("style")}}return e}();var xo=function(e,t,n,r,i,o,a){var s,u;a.push(function(){s=a.Fragment});u=function(e,t,n){this.init(e,t,n)};u.prototype={init:e,start:o,getStyle:t,setStyle:n,animateStyle:r,processParams:i};return u}(uo,co,ho,bo,Eo,_o,o);var ko=function(e,t,n,r,i,o,a,s,u,f,l){var c;var h,d;h=function(){var e=this.node,t=this.fragment.toString(false);if(e.styleSheet){e.styleSheet.cssText=t}else{while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(t))}};d=function(){if(!this.node.type||this.node.type==="text/javascript"){n("Script tag was updated. This does not cause the code to be re-evaluated!")}this.node.text=this.fragment.toString(false)};c=function m(){var e=this;var t=this.root,n,c;n=p(this);c=this.node=i(this.name,n);if(t.constructor.css&&this.parentFragment.getNode()===t.el){this.node.setAttribute("data-rvcguid",t.constructor._guid)}o(this.node,"_ractive",{value:{proxy:this,keypath:u(this.parentFragment),index:this.parentFragment.indexRefs,events:r(null),root:t}});this.attributes.forEach(function(e){return e.render(c)});if(this.fragment){if(this.name==="script"){this.bubble=d;this.node.text=this.fragment.toString(false);this.fragment.unrender=a}else if(this.name==="style"){this.bubble=h;this.bubble();this.fragment.unrender=a}else if(this.binding&&this.getAttribute("contenteditable")){this.fragment.unrender=a}else{this.node.appendChild(this.fragment.render())}}if(this.eventHandlers){this.eventHandlers.forEach(function(e){return e.render()})}if(this.binding){this.binding.render();this.node._ractive.binding=this.binding}if(this.name==="img"){f(this)}if(this.decorator&&this.decorator.fn){s.scheduleTask(function(){e.decorator.init()})}if(t.transitionsEnabled&&this.intro){var m=new l(this,this.intro,true);s.registerTransition(m);s.scheduleTask(function(){return m.start()})}if(this.name==="option"){v(this)}if(this.node.autofocus){s.scheduleTask(function(){return e.node.focus()})}g(this);return this.node};function p(t){var n,r,i;if(r=t.getAttribute("xmlns")){n=r}else if(t.name==="svg"){n=e.svg}else if(i=t.parent){if(i.name==="foreignObject"){n=e.html}else{n=i.node.namespaceURI}}else{n=t.root.el.namespaceURI}return n}function v(e){var n,r,i;if(!e.select){return}r=e.select.getAttribute("value");if(r===undefined){return}n=e.getAttribute("value");if(e.select.node.multiple&&t(r)){i=r.length;while(i--){if(n==r[i]){e.node.selected=true;break}}}else{e.node.selected=n==r}}function g(e){var t,n,r,i,o;t=e.root;do{n=t._liveQueries;r=n.length;while(r--){i=n[r];o=n["_"+i];if(o._test(e)){(e.liveQueries||(e.liveQueries=[])).push(o)}}}while(t=t._parent)}return c}(O,s,F,H,T,N,zt,_,m,so,xo);var So=function(e,t,n){var r;r=function(){var t,r;t="<"+(this.template.y?"!DOCTYPE":this.template.e);t+=this.attributes.map(a).join("");if(this.name==="option"&&i(this)){t+=" selected"}if(this.name==="input"&&o(this)){t+=" checked"}t+=">";if(this.name==="textarea"&&this.getAttribute("value")!==undefined){t+=n(this.getAttribute("value"))}else if(this.getAttribute("contenteditable")!==undefined){t+=this.getAttribute("value")}if(this.fragment){r=this.name!=="script"&&this.name!=="style";t+=this.fragment.toString(r)}if(!e.test(this.template.e)){t+="</"+this.template.e+">"}return t};function i(e){var n,r,i;n=e.getAttribute("value");if(n===undefined||!e.select){return false}r=e.select.getAttribute("value");if(r==n){return true}if(e.select.getAttribute("multiple")&&t(r)){i=r.length;while(i--){if(r[i]==n){return true}}}}function o(e){var t,n,r,i;t=e.attributes;n=t.type;r=t.value;i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator){return}if(r.value===i.interpolator.value){return true}}function a(e){var t=e.toString();return t?" "+t:""}return r}(St,s,zn);var Oo=function(e){return function t(n){if(n.select){e(n.select.options,n)}}}(p);var To=function(e){var t;t=function r(){if(this.fragment){this.fragment.unbind()}if(this.binding){this.binding.unbind()}if(this.eventHandlers){this.eventHandlers.forEach(n)}if(this.name==="option"){e(this)}this.attributes.forEach(n)};function n(e){e.unbind()}return t}(Oo);var Ao=function(e,t){var n;n=function i(n){var i,o;if(this.name==="option"){this.detach()}else if(n){e.detachWhenReady(this)}if(this.fragment){this.fragment.unrender(false)}if(i=this.binding){this.binding.unrender();this.node._ractive.binding=null;o=this.root._twowayBindings[i.keypath];o.splice(o.indexOf(i),1)}if(this.eventHandlers){this.eventHandlers.forEach(function(e){return e.unrender()})}if(this.decorator){this.decorator.teardown()}if(this.root.transitionsEnabled&&this.outro){var a=new t(this,this.outro,false);e.registerTransition(a);e.scheduleTask(function(){return a.start()})}if(this.liveQueries){r(this)}if(this.node.id){delete this.root.nodes[this.node.id]}};function r(e){var t,n,r;r=e.liveQueries.length;while(r--){t=e.liveQueries[r];n=t.selector;t._remove(e.node)}}return n}(_,xo);var No=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p){var v=function(e){this.init(e)};v.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:o,findNextNode:a,firstNode:s,getAttribute:u,init:f,rebind:l,render:c,toString:h,unbind:d,unrender:p};return v}(Wr,qr,Vr,zr,Hr,Gr,$r,Kr,Jr,ro,ao,ko,So,To,Ao);var Lo=function(){var e;var t=/^\s*$/,n=/^\s*/;e=function(e){var n,i,o,a;n=e.split("\n");i=n[0];if(i!==undefined&&t.test(i)){n.shift()}o=n[n.length-1];if(o!==undefined&&t.test(o)){n.pop()}a=n.reduce(r,null);if(a){e=n.map(function(e){return e.replace(a,"")}).join("\n")}return e};function r(e,t){var r=n.exec(t)[0];if(e===null||r.length<e.length){return r}return e}return e}();var Ro=function(e,t,n,r){var i;i=function a(t,i){var a;if(a=o(t,i)){return a}a=n.fromId(i,{noThrow:true});if(a){a=r(a);var s=n.parse(a,n.getParseOptions(t));return t.partials[i]=s.t}e.error({debug:t.debug,message:"noTemplateForPartial",args:{name:i}});return[]};function o(r,i){var o=t.registries.partials;var a=o.findInstance(r,i);if(!a){return}var s=a.partials[i],u;if(typeof s==="function"){u=s.bind(a);u.isOwner=a.partials.hasOwnProperty(i);s=u(a.data,n)}if(!s){e.warn({debug:r.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:i}});return}if(!n.isParsed(s)){var f=n.parse(s,n.getParseOptions(a));if(f.p){e.warn({debug:r.debug,message:"noNestedPartials",args:{rname:i}})}var l=u?a:o.findOwner(a,i);l.partials[i]=s=f.t}if(u){s._fn=u}return s.v?s.t:s}return i}(Zn,$t,Ut,Lo);var Co=function(e,t){var n;if(!t){return e}n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n");return n};var jo=function(e,t,n,r,i,o,a,s){var u,f;r.push(function(){f=r.Fragment});u=function(t){var n=this.parentFragment=t.parentFragment;this.type=e.PARTIAL;this.name=t.template.r;this.index=t.index;this.root=n.root;o.init(this,t);this.update()};u.prototype={bubble:function(){this.parentFragment.bubble()},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){this.update();this.rendered=true;return this.fragment.render()},unrender:function(e){if(this.rendered){this.fragment.unrender(e);this.rendered=false}},rebind:function(e,t,n,r){return this.fragment.rebind(e,t,n,r)},unbind:function(){if(this.fragment){this.fragment.unbind()}},toString:function(t){var r,i,o,a;r=this.fragment.toString(t);i=this.parentFragment.items[this.index-1];if(!i||i.type!==e.TEXT){return r}o=i.text.split("\n").pop();if(a=/^\s+$/.exec(o)){return n(r,a[0])}return r},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},getValue:function(){return this.fragment.getValue()},resolve:o.resolve,setValue:function(e){if(this.value!==e){if(this.fragment&&this.rendered){this.fragment.unrender(true)}this.fragment=null;this.value=e;if(this.rendered){i.addView(this)}else{this.update();this.bubble()}}},update:function(){var e,n,r,i;if(!this.fragment){if(this.name&&(a.registries.partials.findInstance(this.root,this.name)||s.fromId(this.name,{noThrow:true}))){e=t(this.root,this.name)}else if(this.value){e=t(this.root,this.value)}else{e=[]}this.fragment=new f({template:e,root:this.root,owner:this,pElement:this.parentFragment.pElement});if(this.rendered){r=this.parentFragment.getNode();n=this.fragment.render();i=this.parentFragment.findNextNode(this);r.insertBefore(n,i)}}}};return u}(z,Ro,Co,o,_,fr,$t,Ut);var Io=function(e,t,n){var r;n.push(function(){r=n.Ractive});return function i(n,r){var o,a=e.registries.components.findInstance(n,r);if(a){o=a.components[r];if(!o._parent){var s=o.bind(a);s.isOwner=a.components.hasOwnProperty(r);o=s(a.data);if(!o){t.warn({debug:n.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:r}});return}if(typeof o==="string"){o=i(n,o)}o._fn=s;a.components[r]=o}}return o}}($t,Zn,o);var Mo=function fu(){return this.instance.fragment.detach()};var Po=function lu(e){return this.instance.fragment.find(e)};var Do=function cu(e,t){return this.instance.fragment.findAll(e,t)};var Fo=function hu(e,t){t._test(this,true);if(this.instance.fragment){this.instance.fragment.findAllComponents(e,t)}};var Bo=function du(e){if(!e||e===this.name){return this.instance}if(this.instance.fragment){return this.instance.fragment.findComponent(e)}return null};var Uo=function pu(){return this.parentFragment.findNextNode(this)};var Wo=function vu(){if(this.rendered){return this.instance.fragment.firstNode()}return null};var qo=function(e,t){var n,r;t.push(function(){n=t.Fragment});r=function(e,t,r){this.parentFragment=e.parentFragment;this.component=e;this.key=t;this.fragment=new n({template:r,root:e.root,owner:this});this.value=this.fragment.getValue()};r.prototype={bubble:function(){if(!this.dirty){this.dirty=true;e.addView(this)}},update:function(){var t=this.fragment.getValue();this.component.instance.viewmodel.set(this.key,t);e.addViewmodel(this.component.instance.viewmodel);this.value=t;this.dirty=false},rebind:function(e,t,n,r){this.fragment.rebind(e,t,n,r)},unbind:function(){this.fragment.unbind()}};return r}(_,o);var Vo=function(e,t){var n=function(n,r,i,o){var a=this;this.root=n.root;this.parentFragment=n.parentFragment;this.ready=false;this.hash=null;this.resolver=new e(this,i,function(e){if(a.binding||(a.binding=n.bindings[a.hash])){n.bindings[a.hash]=null;a.binding.rebind(e);a.hash=e+"="+r;n.bindings[a.hash]}else{if(!a.ready){o.push({childKeypath:r,parentKeypath:e})
}else{t(n,n.root,e,r)}}a.value=n.root.viewmodel.get(e)})};n.prototype={rebind:function(e,t,n,r){this.resolver.rebind(e,t,n,r)},unbind:function(){this.resolver.unbind()}};return n}(or,b);var zo=function(e,t,n,r,i){var o;o=function(e,t,n,r){var i={},o,s;e.complexParameters=[];for(o in n){if(n.hasOwnProperty(o)){s=a(e,o,n[o],r);if(s!==undefined||t[o]===undefined){i[o]=s}}}return i};function a(o,a,s,u){var f,l,c,h,d,p;c=o.root;h=o.parentFragment;if(typeof s==="string"){l=t(s);if(!l){return s}return l.value}if(s===null){return true}if(s.length===1&&s[0].t===e.INTERPOLATOR){if(s[0].r){if(h.indexRefs&&h.indexRefs[p=s[0].r]!==undefined){o.indexRefBindings[p]=a;return h.indexRefs[p]}d=n(c,s[0].r,h)||s[0].r;u.push({childKeypath:a,parentKeypath:d});return c.viewmodel.get(d)}if(s[0].rx){f=new i(o,a,s[0].rx,u);o.complexParameters.push(f);f.ready=true;return f.value}}f=new r(o,a,s);o.complexParameters.push(f);return f.value}return o}(z,Rt,w,qo,Vo);var Ho=function(e){return function(t,n,r,i){var o,a,s,u;a=t.parentFragment;u=t.root;s={content:i||[]};if(n.defaults.el){e.warn({debug:u.debug,message:"defaultElSpecified",args:{name:t.name}})}o=new n({el:null,append:true,data:r,partials:s,magic:u.magic||n.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:t,adapt:u.adapt,"yield":{template:i,instance:u}});return o}}(Zn);var Go=function(e){return function t(n,r){r.forEach(function i(t){var r,i;e(n,n.root,t.parentKeypath,t.childKeypath);r=n.instance.viewmodel.get(t.childKeypath);i=n.root.viewmodel.get(t.parentKeypath);if(r!==undefined&&i===undefined){n.root.viewmodel.set(t.parentKeypath,r)}})}}(b);var $o=function(e,t,n){var r;var i;e.push(function(){i=e.Fragment});r=function a(e,t){var n;for(n in t){if(t.hasOwnProperty(n)){o(e.instance,e.root,n,t[n])}}};function o(e,r,i,o){if(typeof o!=="string"){n.error({debug:r.debug,message:"noComponentEventArguments"})}e.on(i,function(){var e,n;if(arguments.length&&arguments[0].node){e=Array.prototype.shift.call(arguments)}n=Array.prototype.slice.call(arguments);t(r,o,{event:e,args:n});return false})}return r}(o,d,Zn);var Ko=function(e){var t,n;t=e.root;while(t){if(n=t._liveComponentQueries["_"+e.name]){n.push(e.instance)}t=t._parent}};var Jo=function(e,t,n,r,i,o,a){return function s(u,f){var l,c,h,d;l=this.parentFragment=u.parentFragment;c=l.root;this.root=c;this.type=e.COMPONENT;this.name=u.template.e;this.index=u.index;this.indexRefBindings={};this.bindings=[];this.yielder=null;if(!f){throw new Error('Component "'+this.name+'" not found')}d=[];h=n(this,f.defaults.data||{},u.template.a,d);r(this,f,h,u.template.f);i(this,d);o(this,u.template.v);if(u.template.t1||u.template.t2||u.template.o){t('The "intro", "outro" and "decorator" directives have no effect on components')}a(this)}}(z,F,zo,Ho,Go,$o,Ko);var Yo=function(e,t){return function n(r,i,o,a){var s=this.instance,u=s._parent,f,l;this.bindings.forEach(function(e){var n;if(e.root!==u){return}if(n=t(e.keypath,o,a)){e.rebind(n)}});this.complexParameters.forEach(c);if(this.yielder){c(this.yielder)}if(f=this.indexRefBindings[r]){e.addViewmodel(s.viewmodel);s.viewmodel.set(f,i)}if(l=this.root._liveComponentQueries["_"+this.name]){l._makeDirty()}function c(e){e.rebind(r,i,o,a)}}}(_,Xn);var Qo=function gu(){var e=this.instance;e.render(this.parentFragment.getNode());this.rendered=true;return e.fragment.detach()};var Xo=function mu(){return this.instance.fragment.toString()};var Zo=function(){var e;e=function r(){this.complexParameters.forEach(t);this.bindings.forEach(t);n(this);this.instance.fragment.unbind()};function t(e){e.unbind()}function n(e){var t,n;t=e.root;do{if(n=t._liveComponentQueries["_"+e.name]){n._remove(e)}}while(t=t._parent)}return e}();var ea=function(e){return function t(n){e(this.instance,"teardown");this.shouldDestroy=n;this.instance.unrender()}}(d);var ta=function(e,t,n,r,i,o,a,s,u,f,l,c,h){var d=function(e,t){this.init(e,t)};d.prototype={detach:e,find:t,findAll:n,findAllComponents:r,findComponent:i,findNextNode:o,firstNode:a,init:s,rebind:u,render:f,toString:l,unbind:c,unrender:h};return d}(Mo,Po,Do,Fo,Bo,Uo,Wo,Jo,Yo,Qo,Xo,Zo,ea);var na=function(e,t){var n=function(t){this.type=e.COMMENT;this.value=t.template.c};n.prototype={detach:t,firstNode:function(){return this.node},render:function(){if(!this.node){this.node=document.createComment(this.value)}return this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){if(e){this.node.parentNode.removeChild(this.node)}}};return n}(z,Gn);var ra=function(e){var t;e.push(function(){t=e.Fragment});var n=function(e){var n,r;n=e.parentFragment.root;this.component=r=n.component;this.surrogateParent=e.parentFragment;this.parentFragment=r.parentFragment;if(r.yielder){throw new Error("A component template can only have one {{yield}} declaration at a time")}this.fragment=new t({owner:this,root:n.yield.instance,template:n.yield.template});r.yielder=this};n.prototype={detach:function(){return this.fragment.detach()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},findNextNode:function(){return this.surrogateParent.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(e){return this.fragment.getValue(e)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(e){this.fragment.unrender(e);this.component.yielder=void 0},rebind:function(e,t,n,r){this.fragment.rebind(e,t,n,r)},toString:function(){return this.fragment.toString()}};return n}(o);var ia=function(e,t,n,r,i,o,a,s,u,f,l){return function c(h){if(typeof h.template==="string"){return new t(h)}switch(h.template.t){case e.INTERPOLATOR:if(h.template.r==="yield"){return new l(h)}return new n(h);case e.SECTION:return new r(h);case e.TRIPLE:return new i(h);case e.ELEMENT:var d;if(d=s(h.parentFragment.root,h.template.e)){return new u(h,d)}return new o(h);case e.PARTIAL:return new a(h);case e.COMMENT:return new f(h);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(z,$n,lr,Tr,Ur,No,jo,Io,ta,na,ra);var oa=function(e,t,n){return function r(i){var o=this;var a,s,u;this.owner=i.owner;a=this.parent=this.owner.parentFragment;this.root=i.root;this.pElement=i.pElement;this.context=i.context;if(this.owner.type===e.SECTION){this.index=i.index}if(a){s=a.indexRefs;if(s){this.indexRefs=t(null);for(u in s){this.indexRefs[u]=s[u]}}}this.priority=a?a.priority+1:1;if(i.indexRef){if(!this.indexRefs){this.indexRefs={}}this.indexRefs[i.indexRef]=i.index}if(typeof i.template==="string"){i.template=[i.template]}else if(!i.template){i.template=[]}this.items=i.template.map(function(e,t){return n({parentFragment:o,pElement:i.pElement,template:e,index:t})});this.value=this.argsList=null;this.dirtyArgs=this.dirtyValue=true;this.bound=true}}(z,H,ia);var aa=function(e){return function t(n,r,i,o){e(this,"context",i,o);if(this.indexRefs&&this.indexRefs[n]!==undefined){this.indexRefs[n]=r}this.items.forEach(function(e){if(e.rebind){e.rebind(n,r,i,o)}})}}(oo);var sa=function yu(){var e;if(this.items.length===1){e=this.items[0].render()}else{e=document.createDocumentFragment();this.items.forEach(function(t){e.appendChild(t.render())})}this.rendered=true;return e};var ua=function bu(e){if(!this.items){return""}return this.items.map(function(t){return t.toString(e)}).join("")};var fa=function(){var e;e=function n(){if(!this.bound){return}this.items.forEach(t);this.bound=false};function t(e){if(e.unbind){e.unbind()}}return e}();var la=function wu(e){if(!this.rendered){throw new Error("Attempted to unrender a fragment that was not rendered")}this.items.forEach(function(t){return t.unrender(e)});this.rendered=false};var ca=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g){var m=function(e){this.init(e)};m.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:o,findNextNode:a,firstNode:s,getNode:u,getValue:f,init:l,rebind:c,render:h,toString:d,unbind:p,unrender:v};g.Fragment=m;return m}(In,Mn,Pn,Dn,Fn,Bn,Un,Wn,qn,Vn,oa,aa,sa,ua,fa,la,o);var ha=function(e,t,n,r){var i=["template","partials","components","decorators","events"];return function o(a,s){var u,f,l,c,h;if(typeof a==="function"&&!s){s=a;a={}}else{a=a||{}}if(typeof a!=="object"){throw new Error("The reset method takes either no arguments, or an object containing new data")}if((f=this.viewmodel.wrapped[""])&&f.reset){if(f.reset(a)===false){this.data=a}}else{this.data=a}l=r.reset(this);c=l.length;while(c--){if(i.indexOf(l[c])>-1){h=true;break}}if(h){var d;this.viewmodel.mark("");if(d=this.component){d.shouldDestroy=true}this.unrender();if(d){d.shouldDestroy=false}if(this.fragment.template!==this.template){this.fragment.unbind();this.fragment=new n({template:this.template,root:this,owner:this})}u=this.render(this.el,this.anchor)}else{u=t.start(this,true);this.viewmodel.mark("");t.end()}e(this,"reset",{args:[a]});if(s){u.then(s)}return u}}(d,_,ca,$t);var da=function(e,t){return function n(r){var i,o;e.template.init(null,this,{template:r});i=this.transitionsEnabled;this.transitionsEnabled=false;if(o=this.component){o.shouldDestroy=true}this.unrender();if(o){o.shouldDestroy=false}this.fragment.unbind();this.fragment=new t({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=i}}($t,ca);var pa=function(e){return e("reverse")}(Nn);var va=function(e,t,n,r){var i=/\*/;return function o(a,s,u){var f=this;var l,c;c=e.start(this,true);if(t(a)){l=a;u=s;for(a in l){if(l.hasOwnProperty(a)){s=l[a];a=n(a);this.viewmodel.set(a,s)}}}else{a=n(a);if(i.test(a)){r(this,a).forEach(function(e){f.viewmodel.set(e,s)})}else{this.viewmodel.set(a,s)}}e.end();if(u){c.then(u.bind(this))}return c}}(_,u,j,yn);var ga=function(e){return e("shift")}(Nn);var ma=function(e){return e("sort")}(Nn);var ya=function(e){return e("splice")}(Nn);var ba=function(e){return function t(n,r){return e(this,n,r===undefined?-1:-r)}}(R);var wa=function(e,t,n){return function r(i){var o;e(this,"teardown");this.fragment.unbind();this.viewmodel.teardown();if(this.rendered&&this.el.__ractive_instances__){t(this.el.__ractive_instances__,this)}this.shouldDestroy=true;o=this.rendered?this.unrender():n.resolve();if(i){o.then(i.bind(this))}return o}}(d,p,v);var Ea=function(e){return function t(n,r){var i;if(typeof n!=="string"){e.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:n}})}i=this.get(n);return this.set(n,!i,r)}}(Zn);var _a=function Eu(){return this.fragment.toString(true)};var xa=function(e,t,n,r,i){return function o(){var o=this;var a,s;if(!this.rendered){r.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"});return i.resolve()}a=t.start(this,true);s=!this.component||this.component.shouldDestroy||this.shouldDestroy;if(this.constructor.css){a.then(function(){n.remove(o.constructor)})}while(this._animations[0]){this._animations[0].stop()}this.fragment.unrender(s);this.rendered=false;e(this.el.__ractive_instances__,this);t.end();return a}}(p,_,Cn,Zn,v);var ka=function(e){return e("unshift")}(Nn);var Sa=function(e,t){return function n(r,i){var o;if(typeof r==="function"){i=r;r=""}else{r=r||""}o=t.start(this,true);this.viewmodel.mark(r);t.end();e(this,"update",{args:[r]});if(i){o.then(i.bind(this))}return o}}(d,_);var Oa=function(e,t){var n;n=function i(e,t){var n;if(typeof e!=="string"){e="";t=true}r(this,e,n={},t);return this.set(n)};function r(n,i,o,a){var s,u,f,l,c,h,d=[];s=n._twowayBindings[i];if(s&&(f=s.length)){while(f--){l=s[f];if(l.radioName&&!l.element.node.checked){continue}if(l.checkboxName){if(!d[l.keypath]&&!l.changed()){d.push(l.keypath);d[l.keypath]=l}continue}c=l.attribute.value;h=l.getValue();if(e(c,h)){continue}if(!t(c,h)){o[i]=h}}}if(d.length){d.forEach(function(t){var n,r,i;n=d[t];r=n.attribute.value;i=n.getValue();if(!e(r,i)){o[t]=i}})}if(!a){return}u=n.viewmodel.depsMap["default"][i];if(u){f=u.length;while(f--){r(n,u[f],o,a)}}}return n}(ji,y);var Ta=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v,g,m,y,b,w,E,_,x,k,S,O,T,A,N,L,R){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:o,findComponent:a,fire:s,get:u,insert:f,merge:l,observe:c,off:h,on:d,pop:p,push:v,render:g,reset:m,resetTemplate:y,reverse:b,set:w,shift:E,sort:_,splice:x,subtract:k,teardown:S,toggle:O,toHTML:T,unrender:A,unshift:N,update:L,updateModel:R}}(C,Yt,Qt,Xt,fn,ln,cn,hn,dn,vn,gn,_n,Sn,On,Ln,Rn,jn,ha,da,pa,va,ga,ma,ya,ba,wa,Ea,_a,xa,ka,Sa,Oa);var Aa=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;t=Math.random()*16|0;n=e=="x"?t:t&3|8;return n.toString(16)})};var Na=function(){var e=0;return function(){return"r-"+e++}}();var La=function(e,t,n,r){var i=e.root,o=e.keypath;if(n==="sort"||n==="reverse"){i.viewmodel.set(o,t);return}if(!r){return}i.viewmodel.splice(o,r)};var Ra=function(e,t,n,r,i){var o=[],a=["pop","push","reverse","shift","sort","splice","unshift"],s,u,f;a.forEach(function(a){var s=function(){var t,o,s,u,f;t=n(this,a,Array.prototype.slice.call(arguments));o=r(this,t);s=Array.prototype[a].apply(this,arguments);this._ractive.setting=true;f=this._ractive.wrappers.length;while(f--){u=this._ractive.wrappers[f];e.start(u.root);i(u,this,a,o);e.end()}this._ractive.setting=false;return s};t(o,a,{value:s})});s={};if(s.__proto__){u=function(e){e.__proto__=o};f=function(e){e.__proto__=Array.prototype}}else{u=function(e){var n,r;n=a.length;while(n--){r=a[n];t(e,r,{value:o[r],configurable:true})}};f=function(e){var t;t=a.length;while(t--){delete e[a[t]]}}}u.unpatch=f;return u}(_,N,Tn,An,La);var Ca=function(e,t,n){var r,i,o;r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}};i=function(t,r,i){this.root=t;this.value=r;this.keypath=i;if(!r._ractive){e(r,"_ractive",{value:{wrappers:[],instances:[],setting:false},configurable:true});n(r)}if(!r._ractive.instances[t._guid]){r._ractive.instances[t._guid]=0;r._ractive.instances.push(t)}r._ractive.instances[t._guid]+=1;r._ractive.wrappers.push(this)};i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,a;e=this.value;t=e._ractive;r=t.wrappers;i=t.instances;if(t.setting){return false}a=r.indexOf(this);if(a===-1){throw new Error(o)}r.splice(a,1);if(!r.length){delete e._ractive;n.unpatch(this.value)}else{i[this.root._guid]-=1;if(!i[this.root._guid]){a=i.indexOf(this.root);if(a===-1){throw new Error(o)}i.splice(a,1)}}}};o="Something went wrong in a rather interesting way";return r}(N,s,Ra);var ja=function(e,t){var n,r;if(e){n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}};r=function(n,r,i){this.value=r;this.magic=true;this.magicWrapper=e.wrap(n,r,i);this.arrayWrapper=t.wrap(n,r,i)};r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}}}return n}(k,Ca);var Ia=function(e,t,n,r){var i;var o={};i=function u(i,o){var a=this.ractive,u,f,l,c;u=a.adapt.length;for(f=0;f<u;f+=1){l=a.adapt[f];if(typeof l==="string"){var h=e.registries.adaptors.find(a,l);if(!h){throw new Error('Missing adaptor "'+l+'"')}l=a.adapt[f]=h}if(l.filter(o,i,a)){c=this.wrapped[i]=l.wrap(a,o,i,s(i));c.value=o;return o}}if(a.magic){if(r.filter(o,i,a)){this.wrapped[i]=r.wrap(a,o,i)}else if(n.filter(o,i,a)){this.wrapped[i]=n.wrap(a,o,i)}}else if(a.modifyArrays&&t.filter(o,i,a)){this.wrapped[i]=t.wrap(a,o,i)}return o};function a(e,t){var n={},r;if(!t){return e}t+=".";for(r in e){if(e.hasOwnProperty(r)){n[t+r]=e[r]}}return n}function s(e){var t;if(!o[e]){t=e?e+".":"";o[e]=function(n,r){var i;if(typeof n==="string"){i={};i[t+n]=r;return i}if(typeof n==="object"){return t?a(n,e):n}}}return o[e]}return i}($t,Ca,k,ja);var Ma=function _u(e){var t=[""],n,r,i,o;n=e.length;while(n--){r=e[n];i=r.split(".");while(i.length>1){i.pop();o=i.join(".");if(t.indexOf(o)===-1){t.push(o)}}}return t};var Pa=function(){var e;var t={};e=function r(e){var t,r,i,o;t=e.split(".");r=n(t.length);i=function(e,n){return e?"*":t[n]};o=r.map(function(e){return e.map(i).join(".")});return o};function n(e){var n="",r,i,o,a,s;if(!t[e]){o=[];while(n.length<e){n+=1}r=parseInt(n,2);a=function(e){return e==="1"};for(s=0;s<=r;s+=1){i=s.toString(2);while(i.length<e){i="0"+i}o[s]=Array.prototype.map.call(i,a)}t[e]=o}return t[e]}return e}();var Da=function(e){var t;var n=/[^\.]+$/;t=r;function r(t,n,r){var a;o(t,n);if(r){return}a=e(n);a.forEach(function(e){i(t,e,n)})}function i(e,t,r){var a,s,u;a=e.depsMap.patternObservers;s=a[t];if(s){s.forEach(function(t){var a=n.exec(t)[0];u=r?r+"."+a:a;o(e,u);i(e,t,u)})}}function o(e,t){e.patternObservers.forEach(function(e){if(e.regex.test(t)){e.update(t)}})}return t}(Pa);var Fa=function(e,t){var n;var r=["observers","default"];n=function f(){var n=this;var s=this,f,l,c=[],h,d,p,v={};if(!this.changes.length){return}d=function(e){var t;if(t=s.deps.computed[e]){u(h,t)}};p=function(e){var t;d(e);if(t=s.depsMap.computed[e]){t.forEach(p)}};do{f=this.changes;u(c,f);this.changes=[];h=[];l=e(f);l.forEach(d);f.forEach(p);h.forEach(i)}while(this.changes.length);l=e(c);if(this.patternObservers.length){l.forEach(function(e){return t(n,e,true)});c.forEach(function(e){return t(n,e)})}r.forEach(function(e){if(!n.deps[e]){return}l.forEach(function(t){return o(n,t,e)});a(n,c,e)});c.forEach(function(e){v[e]=n.get(e)});this.implicitChanges={};return v};function i(e){e.update()}function o(e,t,n){var r,i;if(r=s(e,t,n)){i=e.get(t);r.forEach(function(e){return e.setValue(i)})}}function a(e,t,n){var r=[];i(t);r.forEach(u);function i(e){e.forEach(o);e.forEach(a)}function o(t){var i=s(e,t,n);if(i){r.push({keypath:t,deps:i})}}function a(t){var r;if(r=e.depsMap[n][t]){i(r)}}function u(t){var n=e.get(t.keypath);t.deps.forEach(function(e){return e.setValue(n)})}}function s(e,t,n){var r=e.deps[n];return r?r[t]:null}function u(e,t){t.forEach(function(t){if(e.indexOf(t)===-1){e.push(t)}})}return n}(Ma,Da);var Ba=function xu(){this.capturing=true;this.captured=[]};var Ua=function ku(e,t){var n,r,i;if(!t){if(r=this.wrapped[e]){if(r.teardown()!==false){this.wrapped[e]=null}}}if(i=this.computations[e]){i.compute()}this.cache[e]=undefined;if(n=this.cacheMap[e]){while(n.length){this.clearCache(n.pop())}}};var Wa={FAILED_LOOKUP:true};var qa=function(e,t){var n={};var r=function(e,r){this.viewmodel=e;this.root=e.ractive;this.ref=r;this.parentFragment=n;e.unresolvedImplicitDependencies[r]=true;e.unresolvedImplicitDependencies.push(this);t.addUnresolved(this)};r.prototype={resolve:function(){this.viewmodel.mark(this.ref);this.viewmodel.unresolvedImplicitDependencies[this.ref]=false;e(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){t.removeUnresolved(this)}};return r}(p,_);var Va=function(e,t){var n;var r={};n=function o(n){var o=arguments[1];if(o===void 0)o=r;var a=this.ractive,s=this.cache,u,f,l,c;if(s[n]===undefined){if(f=this.computations[n]){u=f.value}else if(l=this.wrapped[n]){u=l.value}else if(!n){this.adapt("",a.data);u=a.data}else if(c=this.evaluators[n]){u=c.value}else{u=i(this,n)}s[n]=u}else{u=s[n]}if(o.evaluateWrapped&&(l=this.wrapped[n])){u=l.get()}if(o.capture&&this.capturing&&this.captured.indexOf(n)===-1){this.captured.push(n);if(u===e&&this.unresolvedImplicitDependencies[n]!==true){new t(this,n)}}return u===e?void 0:u};function i(t,n){var r,i,o,a,s,u,f;r=n.split(".");i=r.pop();o=r.join(".");a=t.get(o);if(f=t.wrapped[o]){a=f.get()}if(a===null||a===undefined){return}if(!(s=t.cacheMap[o])){t.cacheMap[o]=[n]}else{if(s.indexOf(n)===-1){s.push(n)}}if(typeof a==="object"&&!(i in a)){return t.cache[n]=e}u=a[i];t.adapt(n,u,false);t.cache[n]=u;return u}return n}(Wa,qa);var za=function Su(e,t){if(t){this.implicitChanges[e]=true}if(this.changes.indexOf(e)===-1){this.changes.push(e);this.clearCache(e)}};var Ha=function(e,t){var n,r,i,o;n={};r=0;i=e.map(function(e,i){var a,s,u;s=r;u=t.length;do{a=t.indexOf(e,s);if(a===-1){o=true;return-1}s=a+1}while(n[a]&&s<u);if(a===r){r+=1}if(a!==i){o=true}n[a]=true;return a});i.unchanged=!o;return i};var Ga=function(e,t,n){var r;var i={};r=function u(e,r,i,a){var u=this;var f,l,c,h,d;this.mark(e);if(a&&a.compare){c=s(a.compare);try{f=r.map(c);l=i.map(c)}catch(p){if(this.debug){throw p}else{t("Merge operation: comparison failed. Falling back to identity checking")}f=r;l=i}}else{f=r;l=i}h=n(f,l);h.forEach(function(t,n){if(t===-1){u.mark(e+"."+n)}});this.set(e,i,true);if(d=this.deps["default"][e]){d.filter(o).forEach(function(e){return e.merge(h)})}if(r.length!==i.length){this.mark(e+".length",true)}};function o(t){return typeof t.merge==="function"&&(!t.subtype||t.subtype===e.SECTION_EACH)}function a(e){return JSON.stringify(e)}function s(e){if(e===true){return a}if(typeof e==="string"){if(!i[e]){i[e]=function(t){return t[e]}}return i[e]}if(typeof e==="function"){return e}throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}return r}(z,F,Ha);var $a=function(){var e;e=function n(e,r){var i=arguments[2];if(i===void 0)i="default";var o,a,s;if(r.isStatic){return}o=this.deps[i]||(this.deps[i]={});a=o[e]||(o[e]=[]);a.push(r);if(!e){return}if(s=this.evaluators[e]){if(!s.dependants){s.wake()}s.dependants+=1}t(this,e,i)};function t(e,t,n){var r,i,o,a;r=t.split(".");while(r.length){r.pop();i=r.join(".");o=e.depsMap[n]||(e.depsMap[n]={});a=o[i]||(o[i]=[]);if(a[t]===undefined){a[t]=0;a.push(t)}a[t]+=1;t=i}}return e}();var Ka=function Ou(){this.capturing=false;return this.captured};var Ja=function(e,t){return function n(r,i,o){var a,s,u,f,l,c,h,d;l=this.computations[r];if(l&&!l.setting){l.set(i);i=l.get()}if(e(this.cache[r],i)){return}c=this.wrapped[r];h=this.evaluators[r];if(c&&c.reset){d=c.reset(i)!==false;if(d){i=c.get()}}if(h){h.value=i}if(!l&&!h&&!d){a=r.split(".");s=a.pop();u=a.join(".");c=this.wrapped[u];if(c&&c.set){c.set(s,i)}else{f=c?c.get():this.get(u);if(!f){f=t(s);this.set(u,f,true)}f[s]=i}}if(!o){this.mark(r)}else{this.clearCache(r)}}}(y,x);var Ya=function(e){var t;t=function r(e,t){var r=this,i,o;for(i=t.rangeStart;i<t.rangeEnd;i+=1){r.mark(e+"."+i)}if(t.balance){r.mark(e+".length",true)}if(o=r.deps["default"][e]){o.filter(n).forEach(function(e){return e.splice(t)})}};function n(t){return t.type===e.SECTION&&(!t.subtype||t.subtype===e.SECTION_EACH)&&t.rendered}return t}(z);var Qa=function Tu(){var e=this;var t;Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});while(t=this.unresolvedImplicitDependencies.pop()){t.teardown()}};var Xa=function(){var e;e=function n(e,r){var i=arguments[2];if(i===void 0)i="default";var o,a,s;if(r.isStatic){return}o=this.deps[i][e];a=o.indexOf(r);if(a===-1){throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks")}o.splice(a,1);if(!e){return}if(s=this.evaluators[e]){s.dependants-=1;if(!s.dependants){s.sleep()}}t(this,e,i)};function t(e,t,n){var r,i,o,a;r=t.split(".");while(r.length){r.pop();i=r.join(".");o=e.depsMap[n];a=o[i];a[t]-=1;if(!a[t]){a.splice(a.indexOf(t),1);a[t]=undefined}t=i}}return e}();var Za=function(){var e;var t=/\$\{([^\}]+)\}/g;e=function(e){if(typeof e==="function"){return{get:e}}if(typeof e==="string"){return{get:n(e)}}if(typeof e==="object"&&typeof e.get==="string"){e={get:n(e.get),set:e.set}}return e};function n(e){var n="var __ractive=this;return("+e.replace(t,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}return e}();var es=function(e,t,n){var r=function(e,t,n){var r;this.ractive=e;this.viewmodel=e.viewmodel;this.key=t;this.getter=n.get;this.setter=n.set;this.dependencies=[];if(r=e.viewmodel.get(t)){this.set(r)}this.update()};r.prototype={get:function(){this.compute();return this.value},set:function(e){if(this.setting){this.value=e;return}if(!this.setter){throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)")}this.setter.call(this.ractive,e)},compute:function(){var t,r,i;t=this.ractive;t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(o){e.warn({debug:t.debug,message:"failedComputation",args:{key:this.key,err:o.message||o}});r=true}i=t.viewmodel.release();n(this,this.dependencies,i);return r?false:true},update:function(){var e=this.value;if(this.compute()&&!t(this.value,e)){this.ractive.viewmodel.mark(this.key)}}};return r}(Zn,y,tr);var ts=function(e,t){return function n(r,i){var o,a;for(o in i){a=e(i[o]);r.viewmodel.computations[o]=new t(r,o,a)}}}(Za,es);var ns=function(){var e={lookup:function(e,t){var n,r=e.adapt;if(!r||!r.length){return r}if(t&&Object.keys(t).length&&(n=r.length)){while(n--){var i=r[n];if(typeof i==="string"){r[n]=t[i]||i}}}return r},combine:function(e,n){e=t(e);n=t(n);if(!e||!e.length){return n}if(!n||!n.length){return e.slice()}e.forEach(function(e){if(n.indexOf(e)===-1){n.push(e)}});return n}};function t(e){if(typeof e==="string"){e=[e]}return e}return e}();var rs=function(e,t,n,r,i,o,a,s,u,f,l,c,h,d,p,v){var g;try{Object.defineProperty({},"test",{value:0})}catch(m){g=true}var y=function(t){this.ractive=t;y.extend(t.constructor,t);this.cache={};this.cacheMap=e(null);this.deps={computed:{},"default":{}};this.depsMap={computed:{},"default":{}};this.patternObservers=[];this.wrapped=e(null);this.evaluators=e(null);this.computations=e(null);this.captured=null;this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={}};y.extend=function(e,t){if(t.magic&&g){throw new Error("Getters and setters (magic mode) are not supported in this browser")}t.adapt=v.combine(e.prototype.adapt,t.adapt)||[];t.adapt=v.lookup(t,t.adaptors)};y.prototype={adapt:t,applyChanges:n,capture:r,clearCache:i,get:o,mark:a,merge:s,register:u,release:f,set:l,splice:c,teardown:h,unregister:d,compute:function(){p(this.ractive,this.ractive.computed)}};return y}(H,Ia,Fa,Ba,Ua,Va,za,Ga,$a,Ka,Ja,Ya,Qa,Xa,ts,ns);var is=function(e,t,n,r,i,o){var a;a=function f(t){var n=arguments[1];if(n===void 0)n={};u(t,n);e.init(t.constructor,t,n);t.viewmodel=new i(t);t.viewmodel.compute();if(t.template){t.fragment=new o({template:t.template,root:t,owner:t})}s(t)};function s(e){var t;if(t=n(e.el)){if(t&&!e.append){if(t.__ractive_instances__){try{t.__ractive_instances__.splice(0,t.__ractive_instances__.length).forEach(function(e){return e.teardown()})}catch(r){}}t.innerHTML=""}e.render(t,e.append)}}function u(e,n){e._guid=r();e._subs=t(null);e._config={};e._twowayBindings=t(null);e._animations=[];e.nodes={};e._liveQueries=[];e._liveComponentQueries=[];if(n._parent&&n._component){e._parent=n._parent;e.component=n._component;n._component.instance=e}}return a}($t,H,pn,Na,rs,ca);var os=function(e){return function t(n,r,i){if(n.beforeInit){n.beforeInit(i)}e(n,i)}}(is);var as=function(e,t,n,r){var i;var o,a={_parent:true,_component:true},s={toPrototype:f,toOptions:l},u=n.registries;n.keys.forEach(function(e){return a[e]=true});r.push(function(){o=r.Ractive});i=s;function f(t,n,r){for(var i in r){if(!(i in a)&&r.hasOwnProperty(i)){var o=r[i];if(typeof o==="function"){o=e(t,i,o)}n[i]=o}}}function l(e){if(!(e.prototype instanceof o)){return e}var n={};while(e){u.forEach(function(t){c(t.useDefaults?e.prototype:e,n,t.name)});Object.keys(e.prototype).forEach(function(r){if(r==="computed"){return}var i=e.prototype[r];if(!(r in n)){n[r]=i._method?i._method:i}else if(typeof n[r]==="function"&&typeof i==="function"&&n[r]._method){var o,a=i._method;if(a){i=i._method}o=t(n[r]._method,i);if(a){o._method=o}n[r]=o}});if(e._parent!==o){e=e._parent}else{e=false}}return n}function c(e,t,n){var r,i=Object.keys(e[n]);if(!i.length){return}if(!(r=t[n])){r=t[n]={}}i.filter(function(e){return!(e in r)}).forEach(function(t){return r[t]=e[n][t]})}return i}(Ht,W,$t,o);var ss=function(e,t,n,r,i,o,a){return function s(){var u=arguments[0];if(u===void 0)u={};var f=this,l,c,h;u=a.toOptions(u);l=function(e){i(this,l,e)};c=e(f.prototype);c.constructor=l;h={_guid:{value:n()},defaults:{value:c},extend:{value:s,writable:true,configurable:true},_parent:{value:f}};t(l,h);r.extend(f,c,u);o.extend(f,c);a.toPrototype(f.prototype,c,u);l.prototype=c;return l}}(H,L,Aa,$t,os,rs,as);var us=function(e,t,n,r,i,o,a,s,u,f,l,c,h){var d,p;d=function(e){c(this,e)};p={extend:{value:f},parse:{value:l},Promise:{value:s},svg:{value:r},magic:{value:i},VERSION:{value:"0.5.8"},adaptors:{writable:true,value:{}},components:{writable:true,value:{}},decorators:{writable:true,value:{}},easing:{writable:true,value:t},events:{writable:true,value:{}},interpolators:{writable:true,value:n},partials:{writable:true,value:{}},transitions:{writable:true,value:{}}};o(d,p);d.prototype=u(a,e);d.prototype.constructor=d;d.defaults=d.prototype;h.Ractive=d;while(h.length){h.pop()()}var v="function";if(typeof Date.now!==v||typeof String.prototype.trim!==v||typeof Object.keys!==v||typeof Array.prototype.indexOf!==v||typeof Array.prototype.forEach!==v||typeof Array.prototype.map!==v||typeof Array.prototype.filter!==v||typeof window!=="undefined"&&typeof window.addEventListener!==v){throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.")}return d}(r,i,l,c,S,L,Ta,v,xi,ss,Dt,is,o);if(typeof t!=="undefined"&&t.exports){t.exports=us}else if(typeof define==="function"&&define.amd){define(function(){return us})}e.Ractive=us;us.noConflict=function(){e.Ractive=n;return us}})(typeof window!=="undefined"?window:this)},{}],79:[function(e,t,n){},{}],80:[function(e,t,n){var r=e("base64-js");var i=e("ieee754");n.Buffer=o;n.SlowBuffer=o;n.INSPECT_MAX_BYTES=50;o.poolSize=8192;o._useTypedArrays=function(){try{var e=new ArrayBuffer(0);var t=new Uint8Array(e);t.foo=function(){return 42};return 42===t.foo()&&typeof t.subarray==="function"}catch(n){return false}}();function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);var r=typeof e;if(t==="base64"&&r==="string"){e=C(e)}var i;if(r==="number")i=M(e);else if(r==="string")i=o.byteLength(e,t);else if(r==="object")i=M(e.length);else throw new Error("First argument needs to be a number, array or string.");var a;if(o._useTypedArrays){a=o._augment(new Uint8Array(i))}else{a=this;a.length=i;a._isBuffer=true}var s;if(o._useTypedArrays&&typeof e.byteLength==="number"){a._set(e)}else if(D(e)){if(o.isBuffer(e)){for(s=0;s<i;s++)a[s]=e.readUInt8(s)}else{for(s=0;s<i;s++)a[s]=(e[s]%256+256)%256}}else if(r==="string"){a.write(e,0,t)}else if(r==="number"&&!o._useTypedArrays&&!n){for(s=0;s<i;s++){a[s]=0}}return a}o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};o.isBuffer=function(e){return!!(e!==null&&e!==undefined&&e._isBuffer)};o.byteLength=function(e,t){var n;e=e.toString();switch(t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=B(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=q(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=e.length*2;break;default:throw new Error("Unknown encoding")}return n};o.concat=function(e,t){K(P(e),"Usage: Buffer.concat(list[, length])");if(e.length===0){return new o(0)}else if(e.length===1){return e[0]}var n;if(t===undefined){t=0;for(n=0;n<e.length;n++){t+=e[n].length}}var r=new o(t);var i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i);i+=a.length}return r};o.compare=function(e,t){K(o.isBuffer(e)&&o.isBuffer(t),"Arguments must be Buffers");var n=e.length;var r=t.length;for(var i=0,a=Math.min(n,r);i<a&&e[i]===t[i];i++){}if(i!==a){n=e[i];
r=t[i]}if(n<r){return-1}if(r<n){return 1}return 0};function a(e,t,n,r){n=Number(n)||0;var i=e.length-n;if(!r){r=i}else{r=Number(r);if(r>i){r=i}}var o=t.length;K(o%2===0,"Invalid hex string");if(r>o/2){r=o/2}for(var a=0;a<r;a++){var s=parseInt(t.substr(a*2,2),16);K(!isNaN(s),"Invalid hex string");e[n+a]=s}return a}function s(e,t,n,r){var i=V(B(t),e,n,r);return i}function u(e,t,n,r){var i=V(U(t),e,n,r);return i}function f(e,t,n,r){return u(e,t,n,r)}function l(e,t,n,r){var i=V(q(t),e,n,r);return i}function c(e,t,n,r){var i=V(W(t),e,n,r);return i}o.prototype.write=function(e,t,n,r){if(isFinite(t)){if(!isFinite(n)){r=n;n=undefined}}else{var i=r;r=t;t=n;n=i}t=Number(t)||0;var o=this.length-t;if(!n){n=o}else{n=Number(n);if(n>o){n=o}}r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=a(this,e,t,n);break;case"utf8":case"utf-8":h=s(this,e,t,n);break;case"ascii":h=u(this,e,t,n);break;case"binary":h=f(this,e,t,n);break;case"base64":h=l(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,e,t,n);break;default:throw new Error("Unknown encoding")}return h};o.prototype.toString=function(e,t,n){var r=this;e=String(e||"utf8").toLowerCase();t=Number(t)||0;n=n===undefined?r.length:Number(n);if(n===t)return"";var i;switch(e){case"hex":i=g(r,t,n);break;case"utf8":case"utf-8":i=d(r,t,n);break;case"ascii":i=p(r,t,n);break;case"binary":i=v(r,t,n);break;case"base64":i=h(r,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=m(r,t,n);break;default:throw new Error("Unknown encoding")}return i};o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};o.prototype.equals=function(e){K(o.isBuffer(e),"Argument must be a Buffer");return o.compare(this,e)===0};o.prototype.compare=function(e){K(o.isBuffer(e),"Argument must be a Buffer");return o.compare(this,e)};o.prototype.copy=function(e,t,n,r){var i=this;if(!n)n=0;if(!r&&r!==0)r=this.length;if(!t)t=0;if(r===n)return;if(e.length===0||i.length===0)return;K(r>=n,"sourceEnd < sourceStart");K(t>=0&&t<e.length,"targetStart out of bounds");K(n>=0&&n<i.length,"sourceStart out of bounds");K(r>=0&&r<=i.length,"sourceEnd out of bounds");if(r>this.length)r=this.length;if(e.length-t<r-n)r=e.length-t+n;var a=r-n;if(a<100||!o._useTypedArrays){for(var s=0;s<a;s++){e[s+t]=this[s+n]}}else{e._set(this.subarray(n,n+a),t)}};function h(e,t,n){if(t===0&&n===e.length){return r.fromByteArray(e)}else{return r.fromByteArray(e.slice(t,n))}}function d(e,t,n){var r="";var i="";n=Math.min(e.length,n);for(var o=t;o<n;o++){if(e[o]<=127){r+=z(i)+String.fromCharCode(e[o]);i=""}else{i+="%"+e[o].toString(16)}}return r+z(i)}function p(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++){r+=String.fromCharCode(e[i])}return r}function v(e,t,n){return p(e,t,n)}function g(e,t,n){var r=e.length;if(!t||t<0)t=0;if(!n||n<0||n>r)n=r;var i="";for(var o=t;o<n;o++){i+=F(e[o])}return i}function m(e,t,n){var r=e.slice(t,n);var i="";for(var o=0;o<r.length;o+=2){i+=String.fromCharCode(r[o]+r[o+1]*256)}return i}o.prototype.slice=function(e,t){var n=this.length;e=I(e,n,0);t=I(t,n,n);if(o._useTypedArrays){return o._augment(this.subarray(e,t))}else{var r=t-e;var i=new o(r,undefined,true);for(var a=0;a<r;a++){i[a]=this[a+e]}return i}};o.prototype.get=function(e){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(e)};o.prototype.set=function(e,t){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(e,t)};o.prototype.readUInt8=function(e,t){if(!t){K(e!==undefined&&e!==null,"missing offset");K(e<this.length,"Trying to read beyond buffer length")}if(e>=this.length)return;return this[e]};function y(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t!==undefined&&t!==null,"missing offset");K(t+1<e.length,"Trying to read beyond buffer length")}var i=e.length;if(t>=i)return;var o;if(n){o=e[t];if(t+1<i)o|=e[t+1]<<8}else{o=e[t]<<8;if(t+1<i)o|=e[t+1]}return o}o.prototype.readUInt16LE=function(e,t){return y(this,e,true,t)};o.prototype.readUInt16BE=function(e,t){return y(this,e,false,t)};function b(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t!==undefined&&t!==null,"missing offset");K(t+3<e.length,"Trying to read beyond buffer length")}var i=e.length;if(t>=i)return;var o;if(n){if(t+2<i)o=e[t+2]<<16;if(t+1<i)o|=e[t+1]<<8;o|=e[t];if(t+3<i)o=o+(e[t+3]<<24>>>0)}else{if(t+1<i)o=e[t+1]<<16;if(t+2<i)o|=e[t+2]<<8;if(t+3<i)o|=e[t+3];o=o+(e[t]<<24>>>0)}return o}o.prototype.readUInt32LE=function(e,t){return b(this,e,true,t)};o.prototype.readUInt32BE=function(e,t){return b(this,e,false,t)};o.prototype.readInt8=function(e,t){if(!t){K(e!==undefined&&e!==null,"missing offset");K(e<this.length,"Trying to read beyond buffer length")}if(e>=this.length)return;var n=this[e]&128;if(n)return(255-this[e]+1)*-1;else return this[e]};function w(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t!==undefined&&t!==null,"missing offset");K(t+1<e.length,"Trying to read beyond buffer length")}var i=e.length;if(t>=i)return;var o=y(e,t,n,true);var a=o&32768;if(a)return(65535-o+1)*-1;else return o}o.prototype.readInt16LE=function(e,t){return w(this,e,true,t)};o.prototype.readInt16BE=function(e,t){return w(this,e,false,t)};function E(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t!==undefined&&t!==null,"missing offset");K(t+3<e.length,"Trying to read beyond buffer length")}var i=e.length;if(t>=i)return;var o=b(e,t,n,true);var a=o&2147483648;if(a)return(4294967295-o+1)*-1;else return o}o.prototype.readInt32LE=function(e,t){return E(this,e,true,t)};o.prototype.readInt32BE=function(e,t){return E(this,e,false,t)};function _(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t+3<e.length,"Trying to read beyond buffer length")}return i.read(e,t,n,23,4)}o.prototype.readFloatLE=function(e,t){return _(this,e,true,t)};o.prototype.readFloatBE=function(e,t){return _(this,e,false,t)};function x(e,t,n,r){if(!r){K(typeof n==="boolean","missing or invalid endian");K(t+7<e.length,"Trying to read beyond buffer length")}return i.read(e,t,n,52,8)}o.prototype.readDoubleLE=function(e,t){return x(this,e,true,t)};o.prototype.readDoubleBE=function(e,t){return x(this,e,false,t)};o.prototype.writeUInt8=function(e,t,n){if(!n){K(e!==undefined&&e!==null,"missing value");K(t!==undefined&&t!==null,"missing offset");K(t<this.length,"trying to write beyond buffer length");H(e,255)}if(t>=this.length)return;this[t]=e;return t+1};function k(e,t,n,r,i){if(!i){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+1<e.length,"trying to write beyond buffer length");H(t,65535)}var o=e.length;if(n>=o)return;for(var a=0,s=Math.min(o-n,2);a<s;a++){e[n+a]=(t&255<<8*(r?a:1-a))>>>(r?a:1-a)*8}return n+2}o.prototype.writeUInt16LE=function(e,t,n){return k(this,e,t,true,n)};o.prototype.writeUInt16BE=function(e,t,n){return k(this,e,t,false,n)};function S(e,t,n,r,i){if(!i){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+3<e.length,"trying to write beyond buffer length");H(t,4294967295)}var o=e.length;if(n>=o)return;for(var a=0,s=Math.min(o-n,4);a<s;a++){e[n+a]=t>>>(r?a:3-a)*8&255}return n+4}o.prototype.writeUInt32LE=function(e,t,n){return S(this,e,t,true,n)};o.prototype.writeUInt32BE=function(e,t,n){return S(this,e,t,false,n)};o.prototype.writeInt8=function(e,t,n){if(!n){K(e!==undefined&&e!==null,"missing value");K(t!==undefined&&t!==null,"missing offset");K(t<this.length,"Trying to write beyond buffer length");G(e,127,-128)}if(t>=this.length)return;if(e>=0)this.writeUInt8(e,t,n);else this.writeUInt8(255+e+1,t,n);return t+1};function O(e,t,n,r,i){if(!i){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+1<e.length,"Trying to write beyond buffer length");G(t,32767,-32768)}var o=e.length;if(n>=o)return;if(t>=0)k(e,t,n,r,i);else k(e,65535+t+1,n,r,i);return n+2}o.prototype.writeInt16LE=function(e,t,n){return O(this,e,t,true,n)};o.prototype.writeInt16BE=function(e,t,n){return O(this,e,t,false,n)};function T(e,t,n,r,i){if(!i){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+3<e.length,"Trying to write beyond buffer length");G(t,2147483647,-2147483648)}var o=e.length;if(n>=o)return;if(t>=0)S(e,t,n,r,i);else S(e,4294967295+t+1,n,r,i);return n+4}o.prototype.writeInt32LE=function(e,t,n){return T(this,e,t,true,n)};o.prototype.writeInt32BE=function(e,t,n){return T(this,e,t,false,n)};function A(e,t,n,r,o){if(!o){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+3<e.length,"Trying to write beyond buffer length");$(t,3.4028234663852886e38,-3.4028234663852886e38)}var a=e.length;if(n>=a)return;i.write(e,t,n,r,23,4);return n+4}o.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,true,n)};o.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,false,n)};function N(e,t,n,r,o){if(!o){K(t!==undefined&&t!==null,"missing value");K(typeof r==="boolean","missing or invalid endian");K(n!==undefined&&n!==null,"missing offset");K(n+7<e.length,"Trying to write beyond buffer length");$(t,1.7976931348623157e308,-1.7976931348623157e308)}var a=e.length;if(n>=a)return;i.write(e,t,n,r,52,8);return n+8}o.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,true,n)};o.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,false,n)};o.prototype.fill=function(e,t,n){if(!e)e=0;if(!t)t=0;if(!n)n=this.length;K(n>=t,"end < start");if(n===t)return;if(this.length===0)return;K(t>=0&&t<this.length,"start out of bounds");K(n>=0&&n<=this.length,"end out of bounds");var r;if(typeof e==="number"){for(r=t;r<n;r++){this[r]=e}}else{var i=B(e.toString());var o=i.length;for(r=t;r<n;r++){this[r]=i[r%o]}}return this};o.prototype.inspect=function(){var e=[];var t=this.length;for(var r=0;r<t;r++){e[r]=F(this[r]);if(r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}}return"<Buffer "+e.join(" ")+">"};o.prototype.toArrayBuffer=function(){if(typeof Uint8Array!=="undefined"){if(o._useTypedArrays){return new o(this).buffer}else{var e=new Uint8Array(this.length);for(var t=0,n=e.length;t<n;t+=1){e[t]=this[t]}return e.buffer}}else{throw new Error("Buffer.toArrayBuffer not supported in this browser")}};var L=o.prototype;o._augment=function(e){e._isBuffer=true;e._get=e.get;e._set=e.set;e.get=L.get;e.set=L.set;e.write=L.write;e.toString=L.toString;e.toLocaleString=L.toString;e.toJSON=L.toJSON;e.equals=L.equals;e.compare=L.compare;e.copy=L.copy;e.slice=L.slice;e.readUInt8=L.readUInt8;e.readUInt16LE=L.readUInt16LE;e.readUInt16BE=L.readUInt16BE;e.readUInt32LE=L.readUInt32LE;e.readUInt32BE=L.readUInt32BE;e.readInt8=L.readInt8;e.readInt16LE=L.readInt16LE;e.readInt16BE=L.readInt16BE;e.readInt32LE=L.readInt32LE;e.readInt32BE=L.readInt32BE;e.readFloatLE=L.readFloatLE;e.readFloatBE=L.readFloatBE;e.readDoubleLE=L.readDoubleLE;e.readDoubleBE=L.readDoubleBE;e.writeUInt8=L.writeUInt8;e.writeUInt16LE=L.writeUInt16LE;e.writeUInt16BE=L.writeUInt16BE;e.writeUInt32LE=L.writeUInt32LE;e.writeUInt32BE=L.writeUInt32BE;e.writeInt8=L.writeInt8;e.writeInt16LE=L.writeInt16LE;e.writeInt16BE=L.writeInt16BE;e.writeInt32LE=L.writeInt32LE;e.writeInt32BE=L.writeInt32BE;e.writeFloatLE=L.writeFloatLE;e.writeFloatBE=L.writeFloatBE;e.writeDoubleLE=L.writeDoubleLE;e.writeDoubleBE=L.writeDoubleBE;e.fill=L.fill;e.inspect=L.inspect;e.toArrayBuffer=L.toArrayBuffer;return e};var R=/[^+\/0-9A-z]/g;function C(e){e=j(e).replace(R,"");while(e.length%4!==0){e=e+"="}return e}function j(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function I(e,t,n){if(typeof e!=="number")return n;e=~~e;if(e>=t)return t;if(e>=0)return e;e+=t;if(e>=0)return e;return 0}function M(e){e=~~Math.ceil(+e);return e<0?0:e}function P(e){return(Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"})(e)}function D(e){return P(e)||o.isBuffer(e)||e&&typeof e==="object"&&typeof e.length==="number"}function F(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function B(e){var t=[];for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127){t.push(r)}else{var i=n;if(r>=55296&&r<=57343)n++;var o=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%");for(var a=0;a<o.length;a++){t.push(parseInt(o[a],16))}}}return t}function U(e){var t=[];for(var n=0;n<e.length;n++){t.push(e.charCodeAt(n)&255)}return t}function W(e){var t,n,r;var i=[];for(var o=0;o<e.length;o++){t=e.charCodeAt(o);n=t>>8;r=t%256;i.push(r);i.push(n)}return i}function q(e){return r.toByteArray(e)}function V(e,t,n,r){for(var i=0;i<r;i++){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function z(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function H(e,t){K(typeof e==="number","cannot write a non-number as a number");K(e>=0,"specified a negative value for writing an unsigned value");K(e<=t,"value is larger than maximum value for type");K(Math.floor(e)===e,"value has a fractional component")}function G(e,t,n){K(typeof e==="number","cannot write a non-number as a number");K(e<=t,"value larger than maximum allowed value");K(e>=n,"value smaller than minimum allowed value");K(Math.floor(e)===e,"value has a fractional component")}function $(e,t,n){K(typeof e==="number","cannot write a non-number as a number");K(e<=t,"value larger than maximum allowed value");K(e>=n,"value smaller than minimum allowed value")}function K(e,t){if(!e)throw new Error(t||"Failed assertion")}},{"base64-js":81,ieee754:82}],81:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(e){"use strict";var t=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="+".charCodeAt(0);var i="/".charCodeAt(0);var o="0".charCodeAt(0);var a="a".charCodeAt(0);var s="A".charCodeAt(0);function u(e){var t=e.charCodeAt(0);if(t===n)return 62;if(t===i)return 63;if(t<o)return-1;if(t<o+10)return t-o+26+26;if(t<s+26)return t-s;if(t<a+26)return t-a+26}function f(e){var n,r,i,o,a,s;if(e.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var f=e.length;a="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0;s=new t(e.length*3/4-a);i=a>0?e.length-4:e.length;var l=0;function c(e){s[l++]=e}for(n=0,r=0;n<i;n+=4,r+=3){o=u(e.charAt(n))<<18|u(e.charAt(n+1))<<12|u(e.charAt(n+2))<<6|u(e.charAt(n+3));c((o&16711680)>>16);c((o&65280)>>8);c(o&255)}if(a===2){o=u(e.charAt(n))<<2|u(e.charAt(n+1))>>4;c(o&255)}else if(a===1){o=u(e.charAt(n))<<10|u(e.charAt(n+1))<<4|u(e.charAt(n+2))>>2;c(o>>8&255);c(o&255)}return s}function l(e){var t,n=e.length%3,i="",o,a;function s(e){return r.charAt(e)}function u(e){return s(e>>18&63)+s(e>>12&63)+s(e>>6&63)+s(e&63)}for(t=0,a=e.length-n;t<a;t+=3){o=(e[t]<<16)+(e[t+1]<<8)+e[t+2];i+=u(o)}switch(n){case 1:o=e[e.length-1];i+=s(o>>2);i+=s(o<<4&63);i+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1];i+=s(o>>10);i+=s(o>>4&63);i+=s(o<<2&63);i+="=";break}return i}e.toByteArray=f;e.fromByteArray=l})(typeof n==="undefined"?this.base64js={}:n)},{}],82:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=i*8-r-1,u=(1<<s)-1,f=u>>1,l=-7,c=n?i-1:0,h=n?-1:1,d=e[t+c];c+=h;o=d&(1<<-l)-1;d>>=-l;l+=s;for(;l>0;o=o*256+e[t+c],c+=h,l-=8);a=o&(1<<-l)-1;o>>=-l;l+=r;for(;l>0;a=a*256+e[t+c],c+=h,l-=8);if(o===0){o=1-f}else if(o===u){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,r);o=o-f}return(d?-1:1)*a*Math.pow(2,o-r)};n.write=function(e,t,n,r,i,o){var a,s,u,f=o*8-i-1,l=(1<<f)-1,c=l>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;a=l}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-a))<1){a--;u*=2}if(a+c>=1){t+=h/u}else{t+=h*Math.pow(2,1-c)}if(t*u>=2){a++;u/=2}if(a+c>=l){s=0;a=l}else if(a+c>=1){s=(t*u-1)*Math.pow(2,i);a=a+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,i);a=0}}for(;i>=8;e[n+d]=s&255,d+=p,s/=256,i-=8);a=a<<i|s;f+=i;for(;f>0;e[n+d]=a&255,d+=p,a/=256,f-=8);e[n+d-p]|=v*128}},{}],83:[function(e,t,n){function r(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=r;r.EventEmitter=r;r.prototype._events=undefined;r.prototype._maxListeners=undefined;r.defaultMaxListeners=10;r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};r.prototype.emit=function(e){var t,n,r,o,u,f;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||a(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{throw TypeError('Uncaught, unspecified "error" event.')}return false}}n=this._events[e];if(s(n))return false;if(i(n)){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=arguments.length;o=new Array(r-1);for(u=1;u<r;u++)o[u-1]=arguments[u];n.apply(this,o)}}else if(a(n)){r=arguments.length;o=new Array(r-1);for(u=1;u<r;u++)o[u-1]=arguments[u];f=n.slice();r=f.length;for(u=0;u<r;u++)f[u].apply(this,o)}return true};r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(a(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(a(this._events[e])&&!this._events[e].warned){var n;if(!s(this._maxListeners)){n=this._maxListeners}else{n=r.defaultMaxListeners}if(n&&n>0&&this._events[e].length>n){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=false;function r(){this.removeListener(e,r);if(!n){n=true;t.apply(this,arguments)}}r.listener=t;this.on(e,r);return this};r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e];o=n.length;r=-1;if(n===t||i(n.listener)&&n.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(a(n)){for(s=o;s-->0;){if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}}if(r<0)return this;if(n.length===1){n.length=0;delete this._events[e]}else{n.splice(r,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}n=this._events[e];if(i(n)){this.removeListener(e,n)}else{while(n.length)this.removeListener(e,n[n.length-1])}delete this._events[e];return this};r.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};r.listenerCount=function(e,t){var n;if(!e._events||!e._events[t])n=0;else if(i(e._events[t]))n=1;else n=e._events[t].length;return n};function i(e){return typeof e==="function"}function o(e){return typeof e==="number"}function a(e){return typeof e==="object"&&e!==null}function s(e){return e===void 0}},{}],84:[function(e,t,n){var r=t.exports;var i=e("events").EventEmitter;var o=e("./lib/request");var a=e("url");r.request=function(e,t){if(typeof e==="string"){e=a.parse(e)}if(!e)e={};if(!e.host&&!e.port){e.port=parseInt(window.location.port,10)}if(!e.host&&e.hostname){e.host=e.hostname}if(!e.scheme)e.scheme=window.location.protocol.split(":")[0];if(!e.host){e.host=window.location.hostname||window.location.host}if(/:/.test(e.host)){if(!e.port){e.port=e.host.split(":")[1]}e.host=e.host.split(":")[0]}if(!e.port)e.port=e.scheme=="https"?443:80;var n=new o(new s,e);if(t)n.on("response",t);return n};r.get=function(e,t){e.method="GET";var n=r.request(e,t);n.end();return n};r.Agent=function(){};r.Agent.defaultMaxSockets=4;var s=function(){if(typeof window==="undefined"){throw new Error("no window object present")}else if(window.XMLHttpRequest){return window.XMLHttpRequest}else if(window.ActiveXObject){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var t=0;t<e.length;t++){try{var n=new window.ActiveXObject(e[t]);return function(){if(n){var r=n;n=null;return r}else{return new window.ActiveXObject(e[t])}}}catch(r){}}throw new Error("ajax not supported in this browser")}else{throw new Error("ajax not supported in this browser")}}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":85,events:83,url:108}],85:[function(e,t,n){var r=e("stream");var i=e("./response");var o=e("Base64");var a=e("inherits");var s=t.exports=function(e,t){var n=this;n.writable=true;n.xhr=e;n.body=[];n.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/");if(typeof t.withCredentials==="undefined"){t.withCredentials=true}try{e.withCredentials=t.withCredentials}catch(r){}if(t.responseType)try{e.responseType=t.responseType}catch(r){}e.open(t.method||"GET",n.uri,true);n._headers={};if(t.headers){var a=u(t.headers);for(var s=0;s<a.length;s++){var f=a[s];if(!n.isSafeRequestHeader(f))continue;var l=t.headers[f];n.setHeader(f,l)}}if(t.auth){this.setHeader("Authorization","Basic "+o.btoa(t.auth))}var c=new i;c.on("close",function(){n.emit("close")});c.on("ready",function(){n.emit("response",c)});e.onreadystatechange=function(){if(e.__aborted)return;c.handle(e)}};a(s,r);s.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t};s.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]};s.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]};s.prototype.write=function(e){this.body.push(e)};s.prototype.destroy=function(e){this.xhr.__aborted=true;this.xhr.abort();this.emit("close")};s.prototype.end=function(e){if(e!==undefined)this.body.push(e);var t=u(this._headers);for(var n=0;n<t.length;n++){var r=t[n];var i=this._headers[r];if(f(i)){for(var o=0;o<i.length;o++){this.xhr.setRequestHeader(r,i[o])}}else this.xhr.setRequestHeader(r,i)}if(this.body.length===0){this.xhr.send("")}else if(typeof this.body[0]==="string"){this.xhr.send(this.body.join(""))}else if(f(this.body[0])){var a=[];for(var n=0;n<this.body.length;n++){a.push.apply(a,this.body[n])}this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){var s=0;for(var n=0;n<this.body.length;n++){s+=this.body[n].length}var a=new this.body[0].constructor(s);var l=0;for(var n=0;n<this.body.length;n++){var c=this.body[n];for(var o=0;o<c.length;o++){a[l++]=c[o]}}this.xhr.send(a)}else{var a="";for(var n=0;n<this.body.length;n++){a+=this.body[n].toString()}this.xhr.send(a)}};s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];s.prototype.isSafeRequestHeader=function(e){if(!e)return false;return l(s.unsafeHeaders,e.toLowerCase())===-1};var u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};var f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++){if(e[n]===t)return n}return-1}},{"./response":86,Base64:87,inherits:88,stream:107}],86:[function(e,t,n){var r=e("stream");var i=e("util");var o=t.exports=function(e){this.offset=0;this.readable=true};i.inherits(o,r);var a={streaming:true,status2:true};function s(e){var t=e.getAllResponseHeaders().split(/\r?\n/);var n={};for(var r=0;r<t.length;r++){var i=t[r];if(i==="")continue;var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];if(n[a]!==undefined){if(u(n[a])){n[a].push(s)}else{n[a]=[n[a],s]}}else{n[a]=s}}else{n[i]=true}}return n}o.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();if(t==="blob")return e.responseBlob||e.response;if(t==="arraybuffer")return e.response;return e.responseText};o.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]};o.prototype.handle=function(e){if(e.readyState===2&&a.status2){try{this.statusCode=e.status;this.headers=s(e)}catch(t){a.status2=false}if(a.status2){this.emit("ready")}}else if(a.streaming&&e.readyState===3){try{if(!this.statusCode){this.statusCode=e.status;this.headers=s(e);this.emit("ready")}}catch(t){}try{this._emitData(e)}catch(t){a.streaming=false}}else if(e.readyState===4){if(!this.statusCode){this.statusCode=e.status;this.emit("ready")}this._emitData(e);if(e.error){this.emit("error",this.getResponse(e))}else this.emit("end");this.emit("close")}};o.prototype._emitData=function(e){var t=this.getResponse(e);if(t.toString().match(/ArrayBuffer/)){this.emit("data",new Uint8Array(t,this.offset));this.offset=t.byteLength;return}if(t.length>this.offset){this.emit("data",t.slice(this.offset));this.offset=t.length}};var u=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{stream:107,util:110}],87:[function(e,t,n){(function(){var e=typeof n!="undefined"?n:this;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error;r.prototype.name="InvalidCharacterError";e.btoa||(e.btoa=function(e){for(var n,i,o=0,a=t,s="";e.charAt(o|0)||(a="=",o%1);s+=a.charAt(63&n>>8-o%1*8)){i=e.charCodeAt(o+=3/4);if(i>255){throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}n=n<<8|i}return s});e.atob||(e.atob=function(e){e=e.replace(/=+$/,"");if(e.length%4==1){throw new r("'atob' failed: The string to be decoded is not correctly encoded.")}for(var n=0,i,o,a=0,s="";o=e.charAt(a++);~o&&(i=n%4?i*64+o:o,n++%4)?s+=String.fromCharCode(255&i>>(-2*n&6)):0){o=t.indexOf(o)}return s})})()},{}],88:[function(e,t,n){t.exports=e(38)},{}],89:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate;var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(e){return function(e){return window.setImmediate(e)}}if(t){var n=[];window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(n.length>0){var r=n.shift();r()}}},true);return function r(e){n.push(e);window.postMessage("process-tick","*")}}return function i(e){setTimeout(e,0)}}();r.title="browser";r.browser=true;r.env={};r.argv=[];function i(){}r.on=i;r.addListener=i;r.once=i;r.off=i;r.removeListener=i;r.removeAllListeners=i;r.emit=i;r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],90:[function(e,t,n){(function(e){(function(r){var i=typeof n=="object"&&n;var o=typeof t=="object"&&t&&t.exports==i&&t;var a=typeof e=="object"&&e;if(a.global===a||a.window===a){r=a}var s,u=2147483647,f=36,l=1,c=26,h=38,d=700,p=72,v=128,g="-",m=/^xn--/,y=/[^ -~]/,b=/\x2E|\u3002|\uFF0E|\uFF61/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=f-l,_=Math.floor,x=String.fromCharCode,k;function S(e){throw RangeError(w[e])}function O(e,t){var n=e.length;while(n--){e[n]=t(e[n])}return e}function T(e,t){return O(e.split(b),t).join(".")}function A(e){var t=[],n=0,r=e.length,i,o;while(n<r){i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){o=e.charCodeAt(n++);if((o&64512)==56320){t.push(((i&1023)<<10)+(o&1023)+65536)}else{t.push(i);n--}}else{t.push(i)}}return t}function N(e){return O(e,function(e){var t="";if(e>65535){e-=65536;t+=x(e>>>10&1023|55296);e=56320|e&1023}t+=x(e);return t}).join("")}function L(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return f}function R(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function C(e,t,n){var r=0;e=n?_(e/d):e>>1;e+=_(e/t);for(;e>E*c>>1;r+=f){e=_(e/E)}return _(r+(E+1)*e/(e+h))}function j(e){var t=[],n=e.length,r,i=0,o=v,a=p,s,h,d,m,y,b,w,E,x;s=e.lastIndexOf(g);if(s<0){s=0}for(h=0;h<s;++h){if(e.charCodeAt(h)>=128){S("not-basic")}t.push(e.charCodeAt(h))}for(d=s>0?s+1:0;d<n;){for(m=i,y=1,b=f;;b+=f){if(d>=n){S("invalid-input")}w=L(e.charCodeAt(d++));if(w>=f||w>_((u-i)/y)){S("overflow")}i+=w*y;E=b<=a?l:b>=a+c?c:b-a;if(w<E){break}x=f-E;if(y>_(u/x)){S("overflow")}y*=x}r=t.length+1;a=C(i-m,r,m==0);if(_(i/r)>u-o){S("overflow")}o+=_(i/r);i%=r;t.splice(i++,0,o)}return N(t)}function I(e){var t,n,r,i,o,a,s,h,d,m,y,b=[],w,E,k,O;e=A(e);w=e.length;t=v;n=0;o=p;for(a=0;a<w;++a){y=e[a];if(y<128){b.push(x(y))}}r=i=b.length;if(i){b.push(g)}while(r<w){for(s=u,a=0;a<w;++a){y=e[a];if(y>=t&&y<s){s=y}}E=r+1;if(s-t>_((u-n)/E)){S("overflow")}n+=(s-t)*E;t=s;for(a=0;a<w;++a){y=e[a];if(y<t&&++n>u){S("overflow")}if(y==t){for(h=n,d=f;;d+=f){m=d<=o?l:d>=o+c?c:d-o;if(h<m){break}O=h-m;k=f-m;b.push(x(R(m+O%k,0)));h=_(O/k)}b.push(x(R(h,0)));o=C(n,E,r==i);n=0;++r}}++n;++t}return b.join("")}function M(e){return T(e,function(e){return m.test(e)?j(e.slice(4).toLowerCase()):e})}function P(e){return T(e,function(e){return y.test(e)?"xn--"+I(e):e})}s={version:"1.2.4",ucs2:{decode:A,encode:N},decode:j,encode:I,toASCII:P,toUnicode:M};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return s})}else if(i&&!i.nodeType){if(o){o.exports=s}else{for(k in s){s.hasOwnProperty(k)&&(i[k]=s[k])}}}else{r.punycode=s}})(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],91:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&";n=n||"=";var a={};if(typeof e!=="string"||e.length===0){return a}var s=/\+/g;e=e.split(t);var u=1e3;if(o&&typeof o.maxKeys==="number"){u=o.maxKeys}var f=e.length;if(u>0&&f>u){f=u}for(var l=0;l<f;++l){var c=e[l].replace(s,"%20"),h=c.indexOf(n),d,p,v,g;
if(h>=0){d=c.substr(0,h);p=c.substr(h+1)}else{d=c;p=""}v=decodeURIComponent(d);g=decodeURIComponent(p);if(!r(a,v)){a[v]=g}else if(i(a[v])){a[v].push(g)}else{a[v]=[a[v],g]}}return a};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],92:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){t=t||"&";n=n||"=";if(e===null){e=undefined}if(typeof e==="object"){return o(a(e),function(a){var s=encodeURIComponent(r(a))+n;if(i(e[a])){return o(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t)}else{return s+encodeURIComponent(r(e[a]))}}).join(t)}if(!s)return"";return encodeURIComponent(r(s))+n+encodeURIComponent(r(e))};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function o(e,t){if(e.map)return e.map(t);var n=[];for(var r=0;r<e.length;r++){n.push(t(e[r],r))}return n}var a=Object.keys||function(e){var t=[];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t.push(n)}return t}},{}],93:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode");n.encode=n.stringify=e("./encode")},{"./decode":91,"./encode":92}],94:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":95}],95:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{"./_stream_readable":97,"./_stream_writable":99,GS1EMO:89,"core-util-is":100,inherits:88}],96:[function(e,t,n){t.exports=e(33)},{"./_stream_transform":98,"core-util-is":100,inherits:88}],97:[function(e,t,n){(function(n){t.exports=l;var r=e("isarray");var i=e("buffer").Buffer;l.ReadableState=f;var o=e("events").EventEmitter;if(!o.listenerCount)o.listenerCount=function(e,t){return e.listeners(t).length};var a=e("stream");var s=e("core-util-is");s.inherits=e("inherits");var u;s.inherits(l,a);function f(t,n){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||r===0?r:16*1024;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=false;this.ended=false;this.endEmitted=false;this.reading=false;this.calledRead=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!t.objectMode;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!u)u=e("string_decoder/").StringDecoder;this.decoder=new u(t.encoding);this.encoding=t.encoding}}function l(e){if(!(this instanceof l))return new l(e);this._readableState=new f(e,this);this.readable=true;a.call(this)}l.prototype.push=function(e,t){var n=this._readableState;if(typeof e==="string"&&!n.objectMode){t=t||n.defaultEncoding;if(t!==n.encoding){e=new i(e,t);t=""}}return c(this,n,e,t,false)};l.prototype.unshift=function(e){var t=this._readableState;return c(this,t,e,"",true)};function c(e,t,n,r,i){var o=g(t,n);if(o){e.emit("error",o)}else if(n===null||n===undefined){t.reading=false;if(!t.ended)m(e,t)}else if(t.objectMode||n&&n.length>0){if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{if(t.decoder&&!i&&!r)n=t.decoder.write(n);t.length+=t.objectMode?1:n.length;if(i){t.buffer.unshift(n)}else{t.reading=false;t.buffer.push(n)}if(t.needReadable)y(e);w(e,t)}}else if(!i){t.reading=false}return h(t)}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}l.prototype.setEncoding=function(t){if(!u)u=e("string_decoder/").StringDecoder;this._readableState.decoder=new u(t);this._readableState.encoding=t};var d=8388608;function p(e){if(e>=d){e=d}else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function v(e,t){if(t.length===0&&t.ended)return 0;if(t.objectMode)return e===0?0:1;if(isNaN(e)||e===null){if(t.flowing&&t.buffer.length)return t.buffer[0].length;else return t.length}if(e<=0)return 0;if(e>t.highWaterMark)t.highWaterMark=p(e);if(e>t.length){if(!t.ended){t.needReadable=true;return 0}else return t.length}return e}l.prototype.read=function(e){var t=this._readableState;t.calledRead=true;var n=e;if(typeof e!=="number"||e>0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){y(this);return null}e=v(e,t);if(e===0&&t.ended){if(t.length===0)T(this);return null}var r=t.needReadable;if(t.length-e<=t.highWaterMark)r=true;if(t.ended||t.reading)r=false;if(r){t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false}if(r&&!t.reading)e=v(n,t);var i;if(e>0)i=O(e,t);else i=null;if(i===null){t.needReadable=true;e=0}t.length-=e;if(t.length===0&&!t.ended)t.needReadable=true;if(t.ended&&!t.endEmitted&&t.length===0)T(this);return i};function g(e,t){var n=null;if(!i.isBuffer(t)&&"string"!==typeof t&&t!==null&&t!==undefined&&!e.objectMode&&!n){n=new TypeError("Invalid non-string/buffer chunk")}return n}function m(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();if(n&&n.length){t.buffer.push(n);t.length+=t.objectMode?1:n.length}}t.ended=true;if(t.length>0)y(e);else T(e)}function y(e){var t=e._readableState;t.needReadable=false;if(t.emittedReadable)return;t.emittedReadable=true;if(t.sync)n.nextTick(function(){b(e)});else b(e)}function b(e){e.emit("readable")}function w(e,t){if(!t.readingMore){t.readingMore=true;n.nextTick(function(){E(e,t)})}}function E(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){e.read(0);if(n===t.length)break;else n=t.length}t.readingMore=false}l.prototype._read=function(e){this.emit("error",new Error("not implemented"))};l.prototype.pipe=function(e,t){var i=this;var a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);break}a.pipesCount+=1;var s=(!t||t.end!==false)&&e!==n.stdout&&e!==n.stderr;var u=s?l:h;if(a.endEmitted)n.nextTick(u);else i.once("end",u);e.on("unpipe",f);function f(e){if(e!==i)return;h()}function l(){e.end()}var c=_(i);e.on("drain",c);function h(){e.removeListener("close",p);e.removeListener("finish",v);e.removeListener("drain",c);e.removeListener("error",d);e.removeListener("unpipe",f);i.removeListener("end",l);i.removeListener("end",h);if(!e._writableState||e._writableState.needDrain)c()}function d(t){g();e.removeListener("error",d);if(o.listenerCount(e,"error")===0)e.emit("error",t)}if(!e._events||!e._events.error)e.on("error",d);else if(r(e._events.error))e._events.error.unshift(d);else e._events.error=[d,e._events.error];function p(){e.removeListener("finish",v);g()}e.once("close",p);function v(){e.removeListener("close",p);g()}e.once("finish",v);function g(){i.unpipe(e)}e.emit("pipe",i);if(!a.flowing){this.on("readable",k);a.flowing=true;n.nextTick(function(){x(i)})}return e};function _(e){return function(){var t=this;var n=e._readableState;n.awaitDrain--;if(n.awaitDrain===0)x(e)}}function x(e){var t=e._readableState;var n;t.awaitDrain=0;function r(e,r,i){var o=e.write(n);if(false===o){t.awaitDrain++}}while(t.pipesCount&&null!==(n=e.read())){if(t.pipesCount===1)r(t.pipes,0,null);else A(t.pipes,r);e.emit("data",n);if(t.awaitDrain>0)return}if(t.pipesCount===0){t.flowing=false;if(o.listenerCount(e,"data")>0)S(e);return}t.ranOut=true}function k(){if(this._readableState.ranOut){this._readableState.ranOut=false;x(this)}}l.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;this.removeListener("readable",k);t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var n=t.pipes;var r=t.pipesCount;t.pipes=null;t.pipesCount=0;this.removeListener("readable",k);t.flowing=false;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=N(t.pipes,e);if(i===-1)return this;t.pipes.splice(i,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};l.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if(e==="data"&&!this._readableState.flowing)S(this);if(e==="readable"&&this.readable){var r=this._readableState;if(!r.readableListening){r.readableListening=true;r.emittedReadable=false;r.needReadable=true;if(!r.reading){this.read(0)}else if(r.length){y(this,r)}}}return n};l.prototype.addListener=l.prototype.on;l.prototype.resume=function(){S(this);this.read(0);this.emit("resume")};l.prototype.pause=function(){S(this,true);this.emit("pause")};function S(e,t){var r=e._readableState;if(r.flowing){throw new Error("Cannot switch to old mode now.")}var i=t||false;var o=false;e.readable=true;e.pipe=a.prototype.pipe;e.on=e.addListener=a.prototype.on;e.on("readable",function(){o=true;var t;while(!i&&null!==(t=e.read()))e.emit("data",t);if(t===null){o=false;e._readableState.needReadable=true}});e.pause=function(){i=true;this.emit("pause")};e.resume=function(){i=false;if(o)n.nextTick(function(){e.emit("readable")});else this.read(0);this.emit("resume")};e.emit("readable")}l.prototype.wrap=function(e){var t=this._readableState;var n=false;var r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)r.push(e)}r.push(null)});e.on("data",function(i){if(t.decoder)i=t.decoder.write(i);if(!i||!t.objectMode&&!i.length)return;var o=r.push(i);if(!o){n=true;e.pause()}});for(var i in e){if(typeof e[i]==="function"&&typeof this[i]==="undefined"){this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i)}}var o=["error","close","destroy","pause","resume"];A(o,function(t){e.on(t,r.emit.bind(r,t))});r._read=function(t){if(n){n=false;e.resume()}};return r};l._fromList=O;function O(e,t){var n=t.buffer;var r=t.length;var o=!!t.decoder;var a=!!t.objectMode;var s;if(n.length===0)return null;if(r===0)s=null;else if(a)s=n.shift();else if(!e||e>=r){if(o)s=n.join("");else s=i.concat(n,r);n.length=0}else{if(e<n[0].length){var u=n[0];s=u.slice(0,e);n[0]=u.slice(e)}else if(e===n[0].length){s=n.shift()}else{if(o)s="";else s=new i(e);var f=0;for(var l=0,c=n.length;l<c&&f<e;l++){var u=n[0];var h=Math.min(e-f,u.length);if(o)s+=u.slice(0,h);else u.copy(s,f,0,h);if(h<u.length)n[0]=u.slice(h);else n.shift();f+=h}}}return s}function T(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");if(!t.endEmitted&&t.calledRead){t.ended=true;n.nextTick(function(){if(!t.endEmitted&&t.length===0){t.endEmitted=true;e.readable=false;e.emit("end")}})}}function A(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}}function N(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n}return-1}}).call(this,e("GS1EMO"))},{GS1EMO:89,buffer:80,"core-util-is":100,events:83,inherits:88,isarray:101,stream:107,"string_decoder/":102}],98:[function(e,t,n){arguments[4][35][0].apply(n,arguments)},{"./_stream_duplex":95,"core-util-is":100,inherits:88}],99:[function(e,t,n){(function(n){t.exports=u;var r=e("buffer").Buffer;u.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");i.inherits(u,o);function a(e,t,n){this.chunk=e;this.encoding=t;this.callback=n}function s(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||n===0?n:16*1024;this.objectMode=!!e.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var r=e.decodeStrings===false;this.decodeStrings=!r;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){g(t,e)};this.writecb=null;this.writelen=0;this.buffer=[];this.errorEmitted=false}function u(t){var n=e("./_stream_duplex");if(!(this instanceof u)&&!(this instanceof n))return new u(t);this._writableState=new s(t,this);this.writable=true;o.call(this)}u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(e,t,r){var i=new Error("write after end");e.emit("error",i);n.nextTick(function(){r(i)})}function l(e,t,i,o){var a=true;if(!r.isBuffer(i)&&"string"!==typeof i&&i!==null&&i!==undefined&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s);n.nextTick(function(){o(s)});a=false}return a}u.prototype.write=function(e,t,n){var i=this._writableState;var o=false;if(typeof t==="function"){n=t;t=null}if(r.isBuffer(e))t="buffer";else if(!t)t=i.defaultEncoding;if(typeof n!=="function")n=function(){};if(i.ended)f(this,i,n);else if(l(this,i,e,n))o=h(this,i,e,t,n);return o};function c(e,t,n){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=new r(t,n)}return t}function h(e,t,n,i,o){n=c(t,n,i);if(r.isBuffer(n))i="buffer";var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(!u)t.needDrain=true;if(t.writing)t.buffer.push(new a(n,i,o));else d(e,t,s,n,i,o);return u}function d(e,t,n,r,i,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;e._write(r,i,t.onwrite);t.sync=false}function p(e,t,r,i,o){if(r)n.nextTick(function(){o(i)});else o(i);e._writableState.errorEmitted=true;e.emit("error",i)}function v(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function g(e,t){var r=e._writableState;var i=r.sync;var o=r.writecb;v(r);if(t)p(e,r,i,t,o);else{var a=w(e,r);if(!a&&!r.bufferProcessing&&r.buffer.length)b(e,r);if(i){n.nextTick(function(){m(e,r,a,o)})}else{m(e,r,a,o)}}}function m(e,t,n,r){if(!n)y(e,t);r();if(n)E(e,t)}function y(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function b(e,t){t.bufferProcessing=true;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n];var i=r.chunk;var o=r.encoding;var a=r.callback;var s=t.objectMode?1:i.length;d(e,t,s,i,o,a);if(t.writing){n++;break}}t.bufferProcessing=false;if(n<t.buffer.length)t.buffer=t.buffer.slice(n);else t.buffer.length=0}u.prototype._write=function(e,t,n){n(new Error("not implemented"))};u.prototype.end=function(e,t,n){var r=this._writableState;if(typeof e==="function"){n=e;e=null;t=null}else if(typeof t==="function"){n=t;t=null}if(typeof e!=="undefined"&&e!==null)this.write(e,t);if(!r.ending&&!r.finished)_(this,r,n)};function w(e,t){return t.ending&&t.length===0&&!t.finished&&!t.writing}function E(e,t){var n=w(e,t);if(n){t.finished=true;e.emit("finish")}return n}function _(e,t,r){t.ending=true;E(e,t);if(r){if(t.finished)n.nextTick(r);else e.once("finish",r)}t.ended=true}}).call(this,e("GS1EMO"))},{"./_stream_duplex":95,GS1EMO:89,buffer:80,"core-util-is":100,inherits:88,stream:107}],100:[function(e,t,n){t.exports=e(37)},{buffer:80}],101:[function(e,t,n){t.exports=e(39)},{}],102:[function(e,t,n){var r=e("buffer").Buffer;var i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function o(e){if(e&&!i(e)){throw new Error("Unknown encoding: "+e)}}var a=n.StringDecoder=function(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");o(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=u;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=f;break;default:this.write=s;return}this.charBuffer=new r(6);this.charReceived=0;this.charLength=0};a.prototype.write=function(e){var t="";var n=0;while(this.charLength){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,n,r);this.charReceived+=r-n;n=r;if(this.charReceived<this.charLength){return""}t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(r==e.length)return t;e=e.slice(r,e.length);break}var o=this.detectIncompleteChar(e);var a=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-o,a);this.charReceived=o;a-=o}t+=e.toString(this.encoding,0,a);var a=t.length-1;var i=t.charCodeAt(a);if(i>=55296&&i<=56319){var s=this.surrogateSize;this.charLength+=s;this.charReceived+=s;this.charBuffer.copy(this.charBuffer,s,0,s);this.charBuffer.write(t.charAt(t.length-1),this.encoding);return t.substring(0,a)}return t};a.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}return t};a.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var n=this.charReceived;var r=this.charBuffer;var i=this.encoding;t+=r.slice(0,n).toString(i)}return t};function s(e){return e.toString(this.encoding)}function u(e){var t=this.charReceived=e.length%2;this.charLength=t?2:0;return t}function f(e){var t=this.charReceived=e.length%3;this.charLength=t?3:0;return t}},{buffer:80}],103:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":96}],104:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{"./lib/_stream_duplex.js":95,"./lib/_stream_passthrough.js":96,"./lib/_stream_readable.js":97,"./lib/_stream_transform.js":98,"./lib/_stream_writable.js":99}],105:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":98}],106:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":99}],107:[function(e,t,n){t.exports=o;var r=e("events").EventEmitter;var i=e("inherits");i(o,r);o.Readable=e("readable-stream/readable.js");o.Writable=e("readable-stream/writable.js");o.Duplex=e("readable-stream/duplex.js");o.Transform=e("readable-stream/transform.js");o.PassThrough=e("readable-stream/passthrough.js");o.Stream=o;function o(){r.call(this)}o.prototype.pipe=function(e,t){var n=this;function i(t){if(e.writable){if(false===e.write(t)&&n.pause){n.pause()}}}n.on("data",i);function o(){if(n.readable&&n.resume){n.resume()}}e.on("drain",o);if(!e._isStdio&&(!t||t.end!==false)){n.on("end",s);n.on("close",u)}var a=false;function s(){if(a)return;a=true;e.end()}function u(){if(a)return;a=true;if(typeof e.destroy==="function")e.destroy()}function f(e){l();if(r.listenerCount(this,"error")===0){throw e}}n.on("error",f);e.on("error",f);function l(){n.removeListener("data",i);e.removeListener("drain",o);n.removeListener("end",s);n.removeListener("close",u);n.removeListener("error",f);e.removeListener("error",f);n.removeListener("end",l);n.removeListener("close",l);e.removeListener("close",l)}n.on("end",l);n.on("close",l);e.on("close",l);e.emit("pipe",n);return e}},{events:83,inherits:88,"readable-stream/duplex.js":94,"readable-stream/passthrough.js":103,"readable-stream/readable.js":104,"readable-stream/transform.js":105,"readable-stream/writable.js":106}],108:[function(e,t,n){var r=e("punycode");n.parse=b;n.resolve=E;n.resolveObject=_;n.format=w;n.Url=i;function i(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=["<",">",'"',"`"," ","\r","\n","	"],u=["{","}","|","\\","^","`"].concat(s),f=["'"].concat(u),l=["%","/","?",";","#"].concat(f),c=["/","?","#"],h=255,d=/^[a-z0-9A-Z_-]{0,63}$/,p=/^([a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:true,"javascript:":true},g={javascript:true,"javascript:":true},m={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},y=e("querystring");function b(e,t,n){if(e&&k(e)&&e instanceof i)return e;var r=new i;r.parse(e,t,n);return r}i.prototype.parse=function(e,t,n){if(!x(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var i=e;i=i.trim();var a=o.exec(i);if(a){a=a[0];var s=a.toLowerCase();this.protocol=s;i=i.substr(a.length)}if(n||a||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=i.substr(0,2)==="//";if(u&&!(a&&g[a])){i=i.substr(2);this.slashes=true}}if(!g[a]&&(u||a&&!m[a])){var b=-1;for(var w=0;w<c.length;w++){var E=i.indexOf(c[w]);if(E!==-1&&(b===-1||E<b))b=E}var _,k;if(b===-1){k=i.lastIndexOf("@")}else{k=i.lastIndexOf("@",b)}if(k!==-1){_=i.slice(0,k);i=i.slice(k+1);this.auth=decodeURIComponent(_)}b=-1;for(var w=0;w<l.length;w++){var E=i.indexOf(l[w]);if(E!==-1&&(b===-1||E<b))b=E}if(b===-1)b=i.length;this.host=i.slice(0,b);i=i.slice(b);this.parseHost();this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S){var O=this.hostname.split(/\./);for(var w=0,T=O.length;w<T;w++){var A=O[w];if(!A)continue;if(!A.match(d)){var N="";for(var L=0,R=A.length;L<R;L++){if(A.charCodeAt(L)>127){N+="x"}else{N+=A[L]}}if(!N.match(d)){var C=O.slice(0,w);var j=O.slice(w+1);var I=A.match(p);if(I){C.push(I[1]);j.unshift(I[2])}if(j.length){i="/"+j.join(".")+i}this.hostname=C.join(".");break}}}}if(this.hostname.length>h){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!S){var M=this.hostname.split(".");var P=[];for(var w=0;w<M.length;++w){var D=M[w];P.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+r.encode(D):D)}this.hostname=P.join(".")}var F=this.port?":"+this.port:"";var B=this.hostname||"";this.host=B+F;this.href+=this.host;if(S){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(i[0]!=="/"){i="/"+i}}}if(!v[s]){for(var w=0,T=f.length;w<T;w++){var U=f[w];var W=encodeURIComponent(U);if(W===U){W=escape(U)}i=i.split(U).join(W)}}var q=i.indexOf("#");if(q!==-1){this.hash=i.substr(q);i=i.slice(0,q)}var V=i.indexOf("?");if(V!==-1){this.search=i.substr(V);this.query=i.substr(V+1);if(t){this.query=y.parse(this.query)}i=i.slice(0,V)}else if(t){this.search="";this.query={}}if(i)this.pathname=i;if(m[s]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var F=this.pathname||"";var D=this.search||"";this.path=F+D}this.href=this.format();return this};function w(e){if(x(e))e=b(e);if(!(e instanceof i))return i.prototype.format.call(e);return e.format()}i.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=false,o="";if(this.host){i=e+this.host}else if(this.hostname){i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){i+=":"+this.port}}if(this.query&&k(this.query)&&Object.keys(this.query).length){o=y.stringify(this.query)}var a=this.search||o&&"?"+o||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||m[t])&&i!==false){i="//"+(i||"");if(n&&n.charAt(0)!=="/")n="/"+n}else if(!i){i=""}if(r&&r.charAt(0)!=="#")r="#"+r;if(a&&a.charAt(0)!=="?")a="?"+a;n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)});a=a.replace("#","%23");return t+i+n+a+r};function E(e,t){return b(e,false,true).resolve(t)}i.prototype.resolve=function(e){return this.resolveObject(b(e,false,true)).format()};function _(e,t){if(!e)return t;return b(e,false,true).resolveObject(t)}i.prototype.resolveObject=function(e){if(x(e)){var t=new i;t.parse(e,false,true);e=t}var n=new i;Object.keys(this).forEach(function(e){n[e]=this[e]},this);n.hash=e.hash;if(e.href===""){n.href=n.format();return n}if(e.slashes&&!e.protocol){Object.keys(e).forEach(function(t){if(t!=="protocol")n[t]=e[t]});if(m[n.protocol]&&n.hostname&&!n.pathname){n.path=n.pathname="/"}n.href=n.format();return n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){Object.keys(e).forEach(function(t){n[t]=e[t]});n.href=n.format();return n}n.protocol=e.protocol;if(!e.host&&!g[e.protocol]){var r=(e.pathname||"").split("/");while(r.length&&!(e.host=r.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(r[0]!=="")r.unshift("");if(r.length<2)r.unshift("");n.pathname=r.join("/")}else{n.pathname=e.pathname}n.search=e.search;n.query=e.query;n.host=e.host||"";n.auth=e.auth;n.hostname=e.hostname||e.host;n.port=e.port;if(n.pathname||n.search){var o=n.pathname||"";var a=n.search||"";n.path=o+a}n.slashes=n.slashes||e.slashes;n.href=n.format();return n}var s=n.pathname&&n.pathname.charAt(0)==="/",u=e.host||e.pathname&&e.pathname.charAt(0)==="/",f=u||s||n.host&&e.pathname,l=f,c=n.pathname&&n.pathname.split("/")||[],r=e.pathname&&e.pathname.split("/")||[],h=n.protocol&&!m[n.protocol];if(h){n.hostname="";n.port=null;if(n.host){if(c[0]==="")c[0]=n.host;else c.unshift(n.host)}n.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(r[0]==="")r[0]=e.host;else r.unshift(e.host)}e.host=null}f=f&&(r[0]===""||c[0]==="")}if(u){n.host=e.host||e.host===""?e.host:n.host;n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname;n.search=e.search;n.query=e.query;c=r}else if(r.length){if(!c)c=[];c.pop();c=c.concat(r);n.search=e.search;n.query=e.query}else if(!O(e.search)){if(h){n.hostname=n.host=c.shift();var d=n.host&&n.host.indexOf("@")>0?n.host.split("@"):false;if(d){n.auth=d.shift();n.host=n.hostname=d.shift()}}n.search=e.search;n.query=e.query;if(!S(n.pathname)||!S(n.search)){n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")}n.href=n.format();return n}if(!c.length){n.pathname=null;if(n.search){n.path="/"+n.search}else{n.path=null}n.href=n.format();return n}var p=c.slice(-1)[0];var v=(n.host||e.host)&&(p==="."||p==="..")||p==="";var y=0;for(var b=c.length;b>=0;b--){p=c[b];if(p=="."){c.splice(b,1)}else if(p===".."){c.splice(b,1);y++}else if(y){c.splice(b,1);y--}}if(!f&&!l){for(;y--;y){c.unshift("..")}}if(f&&c[0]!==""&&(!c[0]||c[0].charAt(0)!=="/")){c.unshift("")}if(v&&c.join("/").substr(-1)!=="/"){c.push("")}var w=c[0]===""||c[0]&&c[0].charAt(0)==="/";if(h){n.hostname=n.host=w?"":c.length?c.shift():"";var d=n.host&&n.host.indexOf("@")>0?n.host.split("@"):false;if(d){n.auth=d.shift();n.host=n.hostname=d.shift()}}f=f||n.host&&c.length;if(f&&!w){c.unshift("")}if(!c.length){n.pathname=null;n.path=null}else{n.pathname=c.join("/")}if(!S(n.pathname)||!S(n.search)){n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")}n.auth=e.auth||n.auth;n.slashes=n.slashes||e.slashes;n.href=n.format();return n};i.prototype.parseHost=function(){var e=this.host;var t=a.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e};function x(e){return typeof e==="string"}function k(e){return typeof e==="object"&&e!==null}function S(e){return e===null}function O(e){return e==null}},{punycode:90,querystring:93}],109:[function(e,t,n){t.exports=function r(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],110:[function(e,t,n){(function(t,r){var i=/%[sdj%]/g;n.format=function(e){if(!_(e)){var t=[];for(var n=0;n<arguments.length;n++){t.push(s(arguments[n]))}return t.join(" ")}var n=1;var r=arguments;var o=r.length;var a=String(e).replace(i,function(e){if(e==="%%")return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}});for(var u=r[n];n<o;u=r[++n]){if(b(u)||!O(u)){a+=" "+u}else{a+=" "+s(u)}}return a};n.deprecate=function(e,i){if(k(r.process)){return function(){return n.deprecate(e,i).apply(this,arguments)}}if(t.noDeprecation===true){return e}var o=false;function a(){if(!o){if(t.throwDeprecation){throw new Error(i)}else if(t.traceDeprecation){console.trace(i)}else{console.error(i)}o=true}return e.apply(this,arguments)}return a};var o={};var a;n.debuglog=function(e){if(k(a))a=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!o[e]){if(new RegExp("\\b"+e+"\\b","i").test(a)){var r=t.pid;o[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else{o[e]=function(){}}}return o[e]};function s(e,t){var r={seen:[],stylize:f};if(arguments.length>=3)r.depth=arguments[2];if(arguments.length>=4)r.colors=arguments[3];if(y(t)){r.showHidden=t}else if(t){n._extend(r,t)}if(k(r.showHidden))r.showHidden=false;if(k(r.depth))r.depth=2;if(k(r.colors))r.colors=false;if(k(r.customInspect))r.customInspect=true;if(r.colors)r.stylize=u;return c(r,e,r.depth)}n.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function u(e,t){var n=s.styles[t];if(n){return"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m"}else{return e}}function f(e,t){return e}function l(e){var t={};e.forEach(function(e,n){t[e]=true});return t}function c(e,t,r){if(e.customInspect&&t&&N(t.inspect)&&t.inspect!==n.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);if(!_(i)){i=c(e,i,r)}return i}var o=h(e,t);if(o){return o}var a=Object.keys(t);var s=l(a);if(e.showHidden){a=Object.getOwnPropertyNames(t)}if(A(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0)){return d(t)}if(a.length===0){if(N(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(S(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(T(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(A(t)){return d(t)}}var f="",y=false,b=["{","}"];if(m(t)){y=true;b=["[","]"]}if(N(t)){var w=t.name?": "+t.name:"";f=" [Function"+w+"]"}if(S(t)){f=" "+RegExp.prototype.toString.call(t)}if(T(t)){f=" "+Date.prototype.toUTCString.call(t)}if(A(t)){f=" "+d(t)}if(a.length===0&&(!y||t.length==0)){return b[0]+f+b[1]}if(r<0){if(S(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var E;if(y){E=p(e,t,r,s,a)}else{E=a.map(function(n){return v(e,t,r,s,n,y)})}e.seen.pop();return g(E,f,b)}function h(e,t){if(k(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(E(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i){var o=[];for(var a=0,s=t.length;a<s;++a){if(M(t,String(a))){o.push(v(e,t,n,r,String(a),true))}else{o.push("")}}i.forEach(function(i){if(!i.match(/^\d+$/)){o.push(v(e,t,n,r,i,true))}});return o}function v(e,t,n,r,i,o){var a,s,u;u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(u.get){if(u.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(u.set){s=e.stylize("[Setter]","special")}}if(!M(r,i)){a="["+i+"]"}if(!s){if(e.seen.indexOf(u.value)<0){if(b(n)){s=c(e,u.value,null)}else{s=c(e,u.value,n-1)}if(s.indexOf("\n")>-1){if(o){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(k(a)){if(o&&i.match(/^\d+$/)){return s}a=JSON.stringify(""+i);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+s}function g(e,t,n){var r=0;var i=e.reduce(function(e,t){r++;if(t.indexOf("\n")>=0)r++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60){return n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]}return n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}n.isArray=m;function y(e){return typeof e==="boolean"}n.isBoolean=y;function b(e){return e===null}n.isNull=b;function w(e){return e==null}n.isNullOrUndefined=w;function E(e){return typeof e==="number"}n.isNumber=E;function _(e){return typeof e==="string"}n.isString=_;function x(e){return typeof e==="symbol"}n.isSymbol=x;function k(e){return e===void 0}n.isUndefined=k;function S(e){return O(e)&&R(e)==="[object RegExp]"}n.isRegExp=S;function O(e){return typeof e==="object"&&e!==null
}n.isObject=O;function T(e){return O(e)&&R(e)==="[object Date]"}n.isDate=T;function A(e){return O(e)&&(R(e)==="[object Error]"||e instanceof Error)}n.isError=A;function N(e){return typeof e==="function"}n.isFunction=N;function L(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}n.isPrimitive=L;n.isBuffer=e("./support/isBuffer");function R(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date;var t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}n.log=function(){console.log("%s - %s",I(),n.format.apply(n,arguments))};n.inherits=e("inherits");n._extend=function(e,t){if(!t||!O(t))return e;var n=Object.keys(t);var r=n.length;while(r--){e[n[r]]=t[n[r]]}return e};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("GS1EMO"),typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":109,GS1EMO:89,inherits:88}]},{},[2]);